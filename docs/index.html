<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Presentation Ninja</title>
    <meta charset="utf-8" />
    <meta name="author" content="Yihui Xie" />
    <meta name="author" content="Garrick Aden-Buie" />
    <meta name="date" content="2025-04-23" />
    <script src="index_files/header-attrs/header-attrs.js"></script>
    <script src="index_files/clipboard/clipboard.min.js"></script>
    <link href="index_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <script src="index_files/xaringanExtra_fit-screen/fit-screen.js"></script>
    <link href="index_files/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link href="index_files/shareon/shareon.min.css" rel="stylesheet" />
    <script src="index_files/shareon/shareon.min.js"></script>
    <link href="index_files/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-shareagain/shareagain.js"></script>
    <script src="index_files/fabric/fabric.min.js"></script>
    <link href="index_files/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link href="index_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="index_files/tile-view/tile-view.js"></script>
    <link href="index_files/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="index_files/panelset/panelset.css" rel="stylesheet" />
    <script src="index_files/panelset/panelset.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Presentation Ninja
]
.subtitle[
## ‚öîÔ∏è xaringan +<br/>üòé xaringanthemer
]
.author[
### Yihui Xie
]
.author[
### Garrick Aden-Buie
]
.date[
### 2025-04-23
]

---








# Sum√°rio

1. [R e RStudio](#r-rstudio)
2. [Introdu√ß√£o](#introducao)
3. [Projetos](#projetos)
4. [Importa√ß√£o de dados](#importacao)
5. [Manipula√ß√£o de dados](#manipulacao)
6. [Visualiza√ß√£o de dados](#visualizacao)
7. [Regress√£o Linear](#regressao)

---

class: inverse center middle
name: r-rstudio

# R e RStudio 

---

## Instala√ß√£o do R

.pull-left[
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
- [Download](https://cran.r-project.org/)
- Use a vers√£o mais recente üòâ 
]
.pull-right[
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;img src="img/01-r-logo.svg" width="60%" style="display: block; margin: auto;" /&gt;
]

---

## Instala√ß√£o do R

&lt;img src="img/02-r-install.png" width="80%" style="display: block; margin: auto;" /&gt;

---

## Instala√ß√£o do RStudio

.pull-left[
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
- [Download](https://posit.co/download/rstudio-desktop/)
- Use a vers√£o mais recente üòâ 
]
.pull-right[
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;img src="img/03-rstudio.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---

## Instala√ß√£o do RStudio

&lt;img src="img/04-rstudio-install.png" width="80%" style="display: block; margin: auto;" /&gt;

---

### O que √© o R?

&gt; "R √© um ambiente de software livre para computa√ß√£o estat√≠stica e gr√°ficos." [R Development Core Team](https://cran.r-project.org/)

  - **Por que usar o R?**
  
    - √â uma linguagem de programa√ß√£o que possui muitas ferramentar para a an√°lise de dados;
    
    - √â em c√≥digo aberto e gratuito (*open source*);
    
    - Possui uma comunidade ativa de pessoas desenvolvedoras;
    
    - √â flex√≠vel, permite desenvolver fun√ß√µes e pacotes para facilitar o trabalho;
    
    - Est√° dispon√≠vel gratuitamente em diferentes plataformas: Linux, MacOS e Windows;
    
    - Mantido pela [R Development Core Team](https://cran.r-project.org/).
    
---

### RStudio

**RStudio** √© uma IDE (*Integrated Development Environment*) da Linguagem R, isto √©, um ambiente de desenvolvimento utilizado para editar e executar c√≥digos em R. Ela √© mantida pela [Posit](https://posit.co).

&lt;img src="img/05-rstudio.png" width="80%" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Editor/Scripts:** onde os c√≥digos s√£o escritos. O **RStudio** destaca algumas palavras e s√≠mbolos para facilitar a leitura do c√≥digo.

&lt;img src="img/06-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Console:** onde os c√≥digos s√£o executados e os resultados s√£o exibidos. **O R vive aqui!**

&lt;img src="img/07-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Environment:** painel com todos os objetos criados na sess√£o.

&lt;img src="img/08-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**History:** painel com um hist√≥rico dos comandos rodados.

&lt;img src="img/09-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Files:** mostra os arquivos no diret√≥rio de trabalho. √â poss√≠vel navegar entre os diret√≥rios.

&lt;img src="img/10-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Plots:** painel onde os gr√°ficos ser√£o apresentados.

&lt;img src="img/11-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Packages:** apresenta todos os pacotes instalados e carregados.

&lt;img src="img/12-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### RStudio

**Help:** janela onde a documenta√ß√£o das fun√ß√µes ser√£o apresentadas.

&lt;img src="img/13-rstudio-haydee.jpg" width="700px" style="display: block; margin: auto;" /&gt;

---

### Atalhos

Conhecer os atalhos do teclado ajuda bastante durante a programa√ß√£o no **RStudio**.

- **CTRL + ENTER:** avalia/roda a linha selecionada no script;

- **ALT + ‚Äì:** cria um sinal de atribui√ß√£o (`&lt;-`);

- **CTRL + SHIFT + M:** adiciona o operador pipe (`%&gt;%` ou `|&gt;`);

- **CTRL + SHIFT + C:** comenta a(s) linha(s) selecionada(s);

- **CTRL + SHIFT + D:** duplica a(s) linha(s) selecionada(s);

- **CTRL + 1:** altera o cursos para o script;

- **CTRL + 2:** altera o cursos para o console;

- **ALT + SHIFT + K:** mostra uma janela com todos os atalhos dispon√≠veis.

&lt;br&gt;

No MacOS, substitua **CTRL** por **CMD** e **ALT** por **OPT**.

---

### Help! 

Ficou com d√∫vida sobre determinado pacote ou fun√ß√£o?

  - Pe√ßa ajuda: **help**(nome_do_pacote) ou **?**nome_do_pacote;
  
  - Pe√ßa ajuda: **help**(nome_da_funcaoo) ou **?**nome_da_funcao;
  
&lt;br&gt;
  

``` r
help(sum)
?sum
```

&lt;br&gt;

  - Se a d√∫vida persistir, procure no [Google](https://www.google.com/) ou no [Stack Overflow](https://stackoverflow.com/).
  
  - E se ainda estiver com d√∫vidas, pergunte para a comunidade:
  
    - h√° diversos grupos de Telegram, Twitter, Discourse e em outras redes sociais.

---

### [Cheat Sheets](https://rstudio.com/resources/cheatsheets/)

O **RStudio** disponibiliza algumas 'folhas de cola', as **Cheat Sheets**. Elas trazem um resumo de como utilizar diversos pacotes e at√© o pr√≥prio RStudio. Para acess√°-las, basta clicar no menu `Help` e ent√£o em `Cheat Sheets`, ou atrav√©s do site da [**Posit**](https://posit.co/resources/cheatsheets/).

[![Cheat Sheets](img/14-cheatsheet-rstudio.png)](https://rstudio.github.io/cheatsheets/rstudio-ide.pdf)

---

### O Ciclo da Ci√™ncia de Dados

&lt;img src="img/15-ciclo-ciencia-de-dados.png" width="700px" style="display: block; margin: auto;" /&gt;

---

### O Ciclo da Ci√™ncia de Dados no R

&lt;img src="img/16-ciclo-ciencia-de-dados-no-r.png" width="700px" style="display: block; margin: auto;" /&gt;

---

class: inverse center middle
name: introducao

# Introdu√ß√£o

.center[(Acompanhe no arquivo `01-introducao.R`)]

---

### R como calculadora

O **R** permite realizar muitas opera√ß√µes matem√°ticas!


``` r
2 + 5 # adi√ß√£o
```

```
## [1] 7
```

``` r
9 - 4 # subtra√ß√£o
```

```
## [1] 5
```

``` r
5 * 2 # multiplica√ß√£o
```

```
## [1] 10
```

``` r
7 / 5 # divis√£o
```

```
## [1] 1.4
```

- **CTRL + ENTER:** executa a linha selecionada no script

---

### R como calculadora


``` r
9 %% 4 # resto da divis√£o de 9 por 4
```

```
## [1] 1
```

``` r
7 %/% 4 # parte inteira da divis√£o de 7 por 4
```

```
## [1] 1
```

``` r
8 ^ 2 # potencia√ß√£o
```

```
## [1] 64
```

``` r
sqrt(1024) # radicia√ß√£o
```

```
## [1] 32
```

A ordem matem√°tica das opera√ß√µes tamb√©m vale do R.

---

### Fun√ß√µes matem√°ticas


``` r
sin(1) # fun√ß√µes trigonom√©tricas
```

```
## [1] 0.841471
```

``` r
log(1) # logaritmo natural (base e)
```

```
## [1] 0
```

``` r
log10(10) # logaritmo na base 10
```

```
## [1] 1
```

``` r
exp(0.5) # exponencial e^(1/2)
```

```
## [1] 1.648721
```

---

### Objetos

O **R** permite armazenar (salvar) valores dentro de um objeto.

Um **objeto** √© um nome que guarda um valor, uma fun√ß√£o ou uma base de dados.

- Para atribuir um valor a um objeto no R, utilizamos o operador `&lt;-`.

.center[`nome_do_objeto &lt;- valor`]

- Atalho: **ALT** + **‚Äì**: cria o `&lt;-` sinal de atribui√ß√£o.

---

#### Exemplo:


``` r
nome &lt;- "Fernando Oliveira Costa"
nome
```

```
## [1] "Fernando Oliveira Costa"
```

``` r
idade &lt;- 40
idade
```

```
## [1] 40
```

``` r
cargo_ou_funcao &lt;- "Gerente de Projetos"
cargo_ou_funcao
```

```
## [1] "Gerente de Projetos"
```

``` r
salario &lt;- 12000.00
salario
```

```
## [1] 12000
```

---

### Nomes dos Objetos

Existem algumas regras para dar nomes aos objetos:

- os nomes devem come√ßar com uma letra. E podem conter letras, n√∫meros, `_` e `.`. N√£o usar acentua√ß√µes e/ou espa√ßos! O autor do livro [R for Data Science](https://r4ds.hadley.nz) recomenda usar **snake_case**, ou seja, palavras escritas em min√∫sculo separadas por underline (`_`).

- o R √© **case sensitive**, isto √©, faz a diferencia√ß√£o entre as letras min√∫sculas e mai√∫sculas. Portanto, um objeto chamado `teste` √© diferente de outro objeto chamado `Teste`.


``` r
a &lt;- 2
a
```

```
## [1] 2
```

``` r
A &lt;- 4
A
```

```
## [1] 4
```

---

### Operadores Relacionais

- Igual a: **==**

- Diferente de: **!=**

- Maior que: **&gt;**

- Maior ou igual a: **&gt;=**

- Menor que: **&lt;**

- Menor ou igual a: **&lt;=**

---

### Operadores Relacionais

- Igual a: **==**


``` r
TRUE == TRUE
```

```
## [1] TRUE
```

``` r
TRUE == FALSE
```

```
## [1] FALSE
```

- Diferente de: **!=**


``` r
TRUE != TRUE
```

```
## [1] FALSE
```

``` r
TRUE != FALSE
```

```
## [1] TRUE
```

---

### Operadores Relacionais

- Maior que: **&gt;**


``` r
15 &gt; 10
```

```
## [1] TRUE
```

``` r
10 &gt; 10
```

```
## [1] FALSE
```

- Menor que: **&lt;**


``` r
3 &lt; 5
```

```
## [1] TRUE
```

``` r
10 &lt; 5
```

```
## [1] FALSE
```

---

### Operadores Relacionais

- Maior ou igual a: **&gt;=**


``` r
15 &gt;= 10
```

```
## [1] TRUE
```

``` r
15 &gt;= 15
```

```
## [1] TRUE
```

- Menor ou igual a: **&lt;=**


``` r
10 &lt;= 10
```

```
## [1] TRUE
```

``` r
10 &lt;= 8
```

```
## [1] FALSE
```

---

### Operadores L√≥gicos

- AND - E: **&amp;**

Ser√° verdadeiro (`TRUE`) se as duas condi√ß√µes forem verdadeiras


``` r
x &lt;- 15

  x &gt; 10 &amp; x &lt;= 20
```

```
## [1] TRUE
```

``` r
y &lt;- 7

  y &gt; 10 &amp; y &lt;= 15
```

```
## [1] FALSE
```

---

### Operadores L√≥gicos

- OR - OU: **|**

Ser√° verdadeiro (`TRUE`) se uma das duas condi√ß√µes for verdadeira


``` r
x &lt;- 5

  x &gt;= 10 | x &lt;= 15
```

```
## [1] TRUE
```

``` r
y &lt;- 2

  y &gt;= 5 | y == 0
```

```
## [1] FALSE
```

---

### Operadores L√≥gicos

- NOT - NEGA√á√ÉO: **!**


``` r
!TRUE
```

```
## [1] FALSE
```

``` r
!FALSE
```

```
## [1] TRUE
```

``` r
x &lt;- c(TRUE, FALSE, TRUE, FALSE)

  !x
```

```
## [1] FALSE  TRUE FALSE  TRUE
```

``` r
y &lt;- 8

  (!y &lt; 5)
```

```
## [1] TRUE
```

---

### Pertence

√â poss√≠vel verificar se um valor est√° inserido dentro de um conjunto de valores (vetor).

√â representado pelo operador **%in%**.


``` r
3 %in% c(1, 2, 3, 4, 5)
```

```
## [1] TRUE
```

``` r
3 %in% c(4, 5, 6)
```

```
## [1] FALSE
```

``` r
"a" %in% c("a", "b")
```

```
## [1] TRUE
```

``` r
"a" %in% c("c", "d", "e")
```

```
## [1] FALSE
```

---

### Tipos B√°sicos de dados

S√£o os tipos de dados que podem ser representados na Linguagem R. √â neles que s√£o guardadas as informa√ß√µes.

- **Integer:** n√∫meros inteiros

- **Double/Numeric:** n√∫meros racionais

- **Logical:** tipos l√≥gicos (`TRUE` ou `FALSE`)

- **Character:** texto (sempre entre aspas)

- **Factor:** dados categ√≥ricos

&lt;br&gt;

A fun√ß√£o `class()` retorna o tipo de dado de um objeto.

---

### N√∫meros

Um n√∫mero inteiro seguido de `L` ser√° considerado do tipo **integer**:


``` r
class(5L)
```

```
## [1] "integer"
```

&lt;br&gt;

N√∫meros racionais ser√£o considerados do tipo **double/numeric**:


``` r
class(5)
```

```
## [1] "numeric"
```

``` r
class(5.1)
```

```
## [1] "numeric"
```

---

### L√≥gicos

Verdadeiro (`TRUE`) e Falso (`FALSE`) 


``` r
class(TRUE)
```

```
## [1] "logical"
```

``` r
class(FALSE)
```

```
## [1] "logical"
```

&lt;br&gt;

O R entende o `TRUE` sendo igual a 1 (um) e o `FALSE` sendo igual a 0 (zero).

Isso significa que √© poss√≠vel realizar opera√ß√µes matem√°ticas com ele (por exemplo, somar):


``` r
TRUE + FALSE + FALSE + TRUE + TRUE + TRUE + FALSE
```

```
## [1] 4
```

---

### Textos

**Qualquer** c√≥digo entre aspas (`""`) ser√° interpretado como texto **character**:


``` r
class("TEXTO")
```

```
## [1] "character"
```

``` r
ensino &lt;- c("M√©dio", "Superior", "Fundamental", "Fundamental", "M√©dio")

class(ensino)
```

```
## [1] "character"
```

``` r
class("3")
```

```
## [1] "character"
```

---

### Fatores

Os fatores (ou factors) s√£o usados para representar categorias.


``` r
# Criando um factor

ensino_categorias &lt;- factor(c("M√©dio", "Superior", "Fundamental", "Fundamental", "M√©dio"))

ensino_categorias
```

```
## [1] M√©dio       Superior    Fundamental Fundamental M√©dio      
## Levels: Fundamental M√©dio Superior
```

``` r
class(ensino_categorias)
```

```
## [1] "factor"
```

&lt;br&gt;

A fun√ß√£o `as.factor()` cria um objeto do tipo `factor` ou converte um objeto j√° existente.

Na linha `levels` aparecem os r√≥tupos do fator.

---

### NA

**NA** representa um valor desconhecido ou ausente. As opera√ß√µes envolvendo um valor desconhecido tamb√©m resultar√£o em valores desconhecidos (`NA`).


``` r
NA &gt; 10
```

```
## [1] NA
```

``` r
NA + 10
```

```
## [1] NA
```

``` r
NA / 5
```

```
## [1] NA
```

``` r
10 == NA
```

```
## [1] NA
```

---

### NA


``` r
NA == NA
```

```
## [1] NA
```

&lt;br&gt;
&lt;br&gt;

`is.na()` √© a fun√ß√£o que verifica se um objeto √© `NA`.


``` r
vetor_numerico &lt;- c(NA, 1, 2, 3, 4, 5, NA)

is.na(vetor_numerico)
```

```
## [1]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE
```

``` r
!is.na(vetor_numerico)
```

```
## [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
```

---

### na.rm = TRUE

Quando um vetor cont√©m valores ausentes (`NA`), muitas fun√ß√µes n√£o conseguem realizar os c√°lculos corretamente e retornam `NA` como resultado. Na maioria dos casos, o que se deseja √© calcular o resultado ignorando os valores ausentes. Para isso, utiliza-se o argumento `na.rm = TRUE`, que instrui a fun√ß√£o a remover os `NAs` antes de calcular.


``` r
sum(vetor_numerico)
```

```
## [1] NA
```

``` r
sum(vetor_numerico, na.rm = TRUE)
```

```
## [1] 15
```

``` r
mean(vetor_numerico)
```

```
## [1] NA
```

``` r
mean(vetor_numerico, na.rm = TRUE)
```

```
## [1] 3
```

---

### Convers√£o de classes


``` r
vetor_logical &lt;- c(TRUE, TRUE, FALSE, TRUE, FALSE)

as.integer(vetor_logical) # converte para n√∫mero inteiro
```

```
## [1] 1 1 0 1 0
```

``` r
as.numeric(vetor_logical) # converte para n√∫mero racional
```

```
## [1] 1 1 0 1 0
```

``` r
as.character(vetor_logical) # converte para texto
```

```
## [1] "TRUE"  "TRUE"  "FALSE" "TRUE"  "FALSE"
```

``` r
as.factor(vetor_logical) # converte para fator
```

```
## [1] TRUE  TRUE  FALSE TRUE  FALSE
## Levels: FALSE TRUE
```

---

### Convers√£o de classes


``` r
frutas &lt;- c("amora", "banana", "melancia")

as.integer(frutas)
```

```
## [1] NA NA NA
```

``` r
as.numeric(frutas)
```

```
## [1] NA NA NA
```

``` r
as.character(frutas)
```

```
## [1] "amora"    "banana"   "melancia"
```

``` r
as.factor(frutas)
```

```
## [1] amora    banana   melancia
## Levels: amora banana melancia
```

---

### Tipos de Objetos

No **R**, os quatro principais objetos s√£o:

- Vetor;

- Matriz;

- Lista;

- Data Frame.

---

### Vetores

Armazenam elementos de uma **mesma classe** em apenas **uma dimens√£o**.

Para cri√°-los, basta passar os valores, separados por v√≠rgulas, para a fun√ß√£o `c()`.

&lt;br&gt;


``` r
primeiro_semestre &lt;- c("Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho")

primeiro_semestre
```

```
## [1] "Janeiro"   "Fevereiro" "Mar√ßo"     "Abril"     "Maio"      "Junho"
```

``` r
# retorna o comprimento do vetor ‚Äî quantos elementos ele tem?

length(primeiro_semestre)
```

```
## [1] 6
```

---

### Vetores

Para criar um vetor com uma sequ√™ncia de n√∫meros, basta utilizar o operador **:**


``` r
# vetor de 1 a 10

1:10
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10
```

``` r
# vetor de 10 a 1

10:1
```

```
##  [1] 10  9  8  7  6  5  4  3  2  1
```

``` r
# betor de -5 a 5

-5:5
```

```
##  [1] -5 -4 -3 -2 -1  0  1  2  3  4  5
```

---

### Vetores

Por serem conjuntos indexados, cada valor dentro de um vetor tem uma posi√ß√£o. Essa posi√ß√£o √© dada pela ordem em que os elementos foram dispostos no momento em que o vetor √© criado. Dessa forma, √© poss√≠vel acessar individualmente cada valor de um vetor.

Para isso, basta colocar o √≠ndice do valor que se deseja acessar dentro de **colchetes** `[]`:


``` r
# primeiro elemento do vetor

primeiro_semestre[1]
```

```
## [1] "Janeiro"
```

``` r
# primeiro e segundo elemento do vetor

primeiro_semestre[1:2]
```

```
## [1] "Janeiro"   "Fevereiro"
```

---

### Vetores


``` r
# remove o primeiro elemento do vetor

primeiro_semestre[-1]
```

```
## [1] "Fevereiro" "Mar√ßo"     "Abril"     "Maio"      "Junho"
```

``` r
# seleciona o elemento seis at√© o quatro (e muda a ordem dos elementos)

primeiro_semestre[6:4]
```

```
## [1] "Junho" "Maio"  "Abril"
```

√â poss√≠vel colocar um conjunto de √≠ndices dentro dos colchetes para pegar os valores contidos nessas posi√ß√µes:


``` r
# seleciona o primeiro, o terceiro e o quinto elemento do vetor

primeiro_semestre[c(1, 3, 5)]
```

```
## [1] "Janeiro" "Mar√ßo"   "Maio"
```

Essas opera√ß√µes s√£o chamadas de **subsetting**, pois s√£o acessados os subconjuntos de valores de um vetor.

---

### Vetores

**Classe do Vetor:**

Um vetor s√≥ pode guardar um tipo de objeto e ele ter√° sempre a mesma classe dos objetos que guarda.

Para saber a classe de um vetor, basta usar a fun√ß√£o `class(nome_do_vetor)`.

&lt;br&gt;


``` r
primeiro_semestre &lt;- c("Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho")

class(primeiro_semestre)
```

```
## [1] "character"
```

``` r
anos_bissextos &lt;- c(2000, 2004, 2008, 2012, 2016, 2020, 2024)

class(anos_bissextos)
```

```
## [1] "numeric"
```

---

### Vetores

**Coer√ß√£o:**

Ao tentar misturar duas classes de elementos dentro de um vetor, o **R** vai apresentar o comportamento conhecido como **coer√ß√£o**.


``` r
segundo_semestre &lt;- c(7, 8, 9, 10, 11, "Dezembro")

segundo_semestre
```

```
## [1] "7"        "8"        "9"        "10"       "11"       "Dezembro"
```

``` r
class(segundo_semestre)
```

```
## [1] "character"
```

Todos os elementos do vetor se transformaram em **texto**. Como um vetor s√≥ pode ter uma classe de objeto dentro dele, classes mais fracas ser√£o sempre reprimidas pelas classes mais fortes.

.center[`character &gt; numeric &gt; integer &gt; logical`]

---

### Vetores

**Opera√ß√µes com Vetores:**

√â poss√≠vel realizar opera√ß√µes aritm√©ticas com vetores:


``` r
vetor_numerico &lt;- c(0, 5, 10, 15, 20)

vetor_numerico + 1
```

```
## [1]  1  6 11 16 21
```

Ao rodar `vetor_numerico + 1`, o **R** adiciona 1 de cada um dos elementos do vetor. O mesmo acontece com qualquer outra opera√ß√£o aritm√©tica.


``` r
vetor_numerico * 2 # multiplica todos os elementos do vetor por 2
```

```
## [1]  0 10 20 30 40
```

``` r
vetor_numerico - 1 # subtrai todos os elementos do vetor por 1
```

```
## [1] -1  4  9 14 19
```

---

### Vetores

**Vetoriza√ß√£o:**

Tamb√©m √© poss√≠vel fazer opera√ß√µes que envolvem mais de um vetor:


``` r
vetor1 &lt;- c(1, 2, 3)

vetor2 &lt;- c(10, 20, 30)

vetor1 + vetor2
```

```
## [1] 11 22 33
```

&lt;br&gt;

O **R** vai alinhar os dois vetores e somar os elementos que est√£o na mesma posi√ß√£o.

---

### Vetores

**Reciclagem:**

Ocorre quando os dois vetores n√£o possuem o mesmo tamanho:


``` r
vetor1 &lt;- c(1, 2)

vetor2 &lt;- c(10, 20, 30, 40)

vetor1 + vetor2
```

```
## [1] 11 22 31 42
```

&lt;br&gt;

O **R** alinhou os dois vetores e, como eles n√£o possuem o mesmo tamanho, os elementos do `vetor1` foram repetidos para ficar do mesmo tamanho do `vetor2`. √â como se o primeiro vetor fosse `c(1, 2, 1, 2)`.

---

### Vetores 

**Reciclagem:**

Um caso interessante ocorre quando o comprimento dos vetores n√£o s√£o m√∫ltiplos um do outro:


``` r
vetor1 &lt;- c(1, 2, 3)

vetor2 &lt;- c(10, 20, 30, 40, 50)

vetor1 + vetor2
```

```
## Warning in vetor1 + vetor2: longer object length is not a multiple of shorter
## object length
```

```
## [1] 11 22 33 41 52
```

O **R** realizou a opera√ß√£o, repetindo cada valor do primeiro vetor at√© que os dois tivessem o mesmo tamanho. Na realidade, a opera√ß√£o realizada foi `c(1, 2, 3, 1, 2) + c(10, 20, 30, 40, 50)`.

Como essa opera√ß√£o n√£o √© intuitiva, o **R** devolveu um aviso dizendo que o comprimento do primeiro vetor n√£o √© m√∫ltiplo do comprimento do segundo vetor.

---

### Vetores

**Filtro:**


``` r
numeros &lt;- c(-3, -1, 3, 5, 7, 10, 15)
numeros &gt; 3
```

```
## [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
```

Na primeira opera√ß√£o, o **R** fez uso da **Reciclagem**. Ele transformou o valor 3 em um vetor `c(3, 3, 3, 3, 3, 3, 3)` e testou (comparou) se `c(-3, -1, 3, 5, 7, 10, 15) &gt; c(3, 3, 3, 3, 3, 3, 3)`.


``` r
numeros[numeros &gt; 3]
```

```
## [1]  5  7 10 15
```

A segunda opera√ß√£o retornou as posi√ß√µes que receberam `TRUE` e n√£o retornou os valores que receberam `FALSE`. Portanto, a segunda opera√ß√£o √© equivalente a:


``` r
numeros[c(FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)]
```

```
## [1]  5  7 10 15
```

---

### Matrizes

S√£o estruturas que correspondem √†s matrizes matem√°ticas, conjuntos bidimensionais contendo elementos dispostos em linhas e colunas. Assim como os vetores, todos os seus elementos s√£o do mesmo tipo. S√£o criadas utilizando a fun√ß√£o `matrix()`:


``` r
matriz1 &lt;- matrix(c(1:12), nrow = 3, ncol = 4)

matriz1
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
```

``` r
class(matriz1)
```

```
## [1] "matrix" "array"
```

``` r
dim(matriz1)
```

```
## [1] 3 4
```

---

### Matrizes

√â poss√≠vel alterar a ordem de preenchimento da matriz (linhas ao inv√©s de colunas)


``` r
matriz2 &lt;- matrix(c(1:12), nrow = 3, ncol = 4, byrow = TRUE)

matriz2
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12
```

``` r
class(matriz2)
```

```
## [1] "matrix" "array"
```

``` r
dim(matriz2)
```

```
## [1] 3 4
```

---

### Matrizes

Tamb√©m √© poss√≠vel adicionar colunas com `cbind()` e linhas com `rbind()`


``` r
cbind(matriz1, rep(99, 3))
```

```
##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    4    7   10   99
## [2,]    2    5    8   11   99
## [3,]    3    6    9   12   99
```

``` r
rbind(matriz1, rep(99, 4))
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
## [4,]   99   99   99   99
```

---

### Matrizes

**Opera√ß√µes com Matrizes:**


``` r
# multiplica cada elemento da matriz por 2 (multiplica√ß√£o escalar)

matriz1 * 2 
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    2    8   14   20
## [2,]    4   10   16   22
## [3,]    6   12   18   24
```

``` r
# retorna o resto da divis√£o de cada elemento da matriz1 pelo correspondente em matriz2

matriz1 %% matriz2 
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    0    0    1    2
## [2,]    2    5    1    3
## [3,]    3    6    9    0
```

---

### Listas

S√£o um tipo especial de vetor que podem conter uma **cole√ß√£o de diferentes classes**. Possuem uma **estrutura unidimensional**, contando apenas o n√∫mero de elementos integrantes. S√£o criados usando a fun√ß√£o `list()`


``` r
lista &lt;- list(a = 1:10, b = c("T1", "T2", "T3", "T4"), TRUE, 2 + 2)

lista
```

```
## $a
##  [1]  1  2  3  4  5  6  7  8  9 10
## 
## $b
## [1] "T1" "T2" "T3" "T4"
## 
## [[3]]
## [1] TRUE
## 
## [[4]]
## [1] 4
```

- Os dois primeiros elementos t√™m nomes (`$a` e `$b`), enquanto os dois √∫ltimos s√£o acessados por √≠ndices (`[[3]]` e `[[4]]`) pois n√£o foram nomeados.

---

### Listas


``` r
class(lista)
```

```
## [1] "list"
```

- A estrutura √© realmente uma **lista**.


``` r
dim(lista)
```

```
## NULL
```

- O resultado **NULL** √© esperado pois as listas no R n√£o t√™m "dimens√µes" como vetores ou matrizes. Elas s√£o estruturas mais gerais.


``` r
length(lista)
```

```
## [1] 4
```

- A lista apresenta 4 elementos, mesmo que alguns deles contenham vetores maiores por dentro.

---

## Data Frame

S√£o tabelas **bidimensionais** (linhas e colunas), em que cada coluna pode ser de uma classe diferente. S√£o criados com a fun√ß√£o `data.frame()`:


|                  |  mpg| cyl|  disp|  hp| drat|    wt|  qsec| vs| am| gear| carb|
|:-----------------|----:|---:|-----:|---:|----:|-----:|-----:|--:|--:|----:|----:|
|Mazda RX4         | 21.0|   6| 160.0| 110| 3.90| 2.620| 16.46|  0|  1|    4|    4|
|Mazda RX4 Wag     | 21.0|   6| 160.0| 110| 3.90| 2.875| 17.02|  0|  1|    4|    4|
|Datsun 710        | 22.8|   4| 108.0|  93| 3.85| 2.320| 18.61|  1|  1|    4|    1|
|Hornet 4 Drive    | 21.4|   6| 258.0| 110| 3.08| 3.215| 19.44|  1|  0|    3|    1|
|Hornet Sportabout | 18.7|   8| 360.0| 175| 3.15| 3.440| 17.02|  0|  0|    3|    2|
|Valiant           | 18.1|   6| 225.0| 105| 2.76| 3.460| 20.22|  1|  0|    3|    1|
|Duster 360        | 14.3|   8| 360.0| 245| 3.21| 3.570| 15.84|  0|  0|    3|    4|
|Merc 240D         | 24.4|   4| 146.7|  62| 3.69| 3.190| 20.00|  1|  0|    4|    2|
|Merc 230          | 22.8|   4| 140.8|  95| 3.92| 3.150| 22.90|  1|  0|    4|    2|
|Merc 280          | 19.2|   6| 167.6| 123| 3.92| 3.440| 18.30|  1|  0|    4|    4|

---

### Data Frame


``` r
# retorna a classe
class(mtcars)
```

```
## [1] "data.frame"
```

``` r
# retorna o n√∫mero de colunas
ncol(mtcars)
```

```
## [1] 11
```

``` r
# retorna o n√∫mero de linhas
nrow(mtcars)
```

```
## [1] 32
```

``` r
# retorna a dimens√£o do dataframe ‚Äî o n√∫mero de linhas e de colunas
dim(mtcars)
```

```
## [1] 32 11
```

---

### Data Frame


``` r
# retorna a estrutura interna do objeto mtcars, como: tipo do objeto, 
# n√∫mero de observa√ß√µes (linhas) e vari√°veis (colunas), nome de cada vari√°vel, 
# tipo (classe) de cada vari√°vel e os primeiros valores de cada vari√°vel

str(mtcars)
```

```
## 'data.frame':	32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
```

---

### Data Frame


``` r
# retorna as seis primeiras linhas de uma tabela
head(mtcars)
```

```
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

``` r
# retorna as seis √∫ltimas linhas de uma tabela
tail(mtcars)
```

```
##                 mpg cyl  disp  hp drat    wt qsec vs am gear carb
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2
## Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.5  0  1    5    4
## Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.5  0  1    5    6
## Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.6  0  1    5    8
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.6  1  1    4    2
```

---

### Data Frame

**Selecionando as Colunas:**

Para selecionar as colunas de um dataframe, utilizamos o operador `$`:

.bg-lightest-blue.b-dark-blue.bw2.br3.ph4.mt2.-m[
üìå &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; **Dica:** ap√≥s escrever o `nome_do_dataframe$`, pressione a tecla `TAB` para ver as colunas dispon√≠veis.
]


``` r
mtcars$cyl
```

```
##  [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4
```

``` r
mtcars$gear
```

```
##  [1] 4 4 4 3 3 3 3 4 4 4 4 3 3 3 3 3 3 4 4 4 3 3 3 3 3 4 5 5 5 5 5 4
```

``` r
mtcars$mpg
```

```
##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
## [31] 15.0 21.4
```

---

### Data Frame

**Subsetting:**

Seleciona **elemento(s)** de um `data.frame` usando colchetes `[]`:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`data_frame[linha, coluna]`


``` r
# retorna o elemento presente na segunda linha da terceira coluna
mtcars[2, 3]
```

```
## [1] 160
```

``` r
# retorna todas as linhas da coluna 1
mtcars[, 1]
```

```
##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
## [31] 15.0 21.4
```

``` r
# retorna todas as colunas da linha 1
mtcars[1, ]
```

```
##           mpg cyl disp  hp drat   wt  qsec vs am gear carb
## Mazda RX4  21   6  160 110  3.9 2.62 16.46  0  1    4    4
```

---

### Data Frame

**Subsetting:** 

Sele√ß√£o de **m√∫ltiplas colunas** de um `data.frame`:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`data_frame[, c(coluna1, coluna2, ..., colunaN)]`

H√° duas formas de fazer isso:

.pull-left[

``` r
mtcars[, c(1, 2, 4)]
```

```
##                      mpg cyl  hp
## Mazda RX4           21.0   6 110
## Mazda RX4 Wag       21.0   6 110
## Datsun 710          22.8   4  93
## Hornet 4 Drive      21.4   6 110
## Hornet Sportabout   18.7   8 175
## Valiant             18.1   6 105
## Duster 360          14.3   8 245
## Merc 240D           24.4   4  62
## Merc 230            22.8   4  95
## Merc 280            19.2   6 123
## Merc 280C           17.8   6 123
## Merc 450SE          16.4   8 180
## Merc 450SL          17.3   8 180
## Merc 450SLC         15.2   8 180
## Cadillac Fleetwood  10.4   8 205
## Lincoln Continental 10.4   8 215
## Chrysler Imperial   14.7   8 230
## Fiat 128            32.4   4  66
## Honda Civic         30.4   4  52
## Toyota Corolla      33.9   4  65
## Toyota Corona       21.5   4  97
## Dodge Challenger    15.5   8 150
## AMC Javelin         15.2   8 150
## Camaro Z28          13.3   8 245
## Pontiac Firebird    19.2   8 175
## Fiat X1-9           27.3   4  66
## Porsche 914-2       26.0   4  91
## Lotus Europa        30.4   4 113
## Ford Pantera L      15.8   8 264
## Ferrari Dino        19.7   6 175
## Maserati Bora       15.0   8 335
## Volvo 142E          21.4   4 109
```
]

.pull-right[

``` r
mtcars[, c("mpg", "cyl", "hp")]
```

```
##                      mpg cyl  hp
## Mazda RX4           21.0   6 110
## Mazda RX4 Wag       21.0   6 110
## Datsun 710          22.8   4  93
## Hornet 4 Drive      21.4   6 110
## Hornet Sportabout   18.7   8 175
## Valiant             18.1   6 105
## Duster 360          14.3   8 245
## Merc 240D           24.4   4  62
## Merc 230            22.8   4  95
## Merc 280            19.2   6 123
## Merc 280C           17.8   6 123
## Merc 450SE          16.4   8 180
## Merc 450SL          17.3   8 180
## Merc 450SLC         15.2   8 180
## Cadillac Fleetwood  10.4   8 205
## Lincoln Continental 10.4   8 215
## Chrysler Imperial   14.7   8 230
## Fiat 128            32.4   4  66
## Honda Civic         30.4   4  52
## Toyota Corolla      33.9   4  65
## Toyota Corona       21.5   4  97
## Dodge Challenger    15.5   8 150
## AMC Javelin         15.2   8 150
## Camaro Z28          13.3   8 245
## Pontiac Firebird    19.2   8 175
## Fiat X1-9           27.3   4  66
## Porsche 914-2       26.0   4  91
## Lotus Europa        30.4   4 113
## Ford Pantera L      15.8   8 264
## Ferrari Dino        19.7   6 175
## Maserati Bora       15.0   8 335
## Volvo 142E          21.4   4 109
```
]

---

### Data Frame

**Filtrando colunas:**

.panelset[

.panel[.panel-name[Exemplo 1]

``` r
# seleciona apenas as linhas onde a coluna mpg √© exatamente igual a √© maior que 20

mtcars[mtcars$mpg &gt; 20, ]
```

```
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
```
]

.panel[.panel-name[Exemplo 2]

``` r
# seleciona apenas as linhas onde a coluna cyl '√© exatamente igual a 4

mtcars[mtcars$cyl == 4, ]
```

```
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
```
]

.panel[.panel-name[Exemplo 3]

``` r
# seleciona apenas as linhas onde a coluna hp √© menor que 100

mtcars[mtcars$hp &lt; 100, ]
```

```
##                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1 97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0 66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3 91 4.43 2.140 16.70  0  1    5    2
```
]

]

---

### Data Frame

√â poss√≠vel aplicar fun√ß√µes diretamente nas colunas de um `data.frame`:


``` r
# valor m√≠nimo da coluna mpg
min(mtcars$mpg)
```

```
## [1] 10.4
```

``` r
# valor m√°ximo da coluna mpg
max(mtcars$mpg)
```

```
## [1] 33.9
```

``` r
# valor m√©dio da coluna mpg
mean(mtcars$mpg)
```

```
## [1] 20.09062
```

``` r
# valor da mediana da coluna mpg
median(mtcars$mpg)
```

```
## [1] 19.2
```

---

### Fun√ß√µes

Enquanto os objetos s√£o nomes que armazenam valores, as **fun√ß√µes** s√£o nomes que armazenam um **conjunto de instru√ß√µes** em R. Sempre que uma fun√ß√£o √© executada, o c√≥digo que ela cont√©m roda automaticamente, e um resultado √© devolvido.

As fun√ß√µes permitem **automatizar tarefas** e **evitar repeti√ß√£o de c√≥digo**, de forma muito mais eficiente do que copiar e colar.

Na pr√°tica, as fun√ß√µes s√£o t√£o comuns e intuitivas que voc√™ provavelmente j√° usou v√°rias delas sem perceber. Aqui v√£o alguns exemplos que aparecem em se√ß√µes anteriores:

- `c()` ‚Äî cria vetores;

- `class()` ‚Äî mostra a classe de um objeto;

- `dim()` ‚Äî retorna as dimens√µes de um `data.frame` ou de uma `matriz`;

- `mean()` ‚Äî calcula a m√©dia de um vetor;

- `max()` ‚Äî retorna o valor m√°ximo de um vetor.

---

### Fun√ß√µes

**Estrutura de uma Fun√ß√£o:**

Uma fun√ß√£o √© composta por tr√™s partes principais:

- **Nome:** √© como ela ser√° identificada e chamada no ambiente R;

- **Argumentos:** s√£o os valores (par√¢metros) que a fun√ß√£o recebe para funcionar;

- **Corpo:** o conjunto de instru√ß√µes que ser√° executado.

&lt;br&gt;


``` r
# estrutura para criar uma fun√ß√£o
nome_da_funcao &lt;- function(argumentos) {
  corpo da fun√ß√£o
}

# para usar a fun√ß√£o
nome_da_funcao(argumentos = ...)
```

---

### Fun√ß√µes

**Argumentos:**

Diferente dos objetos, as fun√ß√µes podem **receber argumentos** ‚Äî valores colocados entre par√™nteses e que s√£o usados internamente pela fun√ß√£o para executar suas tarefas.

Por exemplo, a fun√ß√£o `c()` precisa saber **quais valores formar√£o o vetor** que ela ir√° criar:

&lt;br&gt;


``` r
c(1, 5, 10)
```

```
## [1]  1  5 10
```

&lt;br&gt;

Nesse caso, os valores `1`, `5` e `10` s√£o os **argumentos** passados para a fun√ß√£o `c()`.

.bg-lightest-blue.b-dark-blue.bw2.br3.ph4.mt2.-m[
üìå &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; **Dica:** os argumentos de uma fun√ß√£o s√£o sempre **separados por v√≠rgulas**.
]

---

### Fun√ß√µes

**Argumentos:**

Cada fun√ß√£o em R pode funcionar de forma diferente, mesmo quando realiza tarefas semelhantes. 

Por exemplo, a fun√ß√£o `sum()` soma os valores passados como argumentos:


``` r
sum(1, 3)
```

```
## [1] 4
```

Tamb√©m √© poss√≠vel passar um **vetor como argumento**, e o resultado ser√° o mesmo:


``` r
sum(c(1, 3))
```

```
## [1] 4
```

Ou seja, a fun√ß√£o `sum()` sabe lidar tanto com **valores separados** quanto com **vetores** como entrada.

---

### Fun√ß√µes

**Argumentos:**

Algumas fun√ß√µes exigem que os valores sejam passados de forma espec√≠fica.

A fun√ß√£o `mean()`, por exemplo, **espera um vetor como argumento** para calcular a m√©dia corretamente.

Veja a diferen√ßa:


``` r
# s√≥ considera o primeiro n√∫mero
mean(1, 3)
```

```
## [1] 1
```

``` r
# considera os dois valores dentro de um vetor
mean(c(1, 3))
```

```
## [1] 2
```

Ou seja, ao contr√°rio de `sum()`, que aceita m√∫ltiplos argumentos separados, a `mean()` precisa receber **um √∫nico vetor** como entrada.

---

### Fun√ß√µes

**Argumentos:** 

Os argumentos de uma fun√ß√£o tamb√©m t√™m **nomes**, que podem (ou n√£o) ser usados na hora de chamar a fun√ß√£o.

Por exemplo, a fun√ß√£o `seq()` possui (entre outros) os argumentos `from`, `to` e `by`:


``` r
seq(from = 4, to = 10, by = 2)
```

```
## [1]  4  6  8 10
```

Essa chamada cria uma **sequ√™ncia num√©rica** que come√ßa em `4` (`from`), vai at√© `10` (`to`), aumentando de `2` em `2` (`by`).

Tamb√©m √© poss√∫vel usar a fun√ß√£o **sem nomear os argumentos**, desde que os valores estejam na **ordem correta**:


``` r
seq(4, 10, 2)
```

```
## [1]  4  6  8 10
```

Ou seja, usar os nomes dos argumentos torna o c√≥digo **mais leg√≠vel** ‚Äî mas n√£o √© obrigat√≥rio, se a ordem for respeitada.

---

### Fun√ß√µes

**Argumentos:** 

Quando √© **especificado o nome dos argumentos**, a ordem deles **n√£o importa**:


``` r
seq(by = 2, to = 10, from = 4)
```

```
## [1]  4  6  8 10
```

Mas, se **n√£o usar os nomes dos argumentos**, a **ordem importa**, por o R vai associar os valores na sequ√™ncia padr√£o (`from`, `to`, `by`):


``` r
seq(2, 10, 4)
```

```
## [1]  2  6 10
```

Ou seja:

- ‚úÖ &amp;nbsp;&amp;nbsp; **com nomes:** a ordem pode ser trocada;



- ‚ùå &amp;nbsp;&amp;nbsp; **sem nomes:** a ordem correta deve ser seguida para obter o resultado esperado.

---

### Fun√ß√µes

**Algumas Fun√ß√µes importantes do R base:**

&lt;br&gt;

| **Fun√ß√£o**   |       **O que retorna?**      | **Fun√ß√£o**   | **O que retorna?** |
|:-------------|:-----------------------------:|:------------:|:------------------:|
|   `head()`   |       6 primeiras linhas      |    `sum()`   |        soma        |
|   `tail()`   |        6 √∫ltimas linhas       |   `mean()`   |        m√©dia       |
|    `dim()`   |   n√∫mero de linhas e colunas  |  `median()`  |       mediana      |
|   `names()`  | nomes das colunas (vari√°veis) |    `var()`   |      vari√¢ncia     |
|    `str()`   |    estrutura do data frame    |    `sd()`    |    desvio-padr√£o   |
|   `cbind()`  |      acopla duas tabelas      |    `max()`   |    valor m√°ximo    |
|   `rbind()`  |      empilha duas tabelas     |    `min()`   |    valor m√≠nimo    |
|   `class()`  |        classe do objeto       |   `round()`  |  valor arredondado |

---

### Pacotes

Pacotes s√£o **cole√ß√µes de fun√ß√µes, dados e documenta√ß√£o** que estendem as funcionalidades do R base.

Para us√°-los, √© preciso primeiro **instalar** e depois **carregar** o pacote.

Um dos pacotes mais populares e poderosos do R √© o `tidyverse`, que re√∫ne diversas ferramentas para ci√™ncias de dados.

&lt;img src="img/17-icon-packages.jpg" width="400px" style="display: block; margin: auto;" /&gt;

---

### Pacotes

**Instala√ß√£o dos Pacotes:**

&lt;br&gt;

- Via CRAN (*Comprehensive R Archive Network*):

`install.packages("nome_do_pacote")`


``` r
install.packages("tidyverse")
```

&lt;br&gt;&lt;br&gt;

- Via GitHub:

`devtools::install_github("nome-do-repositorio/nome_do_pacote")`


``` r
devtools::install_github("tidyverse/dplyr")
```

---

### Pacotes

`library(nome_do_pacote)`


``` r
library(tidyverse)
```

Tamb√©m h√° outra op√ß√£o: `nome_do_pacote::nome_da_funcao()`.


``` r
dplyr::glimpse()
```

&lt;br&gt;

----

&lt;br&gt;

**Dicas sobre os Pacotes:**

1. S√≥ √© necess√°rio **instalar** um pacote **uma vez**, mas √© necess√°rio **carreg√°-lo sempre que iniciar uma nova sess√£o**.

2. Para **instalar** um pactore, use aspas: &amp;nbsp;&amp;nbsp; `install.packages("nome_do_pacote")`.

3. Para **carregar** um pacote, n√£o use aspas: &amp;nbsp;&amp;nbsp; `library(nome_do_pacote)`.

---

## Para saber mais!

.panelset[

.panel[.panel-name[Em Portugu√™s]
.pull-left[
- [Material da Curso-R](https://livro.curso-r.com/)

&lt;a href="http://material.curso-r.com/"&gt;
&lt;img src="img/18-cursor.png" width="45%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;
]

.pull-right[
- [R para Ci√™ncia de Dados (2¬™ edi√ß√£o)](https://pt.r4ds.hadley.nz)

&lt;a href="https://pt.r4ds.hadley.nz"&gt;
&lt;img src="img/19-r4ds.jpg" width="55%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;
]
]

]

---

class: inverse center middle
name: projetos

# Projetos 

---

## Projetos

Um Projeto √© uma pasta no computador que re√∫ne todos os arquivos necess√°rios para realizar uma an√°lise de dados.

A principal raz√£o para a utiliza√ß√£o dos Projetos √© a **organiza√ß√£o**. Com eles, √© muito mais f√°cil importar bases de dados para dentro do `R`, criar an√°lises reprodut√≠veis e compartilhar o trabalho com outras pessoas.

&lt;br&gt;

&lt;div style="text-align: center;"&gt;
  &lt;strong style="font-size: 150%;"&gt;Habitue-se, desde cedo, a criar um projeto para cada nova an√°lise.&lt;/strong&gt;
&lt;/div&gt;

&lt;br&gt;

Para **criar um projeto**, clique em `New Project` no menu `File`. Na janela que se abrir, escolha `New Directory` para criar o projeto em uma nova pasta, ou `Existing Directory` para usar uma pasta que j√° existe.

Ao criar um projeto, o `RStudio` cria um arquivo `nome-do-projeto.Rproj` na pasta escolhida. Esse arquivo guarda as configura√ß√µes do projeto e pode ser usado para abrir o `RStudio` diretamente nele.

.footnote[Com o `Git` instalado, pode usar projetos para conectar com reposit√≥rios remotos e versionar o c√≥digo ([GitHub](https://github.com], por exemplo). Para isso, basta clicar em `Version Control`. Para maiores informa√ß√µes, acesse o [Zen do R](https://blog.curso-r.com/posts/2019-07-23-zen-do-r-4/) e o &lt;i&gt;workshop&lt;/i&gt; [Introdu√ß√£o a utiliza√ß√£o do Git e Github no RStudio](https://www.youtube.com/watch?v=uQL6NOSd9cc) da [Beatriz Milz](https://twitter.com/BeaMilz).]

---

### Projetos

**Criando um novo Projeto:**

&lt;img src="img/20-criar-projeto.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

### Projetos

**RStudio com um Projeto aberto:**

&lt;img src="img/21-exemplo-projeto-aberto.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Projetos

**Navegando entre os Projetos:**

&lt;img src="img/22-exemplo-lista-projetos.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Pacote: `tidyverse`

√â uma cole√ß√£o de pacotes de `R` desenvolvidos para a Ci√™ncia de Dados. 

Os pacotes do `tidyverse` compartilham uma mesma filosofia de desenvolvimento, sintaxe e estruturas de dados. 

Embora o `tidyverse` instale diversos outros pacotes, apenas esses s√£o carrregados: 

&lt;br&gt;


|     **Pacote**    |                      **Fun√ß√£o**                      |
|:-----------------:|:----------------------------------------------------:|
|      `tibble`     |               _data frames_ repaginados              |
|      `readr`      | leitura e importa√ß√£o de dados (e.g. `.csv` e `.txt`) |
| `tidyr` e `dplyr` |           arruma√ß√£o e manipula√ß√£o de dados           |
|     `stringr`     |                  trabalha com textos                 |
|     `forcats`     |                 trabalha com fatores                 |
|      `purrr`      |                 programa√ß√£o funcional                |
|     `ggplot2`     |           visualiza√ß√£o de dados (gr√°ficos)           |

---

class: inverse center middle
name: importacao

# Importa√ß√£o de dados

.center[(Acompanhe no arquivo `02-importacao.R`)]

---

### Caminhos

√â importante na tarefa de **importa√ß√£o de dados** saber onde est√° o arquivo que se quer importar. Toda fun√ß√£o de importa√ß√£o vai exigir um **caminho** (uma _string_) que representa o endere√ßo do arquivo no computador.

&lt;br&gt;

----

**Diret√≥rio de trabalho (_working directory_):**

√â a pasta em que o **R** vai procurar os arquivos na hora de ler as informa√ß√µes ou gravar os arquivos na hora de salvar os objetos.

Se est√° dentro de um Projeto, o diret√≥rio de trabalho ser√°, por padr√£o, a pasta raiz do Projeto (√© a pasta que cont√©m o arquivo `.Rproj`).

Se n√£o estiver usando um Projeto ou n√£o souber qual √© o diret√≥rio de trabalho, √© poss√≠vel descobri-lo usando a fun√ß√£o `getwd()`. Ela vai devolver uma _string_ com o caminho do diret√≥rio de trabalho.

A fun√ß√£o `setwd()` pode ser utilizada para mudar o diret√≥rio de trabalho. Como argumento, ela recebe o caminho para o novo diret√≥rio.

---

### Caminhos

**Caminhos absolutos:**

S√£o aqueles que t√™m in√≠cio na pasta raiz do computador/usu√°rio. Por exemplo: `/Users/luisagisele/Repositorio/workshop-r`.

**Caminhos absolutos** s√£o uma **m√° pr√°tica**. Se voc√™ trocar de computador ou passar o _script_ para outra pessoa, o c√≥digo n√£o vai funcionar. Isso ocorre porque o caminho absoluto de um arquivo, muito provavelmente, ser√° diferente entre os computadores.

&lt;br&gt;

----

**Caminhos relativos:**

S√£o aqueles que t√™m in√≠cio no diret√≥rio de trabalho da sess√£o. Usando o exemplo de caminho absoluto acima, o caminho relativo √©: `workshop-r`.

O uso de **caminhos relativos** dentro de um projeto √© considerado uma **boa pr√°tica**, pois quando a pasta do projeto for compartilhado com algu√©m, todos os caminhos existentes no c√≥digo continuar√£o funcionando em qualquer computador.

---

## Tibbles

S√£o uma evolu√ß√£o da classe `data.frame`.

As fun√ß√µes do **`tidyverse`** para importa√ß√£o, arruma√ß√£o e manipula√ß√£o de bases devolvem sempre `tibbles` em vez de `data.frames`.

Embora existam outras diferen√ßas entre as classes, a mais importante √© a forma como a tabela √© mostrada no _console_.

Quanto a isso, as diferen√ßas s√£o:

- `tibbles` mostram o n√∫mero de linhas, o n√∫mero de colunas e a classe das vari√°veis;

- `tibbles` mostram apenas as 10 primeiras linhas;

- `tibbles` mostram o n√∫mero de colunas que couber na tela do _console_.

- `tibbles` n√£o nomeiam linhas (`row.names`).

---

### Tibbles

**Exemplo: base `mtcars` como `data.frame`**


```
##                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4          21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag      21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710         22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive     21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout  18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant            18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360         14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D          24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230           22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280           19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C          17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE         16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL         17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC        15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood 10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
```

---

### Tibbles

**Exemplo: base `mtcars` como `tibble`**


``` r
tibble::as_tibble(mtcars)
```

```
## # A tibble: 32 √ó 11
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # ‚Ñπ 22 more rows
```

**Perceba que a coluna com os nomes dos modelos dos ve√≠culos desaparece na `tibble`.** Isso acontece porque, no `data.frame`, esses nomes fazem parte dos **nomes das linhas (`row.names`)**, e n√£o de uma coluna propriamente dita. J√° nas `tibbles`, os nomes das linhas **n√£o s√£o exibidos nem armazenados da mesma forma**, o que pode dar a impress√£o de que a "coluna" foi exclu√≠da.

---

### Tibbles

**Exemplo: base `mtcars` como `tibble`**

Uma maneira de **preservar os nomes dos modelos dos ve√≠culos** como coluna ao converter um `data.frame` em `tibble` √© utilizar o argumento `rownames = "nome_da_coluna"` dentro da fun√ß√£o `as_tibble()`. Assim, a nova `tibble` ter√° **12 colunas** ‚Äî uma a mais que a anterior, pois agora os nomes dos modelos passam a fazer da base como uma vari√°vel expl√≠cita.


``` r
tibble::as_tibble(mtcars, rownames = "cars")
```

```
## # A tibble: 32 √ó 12
##    cars          mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Mazda RX4    21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2 Mazda RX4 ‚Ä¶  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3 Datsun 710   22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4 Hornet 4 D‚Ä¶  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5 Hornet Spo‚Ä¶  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6 Valiant      18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7 Duster 360   14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8 Merc 240D    24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9 Merc 230     22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10 Merc 280     19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # ‚Ñπ 22 more rows
```

---

### [Cheat Sheets](https://posit.co/resources/cheatsheets/) 

[![Cheat Sheets](img/23-cheatsheet-readr.png)](https://rstudio.github.io/cheatsheets/data-import.pdf)

---

### Importa√ß√£o de arquivos

- Pacote [`readr`](https://readr.tidyverse.org): utilizados para ler arquivos de texto

  - `read_csv()`: l√™ arquivos `.csv` (valores separados por v√≠rgula)
  
  - `read_csv2()`: l√™ arquivos `.csv` (valores separados por ponto e v√≠rgula)
  
  - `read_delim()`: l√™ arquivos `.txt` (valores separados por tabula√ß√£o)
  
  - `read_rds()`: l√™ arquivos `.rds` (formato nativo do R)

- Pacote [`readxl`](https://readxl.tidyverse.org): utilizado para ler arquivos do Excel

  - `read_excel()`: l√™ arquivos `.xls` e `.xlsx`
  
- Pacote [`haven`](https://haven.tidyverse.org): utilizado para ler arquivos do SPSS, Stata e SAS

  - `read_sas()`: l√™ arquivos `.sas7bdat`
  
  - `read_spss()`: l√™ arquivos `.sav`
  
  - `read_dta()`: l√™ arquivos `.dta`
  
  - `read_stata()`: l√™ arquivos `.dta`
  
---

### Importa√ß√£o de arquivos

Para ler arquivos de texto (`.csv` ou `.txt`), s√£o utilizadas fun√ß√µes do pacote [`readr`](https://readr.tidyverse.org).

Como exemplo, vamos utilizar a base dos Pinguins, originalmente disponibilizado no pacote [`palmerpenguins`](https://allisonhorst.github.io/palmerpenguins/), que cont√©m dados sobre pinguins da Ant√°rtica. 

Essa base tamb√©m pode ser encontrado traduzido para o portugu√™s no pacote [`dados`](https://cienciadedatos.github.io/dados/).

Vamos importar essa base para o **R** lendo o arquivo `pinguins.csv` que est√° dentro da para `dados`. Para isso, utilizamos a fun√ß√£o `read_csv()` do pacote `readr`. 

Se o arquivo estiver bem formatado, a fun√ß√£o s√≥ precisar√° do caminho at√© o arquivo para funcionar.


``` r
library(readr) # carrega o pacote respons√°vel pela importa√ß√£o

pinguins_csv &lt;- read_csv("dados/pinguins.csv")
```

---

### Importa√ß√£o de arquivos

O objeto resultante ser√° um `tibble`:


``` r
pinguins_csv
```

```
## # A tibble: 344 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Importa√ß√£o de arquivos

Em alguns pa√≠ses, como o Brasil, as v√≠rgulas s√£o utilizadas para separar as casas decimais dos n√∫meros, inviabilizando os arquivos `.csv`.

Nesse caso, os arquivos s√£o separados por ponto-e-v√≠rgula (;). Para ler essas bases no **R**, basta usar a fun√ß√£o `read_csv2()` do pacote [`readr`](https://readr.tidyverse.org).


``` r
library(readr) # carrega o pacote respons√°vel pela importa√ß√£o

pinguins_csv2 &lt;- read_csv2("dados/pinguins2.csv")
```

&lt;br&gt;

----

Arquivos `.txt` podem ser lidos com a fun√ß√£o `read_delim()`. Nesse caso, al√©m do caminho at√© o arquivo, √© preciso indicar qual √© o caractere utilizado para separar as colunas da base.

Um arquivo separado por tabula√ß√£o, por exemplo, pode ser lido utilizando o argumento `delim = "\t"`. O c√≥digo `\t` √© uma forma textual de representar a tecla `TAB`.


``` r
library(readr) # carrega o pacote respons√°vel pela importa√ß√£o

pinguins_txt &lt;- read_delim("dados/pinguins.txt", delim = "\t")
```

---

### Importa√ß√£o de arquivos

**Arquivos direto da Internet:** 

√â poss√≠vel importar dados diretamente da internet. Para isso, basta colocar o _link_ do arquivo/tabela entre aspas no caminho do arquivo.


``` r
titanic &lt;- read_csv(
  "https://raw.githubusercontent.com/beatrizmilz/2020-R-Ladies-SP-Basico/master/docs/data/titanic.csv"
)
```

&lt;br&gt;

----

**Arquivos Excel:** 

Para ler planilhas do Excel (arquivos `.xlsx` ou `.xls`) utilizamos a fun√ß√£o `read_excel()` do pacote [`readxl`](https://readxl.tidyverse.org). 

Como esse pacote n√£o faz parte do `tidyverse`, √© necess√°rio instal√°-lo separadamente. 


``` r
library(readxl) # carrega o pacote

readxl::pinguins_xlsx &lt;- read_excel("dados/pinguins.xlsx")
```

---

### Importa√ß√£o de arquivos

**Arquivos Excel: argumentos √∫teis**

Planilhas do Excel s√£o facilmente edit√°veis ‚Äî e por isso, √© comum recebermos bases de dados **desconfiguradas**, ou seja, em um formato que o **R** n√£o consegue importar diretamente.

Para evitar ter que arrumar "na m√£o", correndo o risco de cometer erros ou alterar dados sem querer, a fun√ß√£o `read_excel()` oferece argumentos que ajudam a importar a base corretamente.

Principais argumentos:

- `sheet =`: indica qual aba da planilha deve ser importada.  _(Padr√£o: primeira aba)_

- `col_names =`: define se a primeira linha cont√©m os nomes das colunas.  _(Padr√£o: `TRUE`)_

- `col_types =`: especifica o tipo de dado de cada coluna (ex: `"text"`, `"numeric"` etc).  _(Padr√£o: `"guess"`)_

- `skip =`: pula um n√∫mero definido de linhas antes da leitura.  _(Padr√£o: `0`)_

- `n_max =`: define quantas linhas devem ser lidas.  _(Padr√£o: `Inf`)_

- `NA =`: indica quais valores devem ser interpretados como `NA`.  _(Padr√£o: `""`)_

---

### Exporta√ß√£o de arquivos

Exportar objetos do **R** significa gravar as bases (ou objetos) em um arquivo no disco r√≠gido (HD) do computador.

De forma geral, para cada fun√ß√£o `read_*()` usada na importa√ß√£o, existe uma fun√ß√£o correspondente `write_*()` para exporta√ß√£o.

Essas fun√ß√µes s√£o simples: voc√™ precisa informar **o objeto que deseja salvar** e o **caminho com o nome do arquivo** (incluindo a extens√£o!).


``` r
library(readr)  # fun√ß√µes write_csv, write_csv2, write_delim

# CSV com v√≠rgula
write_csv(pinguins, "dados/pinguins.csv")
# CSV com ponto-e-v√≠rgula (mais comum em PT-BR)
write_csv2(pinguins, "dados/pinguins2.csv")

# Arquivo TXT com tabula√ß√£o
write_delim(pinguins, "dados/pinguins.txt", delim = "\t")
```

Para salvar arquivos em formato **Excel** `.xlsx`, usamos a fun√ß√£o `write_xlsx()` do pacote [`writexl`](https://writexl.tidyverse.org), que precisa ser carregado separadamente.


``` r
library(writexl) # carrega o pacote

write_xlsx(pinguins, "dados/pinguins.xlsx")
```

---

### Importa√ß√£o e exporta√ß√£o de arquivos

**Extens√£o `.rds`**

A extens√£o `.rds` representa uma estrutura bin√°ria de arquivo nativa do R.  
Ela pode ser usada para salvar **qualquer objeto** ‚Äî n√£o apenas data frames ou tibbles ‚Äî no disco r√≠gido (HD).

Quando aplicada a conjuntos de dados, essa estrutura bin√°ria permite **compacta√ß√£o**, gerando arquivos significativamente menores em compara√ß√£o com formatos como `.csv`.

Para criar e ler arquivos `.rds`, utilizamos as fun√ß√µes `write_rds()` e `read_rds()`, ambas do pacote [`readr`](https://readr.tidyverse.org).


``` r
library(readr)  # pacote necess√°rio

# escrevendo SEM compacta√ß√£o
write_rds(pinguins, "dados/pinguins.rds")

# escrevendo COM compacta√ß√£o
write_rds(pinguins, "dados/pinguins.rds", compress = "gz")

# lendo a base diretamente
read_rds("dados/pinguins.rds")

# importando para um objeto
pinguins_rds &lt;- read_rds("dados/pinguins.rds")
```

---
  
### Visualiza√ß√£o de um objeto
  
**Para visualizar um objeto em aba separada:**

√â poss√≠vel visualizar os dados (ou parte deles) de forma mais confort√°vel clicando no nome do objeto no painel `Global Environment` (aba `Environment`) do RStudio.

Outra op√ß√£o √© usar a fun√ß√£o `View(nome_da_base)` diretamente:


``` r
View(pinguins_csv)
```

Isso abrir√° o conte√∫do do objeto em uma nova aba, com apar√™ncia de planilha.

&lt;img src="img/24-view-pinguins.png" width="100%" style="display: block; margin: auto;" /&gt;

---

### Visualiza√ß√£o de um objeto

**Para visualizar uma base no _Console_:**

√â poss√≠vel "espiar" os dados de uma forma r√°pida usando a fun√ß√£o `glimpse()` do pacote [`dplyr`](https://dplyr.tidyverse.org). 

Essa fun√ß√£o mostra: 

- o n√∫mero de observa√ß√µes (linhas) e vari√°veis (colunas), 
- os nomes e tipos das colunas, 
- e alguns valores iniciais de cada vari√°vel.


``` r
library(dplyr)  # carrega o pacote necess√°rio

glimpse(pinguins_csv)
```

```
## Rows: 344
## Columns: 8
## $ species           &lt;chr&gt; "Adelie", "Adelie", "Adelie", "Adelie", "Adelie", "A‚Ä¶
## $ island            &lt;chr&gt; "Torgersen", "Torgersen", "Torgersen", "Torgersen", ‚Ä¶
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, ‚Ä¶
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, ‚Ä¶
## $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186‚Ä¶
## $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, ‚Ä¶
## $ sex               &lt;chr&gt; "male", "female", "female", NA, "female", "male", "f‚Ä¶
## $ year              &lt;dbl&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007‚Ä¶
```

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

A &lt;span style='color:#34a15a'&gt;&lt;b&gt;Base dos Dados&lt;/b&gt;&lt;/span&gt; √© uma organiza√ß√£o n√£o governamental, sem fins lucrativos e &lt;span style='color:#34a15a'&gt;&lt;b&gt;open source&lt;/b&gt;&lt;/span&gt;, que atua para universalizar o acesso a &lt;span style='color:#34a15a'&gt;&lt;b&gt;dados p√∫blicos de qualidade&lt;/b&gt;&lt;/span&gt;.

Em seu reposit√≥rio, voc√™ encontra &lt;span style='color:#34a15a'&gt;&lt;b&gt;dados brasileiros j√° tratados, limpos e padronizados&lt;/b&gt;&lt;/span&gt;, prontos para serem importados diretamente para o **R** por meio do pacote [`basedosdados`](https://basedosdados.org/blog/como-acessar-dados-publicos-em-r).

Al√©m disso, os respons√°veis pela &lt;span style='color:#34a15a'&gt;&lt;b&gt;Base dos Dados&lt;/b&gt;&lt;/span&gt; mant√™m um reposit√≥rio com os c√≥digos das an√°lises que publicam em _workshops_, redes sociais, artigos e tutoriais.

[![GitHub da Base dos Dados](img/25-base-dos-dados-github.png)](https://github.com/basedosdados/analises)

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

√â poss√≠vel realizar o _download_ de arquivos `.csv` completos diretamente pelo site.

Entretanto, esse tipo de acesso &lt;span style='color:#34a15a'&gt;&lt;b&gt;n√£o est√° dispon√≠vel para arquivos muito grandes&lt;/b&gt;&lt;/span&gt;.

----

Para esses casos, utiliza-se o &lt;span style='color:#34a15a'&gt;&lt;font size='5'&gt;&lt;b&gt;BigQuery:&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;

Um servi√ßo de banco de dados em nuvem da Google, que permite realizar consultar em linguagem `SQL` diretamente do navegador, com:

- &lt;span style='color:#34a15a'&gt;&lt;b&gt;Rapidez:&lt;/b&gt;&lt;/span&gt; mesmo _queries_ complexas s√£o processadas em poucos minutos;

- &lt;span style='color:#34a15a'&gt;&lt;b&gt;Escalabilidade:&lt;/b&gt;&lt;/span&gt; o BigQuery se ajusta automaticamente, podendo lidar com volumes gigantescos (at√© &lt;span style='color:#34a15a'&gt;&lt;b&gt;exabytes&lt;/b&gt;&lt;/span&gt;, se necess√°rio);

- &lt;span style='color:#34a15a'&gt;&lt;b&gt;Economia:&lt;/b&gt;&lt;/span&gt; todo usu√°rio tem direito a &lt;span style='color:#34a15a'&gt;&lt;b&gt;1 TB gratuito por m√™s&lt;/b&gt;&lt;/span&gt; em consultas.

&lt;br&gt;

&lt;div style="text-align: center;"&gt;
  &lt;strong style="font-size: 130%; color: #34a15a;"&gt;
    O uso do BigQuery √© gratuito at√© 1 TB/m√™s. Acima disso, h√° cobran√ßa por volume de dados processados.
  &lt;/strong&gt;
&lt;/div&gt;

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Como criar um projeto no BigQuery:&lt;/b&gt;&lt;/span&gt;

Para criar um Projeto no _Google Cloud_, basta ter uma conta de e-mail do Google.

Mesmo que voc√™ pretenda carregar dados pr√≥prios, √© necess√°rio criar um Projeto (mesmo vazio) para poder executar _queries_ no _datalake_ p√∫blico da &lt;span style='color:#34a15a'&gt;Base dos Dados&lt;/span&gt;.

1. [Acesse o Google Cloud](https://console.cloud.google.com/projectselector2/home/dashboard). Se for sua primeira vez, aceite os Termos de Servi√ßo.

2. Clique em `Create Project` / `Criar Projeto` e escolha um nome bacana para o projeto.

3. Confirme em `Create` / `Criar`.

Para mais detalhes, consulte a [documenta√ß√£o oficial](https://cloud.google.com/bigquery/docs/sandbox/?hl=pt).

.footnote[
&lt;span style='color:#34a15a'&gt;&lt;b&gt;Por que √© preciso criar um projeto no Google Cloud?&lt;/b&gt;&lt;/span&gt;
A Google oferece &lt;span style='color:#34a15a'&gt;&lt;b&gt;1 TB gratuito por m√™s&lt;/b&gt;&lt;/span&gt; de uso do BigQuery &lt;span style='color:#34a15a'&gt;&lt;b&gt;para cada projeto&lt;/b&gt;&lt;/span&gt;. Voc√™ &lt;span style='color:#34a15a'&gt;&lt;b&gt;n√£o precisa cadastrar cart√£o de cr√©dito&lt;/b&gt;&lt;/span&gt; ‚Äî o BigQuery inicia automaticamente no modo _Sandbox_, que permite usar os recursos &lt;span style='color:#34a15a'&gt;&lt;b&gt;sem configurar forma de pagamento&lt;/b&gt;&lt;/span&gt;.
]

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Como criar um projeto no BigQuery&lt;/b&gt;&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Habilitar o projeto no R:&lt;/b&gt;&lt;/span&gt;

```r
install.packages("basedosdados")  # instala o pacote

library(basedosdados)  # carrega o pacote

# identifique o projeto sempre que iniciar uma nova sess√£o no R
set_billing_id("id-do-projeto")
```

Na primeira vez que acessar o _Google Cloud_ pelo **R**, uma p√°gina do Google ser√° aberta solicitando a autoriza√ß√£o para vincular sua conta ao pacote [`basedosdados`](https://basedosdados.org/blog/como-acessar-dados-publicos-em-r).

----

No canal da [Base dos Dados](https://www.youtube.com/@BasedosDados) no Youtube, h√° um _Workshop_ ensinando a acessar os dados p√∫blicos em **R**: [acesse aqui](https://www.youtube.com/watch?v=M9ayiseIjvI).

No blog da [Base dos Dados](https://dev.to/basedosdados), h√° um tutorial de como usar a biblioteca [`basedosdados`](https://basedosdados.org/blog/como-acessar-dados-publicos-em-r) no **R**: [acesse aqui](https://dev.to/basedosdados/como-usar-a-biblioteca-basedosdados-no-r-capitulo-1-46kb).


---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Como criar um projeto no BigQuery&lt;/b&gt;&lt;/span&gt;

&lt;img src="img/26-big-query-projeto-r.gif" width="85%" style="display: block; margin: auto;" /&gt;

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Como fixar o projeto da Base dos Dados (BD) no seu BigQuery:&lt;/b&gt;&lt;/span&gt;

&lt;img src="img/27-fixa-bd-no-bigquery.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS ‚Äî SQL&lt;/span&gt;

**SQL** (_Structured Query Language_, ou _Linguagem de Consulta Estruturada_) √© a linguagem padr√£o para **consultas em bancos de dados relacionais**.

Ela permite selecionar, filtrar, agrupar e combinar dados de forma declarativa ‚Äî ou seja, dizendo o que voc√™ quer, e n√£o como fazer.

----

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Principais cl√°usulas (palavras-chave):&lt;/b&gt;&lt;/span&gt;

  - **SELECT**: seleciona as colunas desejadas (√© o comando principal do SQL)  

  - **FROM**: especifica a tabela de onde os dados ser√£o extra√≠dos  

  - **WHERE**: define condi√ß√µes (filtros) para os dados selecionados  

  - **GROUP BY**: agrupa os dados com base em uma ou mais colunas  

  - **HAVING**: filtra os grupos criados pelo `GROUP BY`  

  - **ORDER BY**: ordena os dados com base em uma ou mais colunas  

  - **DISTINCT**: remove valores duplicados da sele√ß√£o  

  - **UNION**: combina os resultados de duas consultas SQL em uma s√≥ tabela

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS ‚Äî SQL&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Palavras-chave ‚Äì Operadores L√≥gicos:&lt;/b&gt;&lt;/span&gt;

- **AND**: retorna verdadeiro se **todas as condi√ß√µes** forem verdadeiras  

- **OR**: retorna verdadeiro se **pelo menos uma condi√ß√£o** for verdadeira  

- **NOT**: inverte o resultado l√≥gico da condi√ß√£o (retorna o oposto)

----

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Palavras-chave ‚Äì Fun√ß√µes de Agrega√ß√£o:&lt;/b&gt;&lt;/span&gt;

- **AVG**: calcula a m√©dia dos valores em um campo  

- **COUNT**: retorna o n√∫mero de registros selecionados  

- **SUM**: soma os valores de um campo  

- **MAX**: retorna o maior valor em um campo  

- **MIN**: retorna o menor valor em um campo  

- **STDDEV**: calcula o desvio padr√£o dos valores  

- **VARIANCE**: calcula a vari√¢ncia dos valores

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS ‚Äî SQL&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Palavras-chave ‚Äì Operadores relacionais:&lt;/b&gt;&lt;/span&gt;

- **&lt;** (_MENOR_): seleciona registros com valores **menores do que** a condi√ß√£o especificada  

- **&gt;** (_MAIOR_): seleciona registros com valores **maiores do que** a condi√ß√£o especificada  

- **&lt;=** (_MENOR OU IGUAL_): seleciona registros com valores **menores ou iguais a** determinada condi√ß√£o  

- **&gt;=** (_MAIOR OU IGUAL_): seleciona registros com valores **maiores ou iguais a** determinada condi√ß√£o  

- **=** (_IGUAL_): seleciona registros com valores **iguais a** determinada condi√ß√£o  

- **&lt;&gt;** (_DIFERENTE_): seleciona registros com valores **diferentes de** determinada condi√ß√£o

&lt;br&gt;

- **BETWEEN**: seleciona registros com valores **dentro de um intervalo fechado** (inclui os limites)  

- **LIKE**: seleciona registros que **correspondem a um padr√£o de texto**  

- **IN**: seleciona registros cujo valor **est√° presente em uma lista definida**

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS ‚Äî SQL&lt;/span&gt;

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ex. Fict√≠cio&lt;/div&gt;


``` sql
-- consulta sem filtro

SELECT coluna1, coluna2, coluna3,
       coluna4 AS apelido_da_coluna
FROM `tabela`
```

Imagine que a base seja muito grande e voc√™ n√£o ir√° utilizar todos os dados.

√â recomendado &lt;span style='color:#34a15a'&gt;&lt;b&gt;filtrar&lt;/b&gt;&lt;/span&gt; os dados ainda na consulta, antes de import√°-los para o **R**.


``` sql
-- consulta com filtro

SELECT coluna1, coluna2, coluna3,
       coluna4 AS apelido_da_coluna
FROM `tabela`
WHERE coluna1 = valor AND coluna2 = valor
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ex. Real (sem filtro)&lt;/div&gt;


``` sql
-- Consulta selecionando colunas espec√≠ficas

SELECT id_municipio, nome_regiao
FROM `basedosdados.br_bd_diretorios_brasil.municipio`
```

&lt;br&gt;

Para selecionar &lt;span style='color:#34a15a'&gt;&lt;b&gt;todas as colunas&lt;/b&gt;&lt;/span&gt; de uma tabela, use `*` ap√≥s o `SELECT`.


``` sql
-- Consulta selecionando todas as colunas

SELECT *
FROM `basedosdados.br_bd_diretorios_brasil.municipio`
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ex. Real (com filtro)&lt;/div&gt;


``` sql
-- M√©dia da taxa de aprova√ß√£o e IDEB por munic√≠pio e ensino

SELECT id_municipio, ano,
       AVG(taxa_aprovacao) AS tx_aprov,
       ensino,
       AVG(ideb) AS ideb
FROM `basedosdados.br_inep_ideb.municipio`
WHERE ano = 2021
GROUP BY id_municipio, ano, ensino
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ex. com JOIN&lt;/div&gt;


``` sql
-- Jun√ß√£o entre PIB e popula√ß√£o por munic√≠pio

SELECT pib.id_municipio, pib.ano,
       pop.id_municipio, pop.populacao
FROM `basedosdados.br_ibge_pib.municipio` AS pib
LEFT JOIN `basedosdados.br_ibge_populacao.municipio` AS pop
ON pib.id_municipio = pop.id_municipio
```

&lt;br&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Palavras-Chave:&lt;/b&gt;&lt;/span&gt;

- **AS:** define um "apelido" para a coluna e/ou para a tabela

- **LEFT JOIN:** une duas tabelas em uma mesma base de dados

- **ON:** define a "chave" que liga as duas tabelas

&lt;/div&gt;

&lt;/div&gt;

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS ‚Äî SQL&lt;/span&gt;

&lt;img src="img/28-ex-download-bigquery-r.gif" width="90%" style="display: block; margin: auto;" /&gt;

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS ‚Äî SQL&lt;/span&gt;

Para que o **R** consiga importar os dados da consulta `SQL`, √© necess√°rio utilizar a fun√ß√£o `read_sql()` do pacote [`basedosdados`](https://basedosdados.org/blog/como-acessar-dados-publicos-em-r) ao final da _query_.

Existem duas formas de fazer isso:

&lt;span style='color:#34a15a'&gt;&lt;b&gt;1. Criando um objeto intermedi√°rio com a consulta `SQL` e, depois, o objeto final com os dados:&lt;/b&gt;&lt;/span&gt;


``` r
library(basedosdados) # pacote necess√°rio

obj_intermediario &lt;- "SELECT id_municipio, nome_regiao
FROM `basedosdados.br_bd_diretorios_brasil.municipio`"

base_final &lt;- basedosdados::read_sql(obj_intermediario)
```


&lt;span style='color:#34a15a'&gt;&lt;b&gt;2. Utilizando o operador `pipe` (`%&gt;%` ou `|&gt;`) para encadear a consulta diretamente √† fun√ß√£o `read_sql()`:&lt;/b&gt;&lt;/span&gt;


``` r
library(basedosdados) # pacote necess√°rio

base_final &lt;- "SELECT id_municipio, nome_regiao
FROM `basedosdados.br_bd_diretorios_brasil.municipio`" |&gt; 
  read_sql()
```

---

class: inverse center middle
name: manipulacao

# Manipula√ß√£o de dados

.center[(Acompanhe no arquivo `04-manipulacao.R`)]

---

### Pipe: `%&gt;%` ou `|&gt;`

- `CTRL` + `SHIFT` + `M`: cria o `%&gt;%` &amp;nbsp; (ou `|&gt;`).

Pense no operador `pipe` como uma forma de **escrever uma receita de bolo**:


``` r
esfrie(
  asse(
    coloque(
      bata(
        acrescente(
          recipiente(rep("farinha", 2), "√°gua", 
                     "fermento", "leite", "√≥leo"), 
          "farinha", at√© = "macio"), 
        dura√ß√£o = "3min"), 
      lugar = "forma", tipo = "grande", 
      untada = TRUE), dura√ß√£o = "50min"), 
  "geladeira", "20min")
```

Aqui, precisamos ler **de dentro para fora**: o primeiro comando executado √© `recipiente()`, mas o primeiro que aparece √© `esfrie()` ‚Äî justamente o √∫ltimo a ser feito. Confuso, n√©?

Agora veja como a mesma receita √© escrita usando o operador `|&gt;`:


.footnote[Para MacOs, use `CMD` + `SHIFT` + `M` para inserir o pipe `|&gt;`.]

---

### Pipe: `%&gt;%` ou `|&gt;`

- `CTRL` + `SHIFT` + `M`: cria o `%&gt;%` &amp;nbsp; (ou `|&gt;`).

Veja como a **mesma receita** fica muito mais clara com o uso do `|&gt;`:


``` r
recipiente(rep("farinha", 2), "√°gua", "fermento", "leite", "√≥leo") %&gt;%
  acrescente("farinha", at√© = "macio") %&gt;%
  bata(dura√ß√£o = "3min") %&gt;%
  coloque(lugar = "forma", tipo = "grande", untada = TRUE) %&gt;%
  asse(dura√ß√£o = "50min") %&gt;%
  esfrie("geladeira", "20min")
```

Agora a leitura do c√≥digo segue **de cima para baixo**, como uma lista de etapas ‚Äî exatamente como uma receita de verdade!

&lt;div style="text-align: center;"&gt;
  &lt;strong style="font-size: 110%;"&gt;O operador &lt;code&gt;|&gt;&lt;/code&gt; passa o resultado da opera√ß√£o √† esquerda como primeiro argumento da fun√ß√£o √† direita. Isso torna o c√≥digo mais limpo, encadeado e f√°cil de entender.&lt;/strong&gt;
&lt;/div&gt;

.footnote[
O `%&gt;%` vem do pacote `{magrittr}` e funciona como o `|&gt;`, mas com algumas diferen√ßas. Ainda √© muito usado em pacotes como o `{dplyr}`. Quer saber mais? D√° uma olhada:  [magrittr: Ceci n‚Äôest pas un pipe](https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html)  [R 4.1: novidades e o pipe nativo `|&gt;`](https://www.jumpingrivers.com/blog/new-features-r410-pipe-anonymous-functions/)
]

---

Os exemplos apresentados aqui ser√£o das base abaixo:


``` r
library(tidyverse)

pinguins &lt;- read_csv("dados/pinguins.csv")
pinguins_raw &lt;- read_csv("dados/pinguins_raw.csv")
```

----


```
## # A tibble: 3 √ó 8
##   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
## 1 Adelie  Torgersen           39.1          18.7               181        3750
## 2 Adelie  Torgersen           39.5          17.4               186        3800
## 3 Adelie  Torgersen           40.3          18                 195        3250
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```


```
## # A tibble: 3 √ó 17
##   studyName `Sample Number` Species          Region Island Stage `Individual ID`
##   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
## 1 PAL0708                 1 Adelie Penguin ‚Ä¶ Anvers Torge‚Ä¶ Adul‚Ä¶ N1A1           
## 2 PAL0708                 2 Adelie Penguin ‚Ä¶ Anvers Torge‚Ä¶ Adul‚Ä¶ N1A2           
## 3 PAL0708                 3 Adelie Penguin ‚Ä¶ Anvers Torge‚Ä¶ Adul‚Ä¶ N2A1           
## # ‚Ñπ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
## #   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
## #   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
## #   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;
```

---

### Pacote &amp;nbsp; `dplyr`

O `{dplyr}` √© um dos **pacotes mais importantes** para a **manipula√ß√£o de dados** no R. Ele oferece fun√ß√µes simples e poderosas para transformar linhas e colunas de uma base de dados.

As principais fun√ß√µes s√£o:

- `filter()`: filtra linhas com base em uma condi√ß√£o

- `select()`: seleciona colunas espec√≠ficas

- `arrange()`: ordena as linhas com base em uma ou mais colunas

- `mutate()`: cria ou modifica colunas

- `group_by()`: agrupa os dados por uma ou mais vari√°veis

- `summarise()`: resumo os dados (ex: m√©dia, mediana, soma, etc.)

- `left_join()`: junta duas tabelas com base em uma chave comum

Essas fun√ß√µes seguem um padr√£o simples:

  - Sempre recebem uma `tibble` como primeiro argumento;
  - Sempre retornam uma `tibble` como resultado.
  
---

### [Cheat Sheets](https://posit.co/resources/cheatsheets/) 

[![Cheat Sheets](img/29-cheatsheet-dplyr.png)](https://rstudio.github.io/cheatsheets/data-transformation.pdf)

---

### Selecionando Colunas:  &amp;nbsp; `select()`

A fun√ß√£o `select()` √© usada para escolher colunas espec√≠ficas de uma base de dados.

- O **primeiro argumento** √© o nome da base (ex: `pinguins`)

- Os **demais argumentos** s√£o os nomes das colunas que voc√™ quer manter

_N√£o √© necess√°rio usar aspas para os nomes das colunas!_


``` r
select(pinguins, species)
```

```
## # A tibble: 344 √ó 1
##    species
##    &lt;chr&gt;  
##  1 Adelie 
##  2 Adelie 
##  3 Adelie 
##  4 Adelie 
##  5 Adelie 
##  6 Adelie 
##  7 Adelie 
##  8 Adelie 
##  9 Adelie 
## 10 Adelie 
## # ‚Ñπ 334 more rows
```

---

### Selecionando Colunas:  &amp;nbsp; `select()`

Voc√™ tamb√©m pode selecionar **v√°rias colunas ao mesmo tempo**, separando os nomes por v√≠rgulas:


``` r
select(pinguins, species, sex, body_mass_g)
```

```
## # A tibble: 344 √ó 3
##    species sex    body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;
##  1 Adelie  male          3750
##  2 Adelie  female        3800
##  3 Adelie  female        3250
##  4 Adelie  &lt;NA&gt;            NA
##  5 Adelie  female        3450
##  6 Adelie  male          3650
##  7 Adelie  female        3625
##  8 Adelie  male          4675
##  9 Adelie  &lt;NA&gt;          3475
## 10 Adelie  &lt;NA&gt;          4250
## # ‚Ñπ 334 more rows
```

Esse exemplo retorna apenas as colunas `species`, `sex` e `body_mass_g` da base `pinguins`.

---

### Selecionando Colunas:  &amp;nbsp; `select()`

O operador `:` √© √∫til para selecionar **colunas consecutivas** ‚Äî ou seja, de uma coluna at√© outra, seguindo a ordem da base:


``` r
select(pinguins, island:body_mass_g)
```

```
## # A tibble: 344 √ó 5
##    island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Torgersen           39.1          18.7               181        3750
##  2 Torgersen           39.5          17.4               186        3800
##  3 Torgersen           40.3          18                 195        3250
##  4 Torgersen           NA            NA                  NA          NA
##  5 Torgersen           36.7          19.3               193        3450
##  6 Torgersen           39.3          20.6               190        3650
##  7 Torgersen           38.9          17.8               181        3625
##  8 Torgersen           39.2          19.6               195        4675
##  9 Torgersen           34.1          18.1               193        3475
## 10 Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
```

Esse c√≥digo seleciona todas as colunas de `island` at√© `body_mass_g`, na ordem em que aparecem na base.

---

### Selecionando Colunas:  &amp;nbsp; `select()`

O `{dplyr}` oferece algumas **fun√ß√µes auxiliares** muito √∫teis para selecionar colunas com base em partes do nome:

- `starts_with("texto")`: seleciona colunas que **come√ßam** com o texto especificado

- `ends_with("texto")`: seleciona colunas que **terminam** com o texto especificado

- `contains("texto")`: seleciona colunas que **cont√™m** o texto especificado


``` r
select(pinguins, ends_with("mm"))
```

```
## # A tibble: 344 √ó 3
##    bill_length_mm bill_depth_mm flipper_length_mm
##             &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
##  1           39.1          18.7               181
##  2           39.5          17.4               186
##  3           40.3          18                 195
##  4           NA            NA                  NA
##  5           36.7          19.3               193
##  6           39.3          20.6               190
##  7           38.9          17.8               181
##  8           39.2          19.6               195
##  9           34.1          18.1               193
## 10           42            20.2               190
## # ‚Ñπ 334 more rows
```

---

### Selecionando Colunas:  &amp;nbsp; `select()`

Voc√™ pode **remover colunas** usando o sinal de menos (`‚Äî`) antes do nome da coluna:


``` r
select(pinguins, -year)
```

```
## # A tibble: 344 √ó 7
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
## # ‚Ñπ 1 more variable: sex &lt;chr&gt;
```

Esse c√≥digo retorna todas as colunas da base `pinguins`, exceto a coluna `year`.

---

### Selecionando Colunas:  &amp;nbsp; `select()`

Para remover **mais de uma coluna**, basta usar o sinal de menos (`‚Äî`) junto com a fun√ß√£o `c()`:


``` r
select(pinguins, -c(year, sex))
```

```
## # A tibble: 344 √ó 6
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
```

Esse c√≥digo retorna todas as colunas da base `pinguins`, exceto as colunas `year` e `sex`.

---

### Ordenando linhas: &amp;nbsp; `arrange()`

A fun√ß√£o `arrange()` serve para **ordenar as linhas** da base de dados.

- O **primeiro argumento** √© a base (ex: `pinguins`)

- Os **demais argumentos** s√£o as colunas usadas como crit√©rio de ordena√ß√£o.

Por padr√£o, a ordena√ß√£o √© feita em ordem **crescente**.


``` r
arrange(pinguins, body_mass_g)
```

```
## # A tibble: 344 √ó 8
##    species   island   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;     &lt;chr&gt;             &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Chinstrap Dream              46.9          16.6               192        2700
##  2 Adelie    Biscoe             36.5          16.6               181        2850
##  3 Adelie    Biscoe             36.4          17.1               184        2850
##  4 Adelie    Biscoe             34.5          18.1               187        2900
##  5 Adelie    Dream              33.1          16.1               178        2900
##  6 Adelie    Torgers‚Ä¶           38.6          17                 188        2900
##  7 Chinstrap Dream              43.2          16.6               187        2900
##  8 Adelie    Biscoe             37.9          18.6               193        2925
##  9 Adelie    Dream              37.5          18.9               179        2975
## 10 Adelie    Dream              37            16.9               185        3000
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Ordenando linhas: &amp;nbsp; `arrange()`

Para ordenar de forma **descrescente**, basta usar a fun√ß√£o `desc()` dentro do `arrange()`.

No exemplo abaixo, os pinguins s√£o organizados da **maior para a menor massa corporal**:


``` r
arrange(pinguins, desc(body_mass_g))
```

```
## # A tibble: 344 √ó 8
##    species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Gentoo  Biscoe           49.2          15.2               221        6300
##  2 Gentoo  Biscoe           59.6          17                 230        6050
##  3 Gentoo  Biscoe           51.1          16.3               220        6000
##  4 Gentoo  Biscoe           48.8          16.2               222        6000
##  5 Gentoo  Biscoe           45.2          16.4               223        5950
##  6 Gentoo  Biscoe           49.8          15.9               229        5950
##  7 Gentoo  Biscoe           48.4          14.6               213        5850
##  8 Gentoo  Biscoe           49.3          15.7               217        5850
##  9 Gentoo  Biscoe           55.1          16                 230        5850
## 10 Gentoo  Biscoe           49.5          16.2               229        5800
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Ordenando linhas: &amp;nbsp; `arrange()`

Voc√™ tamb√©m pode ordenar por **duas ou mais colunas** ao mesmo tempo.

No exemplo abaixo, as linhas s√£o ordenadas:

- **Primeiro** pelo **comprimento do bico** (`bill_length_mm`), em **ordem descrescente**

- **Depois**, em caso de empate, pela **profundidade do bico** (`bill_depth_mm`), em **ordem crescente**.


``` r
arrange(pinguins, desc(bill_length_mm), bill_depth_mm)
```

```
## # A tibble: 344 √ó 8
##    species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Gentoo    Biscoe           59.6          17                 230        6050
##  2 Chinstrap Dream            58            17.8               181        3700
##  3 Gentoo    Biscoe           55.9          17                 228        5600
##  4 Chinstrap Dream            55.8          19.8               207        4000
##  5 Gentoo    Biscoe           55.1          16                 230        5850
##  6 Gentoo    Biscoe           54.3          15.7               231        5650
##  7 Chinstrap Dream            54.2          20.8               201        4300
##  8 Chinstrap Dream            53.5          19.9               205        4500
##  9 Gentoo    Biscoe           53.4          15.8               219        5500
## 10 Chinstrap Dream            52.8          20                 205        4550
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Aplicando mais de uma fun√ß√£o

Em muitos casos, queremos aplicar **v√°rias transforma√ß√µes** em sequ√™ncia em uma base de dados.

Por exemplo, imagine que voc√™ quer uma tabela com a **esp√©cie** dos pinguins e a **massa corporal**, ordenada em ordem crescente:


``` r
arrange(select(pinguins, species, body_mass_g), body_mass_g)
```

Esse c√≥digo funciona, mas fica um pouco dif√≠cil de ler ‚Äî precisamos interpretar **de dentro para fora**.

A solu√ß√£o para tornar esse tipo de opera√ß√£o mais clara √© usar o operador **pipe** (`|&gt;`):


``` r
pinguins |&gt; 
  select(species, body_mass_g) |&gt;
  arrange(body_mass_g)
```

O que est√° acontecendo aqui?

- Na **segunda linha**, aplicamos a fun√ß√£o `select()` na base `pinguins`

- Na **terceira linha**, aplicamos a fun√ß√£o `arrange()` na sa√≠da da fun√ß√£o `select()`.

O c√≥digo fica mais **intuitivo**, com as opera√ß√µes organizadas em sequ√™ncia l√≥gica.

---

### Filtrando linhas: &amp;nbsp; `filter()`

A fun√ß√£o `filter()` √© usada para **selecionar linhas** que atendem a uma determinada condi√ß√£o.

No exemplo abaixo, s√£o filtradas apenas as observa√ß√µes em que o **comprimento da nadadeira** (`flipper_length_mm`) √© **maior que 140 mm**:


``` r
filter(pinguins, flipper_length_mm &gt; 140)
```

```
## # A tibble: 342 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           36.7          19.3               193        3450
##  5 Adelie  Torgersen           39.3          20.6               190        3650
##  6 Adelie  Torgersen           38.9          17.8               181        3625
##  7 Adelie  Torgersen           39.2          19.6               195        4675
##  8 Adelie  Torgersen           34.1          18.1               193        3475
##  9 Adelie  Torgersen           42            20.2               190        4250
## 10 Adelie  Torgersen           37.8          17.1               186        3300
## # ‚Ñπ 332 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Filtrando linhas: &amp;nbsp; `filter()`

Voc√™ pode combinar `select()` e `filter()` para trabalhar apenas com as **colunas e linhas de interesse**.

No exemplo abaixo:

- Primeiro, selecionamos as colunas `species` e `flipper_length_mm`

- Depois, filtramos apenas os pinguins com **nadadeiras maiores que 140 mm**.


``` r
pinguins |&gt; 
  select(species, flipper_length_mm) |&gt;
  filter(flipper_length_mm &gt; 140)
```

```
## # A tibble: 342 √ó 2
##    species flipper_length_mm
##    &lt;chr&gt;               &lt;dbl&gt;
##  1 Adelie                181
##  2 Adelie                186
##  3 Adelie                195
##  4 Adelie                193
##  5 Adelie                190
##  6 Adelie                181
##  7 Adelie                195
##  8 Adelie                193
##  9 Adelie                190
## 10 Adelie                186
## # ‚Ñπ 332 more rows
```

---

### Filtrando linhas: &amp;nbsp; `filter()`

Voc√™ pode aplicar **dois ou mais filtros** ao mesmo tempo, separando as condi√ß√µes por v√≠rgula dentro do `filter()`.

No exemplo abaixo, o c√≥digo retorna apenas os pinguins que:

- Est√£o na ilha de **Torgersen**

- T√™m **profundidade de bico maior que 15 mm**.


``` r
pinguins |&gt; 
  filter(island == "Torgersen", bill_depth_mm &gt; 15)
```

```
## # A tibble: 51 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           36.7          19.3               193        3450
##  5 Adelie  Torgersen           39.3          20.6               190        3650
##  6 Adelie  Torgersen           38.9          17.8               181        3625
##  7 Adelie  Torgersen           39.2          19.6               195        4675
##  8 Adelie  Torgersen           34.1          18.1               193        3475
##  9 Adelie  Torgersen           42            20.2               190        4250
## 10 Adelie  Torgersen           37.8          17.1               186        3300
## # ‚Ñπ 41 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Filtrando linhas: &amp;nbsp; `filter()`

Voc√™ tamb√©m pode fazer **opera√ß√µes diretamente dentro do `filter()`**, comparando os valores das colunas com c√°lculos feitos na hora.

No exemplo abaixo, o c√≥digo retorna apenas os pinguins cuja **massa corporal** √© **maior que a m√©dia da base**:


``` r
pinguins |&gt; 
  filter(body_mass_g &gt; mean(body_mass_g, na.rm = TRUE))
```

```
## # A tibble: 149 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.2          19.6               195        4675
##  2 Adelie  Torgersen           42            20.2               190        4250
##  3 Adelie  Torgersen           34.6          21.1               198        4400
##  4 Adelie  Torgersen           42.5          20.7               197        4500
##  5 Adelie  Dream               39.8          19.1               184        4650
##  6 Adelie  Dream               44.1          19.7               196        4400
##  7 Adelie  Dream               39.6          18.8               190        4600
##  8 Adelie  Biscoe              40.1          18.9               188        4300
##  9 Adelie  Biscoe              41.3          21.1               195        4400
## 10 Adelie  Torgersen           41.8          19.4               198        4450
## # ‚Ñπ 139 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

O argumento `na.rm = TRUE` serve para ignorar valores ausentes (`NA`) no c√°lculo da m√©dia.

---

### Criando novas colunas: &amp;nbsp; `mutate()`

A fun√ß√£o `mutate()` √© usada para:

- **Criar uma nova coluna**

- Ou **modificar uma coluna existente**

No exemplo abaixo, os valores da coluna `bill_length_mm` s√£o divididos por 10, convertendo a unidade de **mil√≠metros (mm)** para **cent√≠metros (cm)**:


``` r
pinguins |&gt; 
  mutate(bill_length_mm = bill_length_mm / 10)
```

```
## # A tibble: 344 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           3.91          18.7               181        3750
##  2 Adelie  Torgersen           3.95          17.4               186        3800
##  3 Adelie  Torgersen           4.03          18                 195        3250
##  4 Adelie  Torgersen          NA             NA                  NA          NA
##  5 Adelie  Torgersen           3.67          19.3               193        3450
##  6 Adelie  Torgersen           3.93          20.6               190        3650
##  7 Adelie  Torgersen           3.89          17.8               181        3625
##  8 Adelie  Torgersen           3.92          19.6               195        4675
##  9 Adelie  Torgersen           3.41          18.1               193        3475
## 10 Adelie  Torgersen           4.2           20.2               190        4250
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Criando novas colunas: &amp;nbsp; `mutate()`

Voc√™ tamb√©m pode usar `mutate()` para **criar uma nova coluna**, mantendo a vari√°vel original intacta.

No exemplo abaixo, √© criada a coluna `bill_length_cm`, que converte o comprimento do bico de **mil√≠metros para cent√≠metros**:


``` r
pinguins |&gt; 
  mutate(bill_length_cm = bill_length_mm / 10)
```

```
## # A tibble: 344 √ó 9
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
## # ‚Ñπ 3 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;, bill_length_cm &lt;dbl&gt;
```

A nova coluna ser√° adicionada **no final da tabela**.

---

### Criando novas colunas: &amp;nbsp; `mutate()`

Com `mutate()`, voc√™ tamb√©m pode realizar **qualquer opera√ß√£o** com uma ou mais colunas.

A √∫nica regra √© que o resultado de cada opera√ß√£o:

- tenha **o mesmo n√∫mero de linhas** da base original

- ou **um √∫nico valor** (que ser√° repetido em todas as linhas)

Tamb√©m √© poss√≠vel **criar ou modificar v√°rias colunas ao mesmo tempo** dentro de um mesmo `mutate()`.


``` r
pinguins |&gt; 
  mutate(mean_bill_length_mm = mean(bill_length_mm, na.rm = TRUE),
         country = "Antarctica") |&gt; 
  select(species, island, bill_length_mm, mean_bill_length_mm, country)
```

```
## # A tibble: 344 √ó 5
##    species island    bill_length_mm mean_bill_length_mm country   
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;               &lt;dbl&gt; &lt;chr&gt;     
##  1 Adelie  Torgersen           39.1                43.9 Antarctica
##  2 Adelie  Torgersen           39.5                43.9 Antarctica
##  3 Adelie  Torgersen           40.3                43.9 Antarctica
##  4 Adelie  Torgersen           NA                  43.9 Antarctica
##  5 Adelie  Torgersen           36.7                43.9 Antarctica
##  6 Adelie  Torgersen           39.3                43.9 Antarctica
##  7 Adelie  Torgersen           38.9                43.9 Antarctica
##  8 Adelie  Torgersen           39.2                43.9 Antarctica
##  9 Adelie  Torgersen           34.1                43.9 Antarctica
## 10 Adelie  Torgersen           42                  43.9 Antarctica
## # ‚Ñπ 334 more rows
```

---

### Sumarizando colunas: &amp;nbsp; `summarise()`

A **sumariza√ß√£o** √© uma forma de **resumir um conjunto de dados** usando alguma medida de interesse.

Exemplos comuns incluem: m√©dia, mediana, vari√¢ncia, contagem, propor√ß√£o etc.

Essas m√©tricas ajudam a entender melhor o comportamento de uma vari√°vel.

O exemplo abaixo calcula a **m√©dia da massa corporal** dos pinguins:



``` r
pinguins |&gt; 
  summarise(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE))
```

```
## # A tibble: 1 √ó 1
##   mean_body_mass_g
##              &lt;dbl&gt;
## 1            4202.
```

.footnote[Tamb√©m pode ser usado a fun√ß√£o `summarize()` ‚Äî ambas as formas funcionam.]

---

### Sumarizando colunas: &amp;nbsp; `summarise()`

Voc√™ pode calcular **v√°rias estat√≠sticas ao mesmo tempo** dentro de um √∫nico `summarise()`.

Cada m√©trica calculada se transforma em uma **coluna da nova base**:


``` r
pinguins |&gt; 
  summarise(
    mean_flipper_length_mm = mean(flipper_length_mm, na.rm = TRUE),
    median_flipper_length_mm = median(flipper_length_mm, na.rm = TRUE),
    dp_flipper_length_mm = sd(flipper_length_mm, na.rm = TRUE)
  )
```

```
## # A tibble: 1 √ó 3
##   mean_flipper_length_mm median_flipper_length_mm dp_flipper_length_mm
##                    &lt;dbl&gt;                    &lt;dbl&gt;                &lt;dbl&gt;
## 1                   201.                      197                 14.1
```

.footnote[Tamb√©m pode ser usado a fun√ß√£o `summarize()` ‚Äî ambas as formas funcionam.]

---

### Sumarizando colunas: &amp;nbsp; `summarise()`

Voc√™ tamb√©m pode calcular **resumos de colunas diferentes** dentro de um mesmo `summarise()`.


``` r
pinguins |&gt;  
  summarise(
    mean_flipper_length_mm = mean(flipper_length_mm, na.rm = TRUE),
    mean_bill_length_mm = mean(bill_length_mm, na.rm = TRUE),
    median_bill_depth_mm = median(bill_depth_mm, na.rm = TRUE)
  )
```

```
## # A tibble: 1 √ó 3
##   mean_flipper_length_mm mean_bill_length_mm median_bill_depth_mm
##                    &lt;dbl&gt;               &lt;dbl&gt;                &lt;dbl&gt;
## 1                   201.                43.9                 17.3
```

Neste exemplo, calculamos a **m√©dia ou mediana** de diferentes vari√°veis num√©ricas da base.

.footnote[Tamb√©m pode ser usado a fun√ß√£o `summarize()` ‚Äî ambas as formas funcionam.]

---

### Sumarizando colunas agrupadas: &amp;nbsp; `group_by()`

A fun√ß√£o `group_by()` **n√£o altera os dados da base**, mas indica que as opera√ß√µes seguintes devem ser feitas **por grupo**.

No exemplo abaixo, a base `pinguins` √© agrupada pela coluna `island`:


``` r
pinguins |&gt; 
  group_by(island)
```

```
## # A tibble: 344 √ó 8
## # Groups:   island [3]
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

&lt;!-- .footnote[Essa marca√ß√£o s√≥ tem efeito real quando combinada com fun√ß√µes como `summarise()`.] --&gt;

---

### Sumarizando colunas agrupadas: &amp;nbsp; `group_by()`

Voc√™ tamb√©m pode agrupar por **mais de uma vari√°vel ao mesmo tempo**.


``` r
pinguins |&gt; 
  group_by(island, species)
```

```
## # A tibble: 344 √ó 8
## # Groups:   island, species [5]
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 334 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste caso, os dados s√£o agrupados **por combina√ß√£o de `island` e `species`** ‚Äî ou seja, cada grupo representa uma esp√©cie dentro de uma determinada ilha.

&lt;!-- .footnote[Essa marca√ß√£o s√≥ tem efeito real quando combinada com fun√ß√µes como `summarise()`.] --&gt;

---

### Sumarizando colunas agrupadas

Em muitos casos, queremos **resumir uma vari√°vel num√©rica** para **cada categoria** de uma outra coluna.

Para isso, usamos `summarise()` em conjunto com `group_by()`.

No exemplo abaixo, o c√≥digo calcula a **m√©dia da massa corporal** (`body_mass_g`) para cada ilha (`island`):


``` r
pinguins |&gt; 
  group_by(island) |&gt; 
  summarise(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE)) |&gt; 
  arrange(desc(mean_body_mass_g))
```

```
## # A tibble: 3 √ó 2
##   island    mean_body_mass_g
##   &lt;chr&gt;                &lt;dbl&gt;
## 1 Biscoe               4716.
## 2 Dream                3713.
## 3 Torgersen            3706.
```

Ou seja, **agrupamos os dados por ilha**, **calculamos a m√©dia da massa corporal em cada grupo** e, por fim, **ordenamos do maior para o menor valor**.

.footnote[Tamb√©m pode ser usado a fun√ß√£o `summarize()` ‚Äî ambas as formas funcionam.]

---

### Ordenando colunas:  &amp;nbsp;  `relocate()`

A fun√ß√£o `relocate()` permite **mudar a ordem das colunas** de uma base, colocando-as em outra posi√ß√£o ‚Äî seja com base no nome ou na posi√ß√£o de outra coluna.

Voc√™ pode usar o argumento `.after` para **colocar uma ou mais colunas logo ap√≥s** uma coluna de refer√™ncia:


``` r
pinguins |&gt; 
  relocate(sex, year, .after = island)
```

```
## # A tibble: 344 √ó 8
##    species island    sex     year bill_length_mm bill_depth_mm flipper_length_mm
##    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
##  1 Adelie  Torgersen male    2007           39.1          18.7               181
##  2 Adelie  Torgersen female  2007           39.5          17.4               186
##  3 Adelie  Torgersen female  2007           40.3          18                 195
##  4 Adelie  Torgersen &lt;NA&gt;    2007           NA            NA                  NA
##  5 Adelie  Torgersen female  2007           36.7          19.3               193
##  6 Adelie  Torgersen male    2007           39.3          20.6               190
##  7 Adelie  Torgersen female  2007           38.9          17.8               181
##  8 Adelie  Torgersen male    2007           39.2          19.6               195
##  9 Adelie  Torgersen &lt;NA&gt;    2007           34.1          18.1               193
## 10 Adelie  Torgersen &lt;NA&gt;    2007           42            20.2               190
## # ‚Ñπ 334 more rows
## # ‚Ñπ 1 more variable: body_mass_g &lt;dbl&gt;
```

No exemplo abaixo, as colunas `sex` e `year` foram movidas para **aparecer logo ap√≥s** a coluna `island`.

---

### Ordenando colunas:  &amp;nbsp;  `relocate()`

Da mesma forma, √© poss√≠vel usar o argumento `.before` para **mover colunas para antes** de outra coluna espec√≠fica:


``` r
pinguins |&gt; 
  relocate(sex, year, .before = island)
```

```
## # A tibble: 344 √ó 8
##    species sex     year island    bill_length_mm bill_depth_mm flipper_length_mm
##    &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
##  1 Adelie  male    2007 Torgersen           39.1          18.7               181
##  2 Adelie  female  2007 Torgersen           39.5          17.4               186
##  3 Adelie  female  2007 Torgersen           40.3          18                 195
##  4 Adelie  &lt;NA&gt;    2007 Torgersen           NA            NA                  NA
##  5 Adelie  female  2007 Torgersen           36.7          19.3               193
##  6 Adelie  male    2007 Torgersen           39.3          20.6               190
##  7 Adelie  female  2007 Torgersen           38.9          17.8               181
##  8 Adelie  male    2007 Torgersen           39.2          19.6               195
##  9 Adelie  &lt;NA&gt;    2007 Torgersen           34.1          18.1               193
## 10 Adelie  &lt;NA&gt;    2007 Torgersen           42            20.2               190
## # ‚Ñπ 334 more rows
## # ‚Ñπ 1 more variable: body_mass_g &lt;dbl&gt;
```

Nesse exemplo, as colunas `species` e `island` foram movidas para **aparecer logo antes** da coluna `island`.

---

### Renomeando colunas: &amp;nbsp; `rename()`

A fun√ß√£o `rename()` serve para **alterar os nomes das colunas** de uma base de dados.

- O **primeiro argumento** √© o **novo nome** desejado

- O **segundo argumento** √© o **nome atual** da coluna


``` r
pinguins |&gt;  
  rename(
    comprimento_bico_mm = bill_length_mm,
    profundidade_bico_mm = bill_depth_mm,
    comprimento_nadadeira_mm = flipper_length_mm,
    massa_corporal_g = body_mass_g
  )
```

```
## # A tibble: 344 √ó 8
##    species island    comprimento_bico_mm profundidade_bico_mm
##    &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt;                &lt;dbl&gt;
##  1 Adelie  Torgersen                39.1                 18.7
##  2 Adelie  Torgersen                39.5                 17.4
##  3 Adelie  Torgersen                40.3                 18  
##  4 Adelie  Torgersen                NA                   NA  
##  5 Adelie  Torgersen                36.7                 19.3
##  6 Adelie  Torgersen                39.3                 20.6
##  7 Adelie  Torgersen                38.9                 17.8
##  8 Adelie  Torgersen                39.2                 19.6
##  9 Adelie  Torgersen                34.1                 18.1
## 10 Adelie  Torgersen                42                   20.2
## # ‚Ñπ 334 more rows
## # ‚Ñπ 4 more variables: comprimento_nadadeira_mm &lt;dbl&gt;, massa_corporal_g &lt;dbl&gt;,
## #   sex &lt;chr&gt;, year &lt;dbl&gt;
```

---

### Selecionando linhas: &amp;nbsp; `slice_head()`

A fun√ß√£o `slice_head()` √© usada para **extrair as primeiras linhas** de uma tabela, de forma controlada.

Ela √© √∫til quando queremos visualizar apenas o in√≠cio de uma base ou analisar os primeiros registros de cada grupo (quando combinada com `group_by()`).

- O argumento `n = ` define **quantas linhas ser√£o retornadas**.


``` r
pinguins |&gt; 
  slice_head(n = 8)
```

```
## # A tibble: 8 √ó 8
##   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
## 1 Adelie  Torgersen           39.1          18.7               181        3750
## 2 Adelie  Torgersen           39.5          17.4               186        3800
## 3 Adelie  Torgersen           40.3          18                 195        3250
## 4 Adelie  Torgersen           NA            NA                  NA          NA
## 5 Adelie  Torgersen           36.7          19.3               193        3450
## 6 Adelie  Torgersen           39.3          20.6               190        3650
## 7 Adelie  Torgersen           38.9          17.8               181        3625
## 8 Adelie  Torgersen           39.2          19.6               195        4675
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste exemplo, s√£o retornadas as **8 primeiras linhas** da base `pinguins`.

---

### Selecionando linhas: &amp;nbsp; `slice_tail()`

A fun√ß√£o `slice_tail()` √© usada para **extrair as √∫ltimas linhas** de uma tabela.

Ela funciona de forma semelhante ao `slice_head()`, mas retorna os **√∫ltimos registros** em vez dos primeiros.

- O argumento `n = ` define **quantas linhas ser√£o retornadas**.


``` r
pinguins |&gt;  
  slice_tail(n = 5)
```

```
## # A tibble: 5 √ó 8
##   species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##   &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
## 1 Chinstrap Dream            55.8          19.8               207        4000
## 2 Chinstrap Dream            43.5          18.1               202        3400
## 3 Chinstrap Dream            49.6          18.2               193        3775
## 4 Chinstrap Dream            50.8          19                 210        4100
## 5 Chinstrap Dream            50.2          18.7               198        3775
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste exemplo, s√£o retornada s as **5 √∫ltimas linhas** da base `pinguins`.

---

### Selecionando linhas: &amp;nbsp; `slice_max()`

A fun√ß√£o `slice_max()` seleciona as **linhas com os maiores valores** de uma coluna num√©rica espec√≠fica.

- O argumento `n = ` define **quantas linhas ser√£o retornadas**.

- Se `n` n√£o for informado, retorna **apenas a linha com o maior valor**.

- Em caso de empate, o n√∫mero de linhas retornadas pode ser **maior que `n`**.


``` r
pinguins |&gt; 
  slice_max(bill_depth_mm, n = 5)
```

```
## # A tibble: 6 √ó 8
##   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
## 1 Adelie  Torgersen           46            21.5               194        4200
## 2 Adelie  Torgersen           38.6          21.2               191        3800
## 3 Adelie  Dream               42.3          21.2               191        4150
## 4 Adelie  Torgersen           34.6          21.1               198        4400
## 5 Adelie  Dream               39.2          21.1               196        4150
## 6 Adelie  Biscoe              41.3          21.1               195        4400
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste exemplo, s√£o retornadas as **5 linhas com maior profundidade de bico** (`bill_depth_mm`) da base `pinguins`.

---

### Selecionando linhas: &amp;nbsp; `slice_min()`

A fun√ß√£o `slice_min()` seleciona as **linhas com os menores valores** de uma coluna num√©rica espec√≠fica.

- O argumento `n = ` define **quantas linhas ser√£o retornadas**.

- Se `n` n√£o for informado, retorna **apenas a linha com o menor valor**.

- Em caso de empate, o n√∫mero de linhas retornadas pode ser **maior que `n`**.


``` r
pinguins |&gt; 
  slice_min(flipper_length_mm, n = 5)
```

```
## # A tibble: 7 √ó 8
##   species   island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##   &lt;chr&gt;     &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
## 1 Adelie    Biscoe              37.9          18.6               172        3150
## 2 Adelie    Biscoe              37.8          18.3               174        3400
## 3 Adelie    Torgersen           40.2          17                 176        3450
## 4 Adelie    Dream               39.5          16.7               178        3250
## 5 Adelie    Dream               37.2          18.1               178        3900
## 6 Adelie    Dream               33.1          16.1               178        2900
## 7 Chinstrap Dream               46.1          18.2               178        3250
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste exemplo, s√£o retornadas as **5 linhas com menor comprimento de nadadeira** (`flipper_length_mm`) da base `pinguins`.

---

### Selecionando linhas: &amp;nbsp; `slice_sample()`

A fun√ß√£o `slice_sample()` √© usada para **selecionar linhas aleatoriamente** de uma base.

- O argumento `n = ` define **quantas linhas ser√£o sorteadas e retornadas**.

- √â √∫til para criar **amostras aleat√≥rias** simples, testes ou visualiza√ß√µes r√°pidas.


``` r
pinguins |&gt; 
  slice_sample(n = 12)
```

```
## # A tibble: 12 √ó 8
##    species   island   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;     &lt;chr&gt;             &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Gentoo    Biscoe             44            13.6               208        4350
##  2 Adelie    Dream              40.2          20.1               200        3975
##  3 Gentoo    Biscoe             46.8          15.4               215        5150
##  4 Adelie    Torgers‚Ä¶           38.9          17.8               181        3625
##  5 Gentoo    Biscoe             50            16.3               230        5700
##  6 Adelie    Biscoe             41.1          18.2               192        4050
##  7 Adelie    Dream              36.3          19.5               190        3800
##  8 Gentoo    Biscoe             49.2          15.2               221        6300
##  9 Chinstrap Dream              46.2          17.5               187        3650
## 10 Adelie    Torgers‚Ä¶           36.2          16.1               187        3550
## 11 Gentoo    Biscoe             48.4          16.3               220        5400
## 12 Gentoo    Biscoe             43.4          14.4               218        4600
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste exemplo, s√£o retornadas **12 linhas aleat√≥rias** da base `pinguins`.

---

### Limpando a tabela: &amp;nbsp; `distinct()`

A fun√ß√£o `distinct()` remove **linhas duplicadas**, considerando os valores de um ou mais colunas.

- Por padr√£o, retorna **apenas as colunas informadas**

- Com `.keep_all = TRUE`, mant√©m **todas as colunas** da base original.


``` r
pinguins |&gt; 
  distinct(body_mass_g, .keep_all = TRUE)
```

```
## # A tibble: 95 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           NA            NA                  NA          NA
##  5 Adelie  Torgersen           36.7          19.3               193        3450
##  6 Adelie  Torgersen           39.3          20.6               190        3650
##  7 Adelie  Torgersen           38.9          17.8               181        3625
##  8 Adelie  Torgersen           39.2          19.6               195        4675
##  9 Adelie  Torgersen           34.1          18.1               193        3475
## 10 Adelie  Torgersen           42            20.2               190        4250
## # ‚Ñπ 85 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

Neste exemplo, a base retorna **apenas uma linha para cada valor distinto de `body_mass_g`**, mantendo as demais colunas associadas √† primeira ocorr√™ncia de cada valor.

---

### Contando valores: &amp;nbsp; `count()`

A fun√ß√£o `count()` √© usada para **contar a frequ√™ncia de valores** de cada categoria em uma coluna ‚Äî especialmente √∫til para vari√°veis categ√≥ricas.

.pull-left[

``` r
pinguins |&gt; 
  count(species)
```

```
## # A tibble: 3 √ó 2
##   species       n
##   &lt;chr&gt;     &lt;int&gt;
## 1 Adelie      152
## 2 Chinstrap    68
## 3 Gentoo      124
```

Nesse exemplo, o c√≥digo retorna **quantas observa√ß√µes existem para cada esp√©cie** de pinguim na base de dados.
]

.pull-right[

``` r
pinguins |&gt; 
  count(species, island)
```

```
## # A tibble: 5 √ó 3
##   species   island        n
##   &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt;
## 1 Adelie    Biscoe       44
## 2 Adelie    Dream        56
## 3 Adelie    Torgersen    52
## 4 Chinstrap Dream        68
## 5 Gentoo    Biscoe      124
```

Neste exemplo, o c√≥digo retorna a **quantidade de pinguins por esp√©cie em cada ilha**, ou seja, uma contagem para cada combina√ß√£o de `species` e `island`.
]

---

### Combinando dados: &amp;nbsp; `bind_rows()`

A fun√ß√£o `bind_rows()` serve para **juntar objetos pela linha** ‚Äî ou seja, ela empilha os dados, mesmo que tenham colunas diferentes.

- O argumento `.id =` cria uma nova coluna que indica a origem de cada linha (√∫til para identificar de onde veio cada peda√ßo da base).

&lt;!-- Neste exemplo, as tabelas s√£o unidas **por linha**, e a coluna `id` identifica se a linha veio de `pinguins_01` ou `pinguins_02`. --&gt;



``` r
# seleciona algumas linhas e colunas de duas partes da base
pinguins_01 &lt;- slice(pinguins, 1:5) |&gt; select(1:3)
pinguins_02 &lt;- slice(pinguins, 51:55) |&gt; select(4:6)
# junta as linhas das duas tabelas
bind_rows(pinguins_01, pinguins_02, .id = "id")
```

```
## # A tibble: 10 √ó 7
##    id    species island    bill_length_mm bill_depth_mm flipper_length_mm
##    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
##  1 1     Adelie  Torgersen           39.1          NA                  NA
##  2 1     Adelie  Torgersen           39.5          NA                  NA
##  3 1     Adelie  Torgersen           40.3          NA                  NA
##  4 1     Adelie  Torgersen           NA            NA                  NA
##  5 1     Adelie  Torgersen           36.7          NA                  NA
##  6 2     &lt;NA&gt;    &lt;NA&gt;                NA            17.7               186
##  7 2     &lt;NA&gt;    &lt;NA&gt;                NA            18.9               188
##  8 2     &lt;NA&gt;    &lt;NA&gt;                NA            17.9               190
##  9 2     &lt;NA&gt;    &lt;NA&gt;                NA            19.5               200
## 10 2     &lt;NA&gt;    &lt;NA&gt;                NA            18.1               187
## # ‚Ñπ 1 more variable: body_mass_g &lt;dbl&gt;
```

---

### Combinando dados: &amp;nbsp; `bind_cols()`

A fun√ß√£o `bind_cols()` √© usada para **juntar objetos lado a lado**, ou seja, **por colunas**.

- As bases precisam ter o **mesmo n√∫mero de linhas**
- O argumento `.name_repair = "unique"` garante que, se houver colunas com nomes repetidos, elas sejam renomeadas automaticamente


``` r
# seleciona 5 linhas diferentes da base original
pinguins_01 &lt;- slice(pinguins, 1:5)
pinguins_02 &lt;- slice(pinguins, 51:55)
# junta as colunas das duas tabelas
bind_cols(pinguins_01, pinguins_02, .name_repair = "unique")
```

```
## # A tibble: 5 √ó 16
##   species...1 island...2 bill_length_mm...3 bill_depth_mm...4
##   &lt;chr&gt;       &lt;chr&gt;                   &lt;dbl&gt;             &lt;dbl&gt;
## 1 Adelie      Torgersen                39.1              18.7
## 2 Adelie      Torgersen                39.5              17.4
## 3 Adelie      Torgersen                40.3              18  
## 4 Adelie      Torgersen                NA                NA  
## 5 Adelie      Torgersen                36.7              19.3
## # ‚Ñπ 12 more variables: flipper_length_mm...5 &lt;dbl&gt;, body_mass_g...6 &lt;dbl&gt;,
## #   sex...7 &lt;chr&gt;, year...8 &lt;dbl&gt;, species...9 &lt;chr&gt;, island...10 &lt;chr&gt;,
## #   bill_length_mm...11 &lt;dbl&gt;, bill_depth_mm...12 &lt;dbl&gt;,
## #   flipper_length_mm...13 &lt;dbl&gt;, body_mass_g...14 &lt;dbl&gt;, sex...15 &lt;chr&gt;,
## #   year...16 &lt;dbl&gt;
```

&lt;!-- Neste exemplo, os dados s√£o combinados **horizontalmente**, formando uma nova tabela com mais colunas. --&gt;

---

### Unindo bases: &amp;nbsp; `*_join()`

Combina pares de bases de dados **com base em uma ou mais chaves** ‚Äî colunas em comum entre elas.

.left-column[

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;img src="img/30-joins.png" width="90%" /&gt;

]

.right-column[

**Jun√ß√µes de muta√ß√£o**

Adicionam informa√ß√µes de uma base √† outra:

- `left_join(x, y)`: mant√©m todas as observa√ß√µes em **x**
- `right_join(x, y)`: mant√©m todas as observa√ß√µes em **y**
- `inner_join(x, y)`: mant√©m apenas as observa√ß√µes **com correspond√™ncia em x e y**
- `full_join(x, y)`: mant√©m **todas** as observa√ß√µes em x e em y

**Jun√ß√µes de filtragem**

Selecionam linhas de x com base na exist√™ncia de correspond√™ncia em y:

- `semi_join(x, y)`: mant√©m as observa√ß√µes de **x que t√™m correspond√™ncia em y**
- `anti_join(x, y)`: mant√©m as observa√ß√µes de **x que n√£o t√™m correspond√™ncia em y**

]

---

### Unindo bases: &amp;nbsp; `*_join()`

.pull-left[

&lt;img src="img/31-left-join.gif" width="70%" /&gt;


&lt;img src="img/32-inner-join.gif" width="70%" /&gt;

]

.pull-right[

&lt;img src="img/33-right-join.gif" width="70%" /&gt;


&lt;img src="img/34-full-join.gif" width="70%" /&gt;

]

---

### Unindo bases: &amp;nbsp; `*_join()` ‚Äî Exemplo

Vamos criar uma nova tabela com **as coordenadas geogr√°ficas das ilhas** e, em seguida, fazer a **jun√ß√£o** com a base `pinguins`.

&lt;div class="panelset"&gt;
&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Criando a base auxiliar&lt;/div&gt;


``` r
# Coordenadas geogr√°ficas das ilhas
pinguins_ilhas &lt;- tibble(
  ilha = c("Torgersen", "Biscoe", "Dream", "Alpha"),
  longitude = c(-64.083333, -63.775636, -64.233333, -63),
  latitude = c(-64.766667, -64.818569, -64.733333, -64.316667)
)

pinguins_ilhas
```

```
## # A tibble: 4 √ó 3
##   ilha      longitude latitude
##   &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;
## 1 Torgersen     -64.1    -64.8
## 2 Biscoe        -63.8    -64.8
## 3 Dream         -64.2    -64.7
## 4 Alpha         -63      -64.3
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. Unindo as bases ‚Äî &lt;code&gt;left_join()&lt;/code&gt;&lt;/div&gt;

Agora, usamos `left_join()` para **adicionar as colunas de latitude e longitude** √† base `pinguins`, com base no nome da ilha.


``` r
pinguins_left_join &lt;- left_join(pinguins, pinguins_ilhas, by = c("island" = "ilha"))
glimpse(pinguins_left_join)
```

```
## Rows: 344
## Columns: 10
## $ species           &lt;chr&gt; "Adelie", "Adelie", "Adelie", "Adelie", "Adelie", "A‚Ä¶
## $ island            &lt;chr&gt; "Torgersen", "Torgersen", "Torgersen", "Torgersen", ‚Ä¶
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, ‚Ä¶
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, ‚Ä¶
## $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186‚Ä¶
## $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, ‚Ä¶
## $ sex               &lt;chr&gt; "male", "female", "female", NA, "female", "male", "f‚Ä¶
## $ year              &lt;dbl&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007‚Ä¶
## $ longitude         &lt;dbl&gt; -64.08333, -64.08333, -64.08333, -64.08333, -64.0833‚Ä¶
## $ latitude          &lt;dbl&gt; -64.76667, -64.76667, -64.76667, -64.76667, -64.7666‚Ä¶
```

&lt;!-- A base resultante cont√©m todas as colunas originais da `pinguins` `\(+\)` as coordenadas geogr√°ficas da ilha correspondente. --&gt;

&lt;/div&gt;
&lt;/div&gt;

---

### Opera√ß√µes de conjuntos e compara√ß√µes de dados

.pull-left[

&lt;br&gt;
&lt;br&gt;

&lt;!-- &lt;center&gt; --&gt;
  &lt;b&gt;&lt;font size = 6&gt;Opera√ß√µes para comparar dos dados:&lt;/font&gt;&lt;/b&gt;
&lt;!-- &lt;/center&gt; --&gt;

- **`union(x, y)`**: retorna todas as linhas que est√£o em **x**, **y** ou em ambos

- **`interesect(x, y)`**: retorna apenas as linhas que est√£o em **x** _e_ em **y**

- **`setdiff(x, y)`**: retorna as linhas que est√£o em **x**, mas **n√£o** em **y**

- **`setequal(x, y)`**: verifica se **x** e **y** s√£o iguais (independentemente da ordem)

]

.pull-right[
&lt;br&gt;
&lt;br&gt;
&lt;img src="img/35-operacoes.png" width="85%" /&gt;

]

---

### Pacote &amp;nbsp; `tidyr`

**O que s√£o dados organizados (_tidy data_)?**

&lt;img src="img/36-tidy-data.png" width="85%" style="display: block; margin: auto;" /&gt;

Dados organizados seguem uma **estrutura padr√£o**, que facilita a an√°lise e a manipula√ß√£o dos dados. Em um conjunto de dados _tidy_:

- Cada **coluna** representa uma **vari√°vel**

- Cada **linha** representa uma **observa√ß√£o**

- Cada **c√©lula** cont√©m **um √∫nico valor**

---

### Pacote &amp;nbsp; `tidyr`

O pacote `{tidyr}` √© respons√°vel por **organizar os dados no formato _tidy_**, deixando-os mais f√°ceis de trabalhar.

&lt;br&gt;

Principais fun√ß√µes:

- `unite()`: junta o conte√∫do de v√°rias colunas em uma s√≥

- `separate()`: divide o conte√∫do de uma coluna em v√°rias

- `separate_rows()`: divide em v√°rias colunas e linhas

- `drop_na()`: remove linhas com valores ausentes (`NA`)

- `replace_na()`: substitui valores ausentes (`NA`) por outro valor espec√≠fico

- `pivot_wider()`: transforma dados do formato longo para o formato largo

- `pivot_longer()`: transforma dados do formato largo para o formato longo

---

### [Cheat Sheets](https://posit.co/resources/cheatsheets/) 

[![Cheat Sheets](img/37-cheatsheet-tidyr.png)](https://rstudio.github.io/cheatsheets/tidyr.pdf)

---

### Uni√£o de colunas: &amp;nbsp; `unite()`

A fun√ß√£o `unite()` combina o conte√∫do de duas ou mais colunas em uma **√∫nica coluna de texto**.

No exemplo abaixo, as colunas `species` e `island` s√£o unidas em uma nova coluna chamada `species_island`, separadas por um caractere de sublinhado (`-`).


``` r
especie_ilha_unido &lt;- pinguins |&gt; 
  unite(
    col = "especie_ilha",     # novo nome da coluna
    species:island,           # colunas a serem unidas
    sep = " - "               # separador entre os valores
  )

head(especie_ilha_unido)
```

```
## # A tibble: 6 √ó 7
##   especie_ilha  bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex  
##   &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie - Tor‚Ä¶           39.1          18.7               181        3750 male 
## 2 Adelie - Tor‚Ä¶           39.5          17.4               186        3800 fema‚Ä¶
## 3 Adelie - Tor‚Ä¶           40.3          18                 195        3250 fema‚Ä¶
## 4 Adelie - Tor‚Ä¶           NA            NA                  NA          NA &lt;NA&gt; 
## 5 Adelie - Tor‚Ä¶           36.7          19.3               193        3450 fema‚Ä¶
## 6 Adelie - Tor‚Ä¶           39.3          20.6               190        3650 male 
## # ‚Ñπ 1 more variable: year &lt;dbl&gt;
```

---

### Separa√ß√£o de colunas: &amp;nbsp; `separate()`

A fun√ß√£o `separate()` divide o conte√∫do de uma coluna em **duas ou mais colunas**, com base em um separador.

No exemplo abaixo, a coluna `especie_ilha` √© separada em duas colunas: `especie` e `ilha`, usando `" - "` como separador:


``` r
especie_ilha_separado &lt;- especie_ilha_unido |&gt; 
  separate(
    col = especie_ilha,             # coluna a ser separada
    into = c("especie", "ilha"),    # nomes das novas colunas
    sep = " - "                     # separador utilizado
  )

head(especie_ilha_separado)
```

```
## # A tibble: 6 √ó 8
##   especie ilha  bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex  
##   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
## 1 Adelie  Torg‚Ä¶           39.1          18.7               181        3750 male 
## 2 Adelie  Torg‚Ä¶           39.5          17.4               186        3800 fema‚Ä¶
## 3 Adelie  Torg‚Ä¶           40.3          18                 195        3250 fema‚Ä¶
## 4 Adelie  Torg‚Ä¶           NA            NA                  NA          NA &lt;NA&gt; 
## 5 Adelie  Torg‚Ä¶           36.7          19.3               193        3450 fema‚Ä¶
## 6 Adelie  Torg‚Ä¶           39.3          20.6               190        3650 male 
## # ‚Ñπ 1 more variable: year &lt;dbl&gt;
```

---

### Remove NAs: &amp;nbsp; `drop_na()`

A fun√ß√£o `drop_na()` remove todas as **linhas que cont√™m valores ausentes (`NA`)**. 

&lt;div class="panelset"&gt;
&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Removendo em &lt;b&gt;todas as colunas&lt;/b&gt;&lt;/div&gt;

Por padr√£o, ela verifica **todas as colunas** da base:


``` r
pinguins |&gt; 
  drop_na() # remove em todas as colunas
```

```
## # A tibble: 333 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           36.7          19.3               193        3450
##  5 Adelie  Torgersen           39.3          20.6               190        3650
##  6 Adelie  Torgersen           38.9          17.8               181        3625
##  7 Adelie  Torgersen           39.2          19.6               195        4675
##  8 Adelie  Torgersen           41.1          17.6               182        3200
##  9 Adelie  Torgersen           38.6          21.2               191        3800
## 10 Adelie  Torgersen           34.6          21.1               198        4400
## # ‚Ñπ 323 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Removendo em &lt;b&gt;colunas espec√≠ficas&lt;/b&gt;&lt;/div&gt;

Tamb√©m pode especificar **quais colunas** deseja considerar ao remover os `NAs`:


``` r
pinguins |&gt; 
  drop_na(sex) # remove apenas quando `sex` estiver ausente
```

```
## # A tibble: 333 √ó 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
##    &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750
##  2 Adelie  Torgersen           39.5          17.4               186        3800
##  3 Adelie  Torgersen           40.3          18                 195        3250
##  4 Adelie  Torgersen           36.7          19.3               193        3450
##  5 Adelie  Torgersen           39.3          20.6               190        3650
##  6 Adelie  Torgersen           38.9          17.8               181        3625
##  7 Adelie  Torgersen           39.2          19.6               195        4675
##  8 Adelie  Torgersen           41.1          17.6               182        3200
##  9 Adelie  Torgersen           38.6          21.2               191        3800
## 10 Adelie  Torgersen           34.6          21.1               198        4400
## # ‚Ñπ 323 more rows
## # ‚Ñπ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;
```

&lt;/div&gt;
&lt;/div&gt;

---

### Pivotar os dados: &amp;nbsp; `pivot_*()`

.pull-left[

**`pivot_longer()`**

Transforma os dados em formato **mais longo**, ou seja, com **mais linhas** e **menos colunas**.

√â √∫til para organizar bases que foram estruturadas para entrada ou visualiza√ß√£o, e n√£o para an√°lise ‚Äî algo comum em planilhas.

&lt;br&gt;

**`pivot_wider()`**

Transforma os dados em formato **mais largo**, ou seja, com **mais colunas** e **menos linhas**.

Apesar de menos comum em dados _tidy_, √© √∫til para criar **tabelas resumo** ou preparar dados para ferramentas espec√≠ficas.

]

.pull-right[

&lt;img src="img/38-original-dfs-tidy.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

### Larga para longa: &amp;nbsp; `pivot_longer()`

Transforma um banco de dados **do farmato largo para o formato longo** ‚Äî ou seja, o n√∫mero de **linhas aumenta** e o n√∫mero de **colunas diminui**. Os principais argumentos da fun√ß√£o `pivot_longer()` s√£o:

- `cols`: colunas que ser√£o _"derretidas"_ em uma √∫nica coluna
- `names_to`: nome da nova coluna que ir√° conter os **nomes originais das colunas** (vari√°veis)
- `values_to`: nome da nova coluna que ir√° conter os **valores das colunas originais** (vari√°veis)

.tiny[

``` r
pivot_longer(data = pinguins_raw[, c(2, 3, 10:13)], 
             cols = `Culmen Length (mm)`:`Body Mass (g)`, 
             names_to = "medidas", 
             values_to = "valores")
```

```
## # A tibble: 1,376 √ó 4
##    `Sample Number` Species                             medidas           valores
##              &lt;dbl&gt; &lt;chr&gt;                               &lt;chr&gt;               &lt;dbl&gt;
##  1               1 Adelie Penguin (Pygoscelis adeliae) Culmen Length (m‚Ä¶    39.1
##  2               1 Adelie Penguin (Pygoscelis adeliae) Culmen Depth (mm)    18.7
##  3               1 Adelie Penguin (Pygoscelis adeliae) Flipper Length (‚Ä¶   181  
##  4               1 Adelie Penguin (Pygoscelis adeliae) Body Mass (g)      3750  
##  5               2 Adelie Penguin (Pygoscelis adeliae) Culmen Length (m‚Ä¶    39.5
##  6               2 Adelie Penguin (Pygoscelis adeliae) Culmen Depth (mm)    17.4
##  7               2 Adelie Penguin (Pygoscelis adeliae) Flipper Length (‚Ä¶   186  
##  8               2 Adelie Penguin (Pygoscelis adeliae) Body Mass (g)      3800  
##  9               3 Adelie Penguin (Pygoscelis adeliae) Culmen Length (m‚Ä¶    40.3
## 10               3 Adelie Penguin (Pygoscelis adeliae) Culmen Depth (mm)    18  
## # ‚Ñπ 1,366 more rows
```
]

---

### Longa para larga: &amp;nbsp; `pivot_wider()`

Transforma um banco de dados **do formato longo para o formato largo** ‚Äî ou seja, o n√∫mero de **colunas aumenta** e o n√∫mero de **linhas diminui**. Os principais argumentos da fun√ß√£o `pivot_wider()` s√£o:

- `names_from`: vari√°vel categ√≥rica que ir√° formar os **nomes das novas colunas**
- `values_from`: vari√°vel que ir√° preencher os **valores das novas colunas**
- `values_fill`: _(opcional)_ valor a ser usado para preencher os `NAs`, quando n√£o houver correspond√™ncia


``` r
pivot_wider(data = pinguins_raw[, c(2, 3, 13)], 
            names_from = Species, 
            values_from = `Body Mass (g)`)
```

```
## # A tibble: 152 √ó 4
##    `Sample Number` `Adelie Penguin (Pygoscelis adeliae)` Gentoo penguin (Pygos‚Ä¶¬π
##              &lt;dbl&gt;                                 &lt;dbl&gt;                   &lt;dbl&gt;
##  1               1                                  3750                    4500
##  2               2                                  3800                    5700
##  3               3                                  3250                    4450
##  4               4                                    NA                    5700
##  5               5                                  3450                    5400
##  6               6                                  3650                    4550
##  7               7                                  3625                    4800
##  8               8                                  4675                    5200
##  9               9                                  3475                    4400
## 10              10                                  4250                    5150
## # ‚Ñπ 142 more rows
## # ‚Ñπ abbreviated name: ¬π‚Äã`Gentoo penguin (Pygoscelis papua)`
## # ‚Ñπ 1 more variable: `Chinstrap penguin (Pygoscelis antarctica)` &lt;dbl&gt;
```

---

class: inverse center middle
name: visualizacao

# Visualiza√ß√£o de dados

.center[(Acompanhe no arquivo `04-visualizacao.R`)]

---

## Para que servem as visualiza√ß√µes?

.pull-left[

&lt;br&gt;

- Visualiza√ß√£o de dados √© a representa√ß√£o visual de informa√ß√µes por meio de gr√°ficos, tabelas e diagramas compreens√≠veis para seres humanos.

- Estat√≠sticas puras nem sempre comunicam bem. Por isso, utilizamos formas, cores e estruturas visuais para faciliar a interpreta√ß√£o dos dados.

- Boas visualiza√ß√µes ajudam a revelar padr√µes, tend√™ncias e rela√ß√µes que seriam dif√≠ceis de perceber apenas com n√∫meros.

- Para o p√∫blico, √© a parte mais acess√≠vel da ci√™ncia de dados. Uma boa visualiza√ß√£o muitas vezes comunica mais do que a sa√≠da crua de um modelo estat√≠stico.

]

.pull-right[

&lt;img src="img/39-visualizacao-scatter-plot.png" width="100%" /&gt;

.center[Ilustra√ß√£o por [Allison Horst](https://allisonhorst.com/)]

]

---

.pull-left[

&lt;br&gt;

**An√°lise explorat√≥ria**

- foco na **investiga√ß√£o**
- deve ser **r√°pida** de executar
- objetivo: **aprender**

&lt;img src="index_files/figure-html/unnamed-chunk-183-1.png" width="100%" style="display: block; margin: auto;" /&gt;

Ideal para entender padr√µes iniciais, identificar _outliers_ e gerar hip√≥teses.

]

--

.pull-right[

&lt;br&gt;

**An√°lise descritiva**

- foco na **comunica√ß√£o**
- deve ser **customiz√°vel**
- objetivo: **transmitir informa√ß√µes com clareza**

&lt;img src="index_files/figure-html/unnamed-chunk-184-1.png" width="100%" style="display: block; margin: auto;" /&gt;

Ideal para relatar achados de forma clara e convincente ao p√∫blico.

]

---

### Gram√°tica de gr√°ficos _em camadas_

O pacote [`{ggplot2}`](https://ggplot2.tidyverse.org) segue duas ideias fundamentais que ajudam a entender como os gr√°ficos s√£o constru√≠dos:

1. **Gr√°ficos s√£o representa√ß√µes visuais de dados**, constru√≠dos a partir de atributos est√©ticos (posi√ß√£o, cor, forma, tamanho ...) aplicados a formas geom√©tricas (pontos, linhas, barras ...).

&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Essa ideia vem da obra _[The Grammar of Graphics](https://www.springer.com/gp/book/9780387245447)_, que inspirou o `ggplot`.

2. **Gr√°ficos podem ser constru√≠dos em camadas**, sobrepondo diferentes elementos visuais (dados, eixos, t√≠tulos, linhas de tend√™ncia etc.).

&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Essa abordagem √© conhecida como _[layered grammar of graphics](https://vita.had.co.nz/papers/layered-grammar.html)_.

----

Nos pr√≥ximos exemplos, vamos trabalhar com a base `pinguins_raw`:


``` r
library(tidyverse)

pinguins &lt;- read_csv("dados/pinguins.csv")
```

.footnote[Curiosidade: o `gg` em `ggplot` vem de _Grammar of Graphics_.]

---

### Construindo um gr√°fico em Camadas

No [`{ggplot2}`](https://ggplot2.tidyverse.org), cada gr√°fico √© constru√≠do **em camadas**: come√ßamos com a base de dados e adicionados, passo a passo, os elementos visuais que desejamos. Vamos ver isso em a√ß√£o:

&lt;div class="panelset"&gt;
&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Canvas (tela em branco)&lt;/div&gt;


``` r
cars |&gt;  
* ggplot()
```

&lt;img src="index_files/figure-html/unnamed-chunk-186-1.png" width="70%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. Eixos (est√©tica)&lt;/div&gt;


``` r
cars |&gt;  
  ggplot() +
* aes(x = speed, y = dist)
```

&lt;img src="index_files/figure-html/unnamed-chunk-187-1.png" width="70%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;3. Geometria (pontos)&lt;/div&gt;


``` r
cars |&gt; 
  ggplot() +
  aes(x = speed, y = dist) +
* geom_point()
```

&lt;img src="index_files/figure-html/unnamed-chunk-188-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Exemplo completo de gr√°fico em camadas

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Visualiza√ß√£o Final&lt;/div&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-189-1.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt; 
&lt;div class="panel-name"&gt;C√≥digo em Camadas (R)&lt;/div&gt;


``` r
cars |&gt; 
  ggplot() +                                 
  aes(x = speed, y = dist) +                 
  geom_point(color = "darkblue") +           
  geom_smooth(                               
    se = FALSE,                              
    color = "darkgrey",                      
    method = "lm",                           
    formula = "y~x"                          
  ) +                                        
  labs(                                      
    title = "A velocidade influencia na dist√¢ncia de parada?",   
    subtitle = "Dist√¢ncia necess√°ria para parar o carro",        
    x = "Velocidade",                    
    y = "Dist√¢ncia para parar",          
    caption = "Fonte: Ezekiel, M. (1930)\nMethods of Correlation Analysis. Wiley" 
  ) +
  theme_minimal()                        
```

&lt;/div&gt;
&lt;/div&gt;

---

### Curiosidade: por que o `+`?

Diferente de outros pacotes do `tidyverse`, o `ggplot2` **n√£o usa o pipe (`|&gt;` ou `%&gt;%`) para encadear opera√ß√µes**.
Em vez disso, uso o operador `+`, que **representa a adi√ß√£o de camadas ao gr√°fico**.

Mas por qu√™?

Segundo o pr√≥prio Hadley Wickham (criador do pacote), quando come√ßou a desenvolver o `ggplot2`, **ele ainda n√£o conhecia o operador pipe**.

&lt;a href="https://www.reddit.com/r/dataisbeautiful/comments/3mp9r7/comment/cvi19ly/"&gt;
  &lt;img src="img/40-reddit-ggplot.png" style="width:85%;"&gt;
&lt;/a&gt;

&lt;!-- [![Coment√°rio de Hadley Wickham no Reddit](img/40-reddit-ggplot.png)](https://www.reddit.com/r/dataisbeautiful/comments/3mp9r7/comment/cvi19ly/?utm_source=embedv2&amp;utm_medium=comment_embed&amp;utm_content=whitespace) --&gt;

---

# [Qual gr√°fico escolher?](https://www.data-to-viz.com)

&lt;div style="text-align: center;"&gt;
  &lt;a href="https://www.data-to-viz.com"&gt;
    &lt;img src="img/41-data-to-viz.png" style="width:85%;"&gt;
  &lt;/a&gt;
&lt;/div&gt;

---

### [Cheat Sheets](https://posit.co/resources/cheatsheets/) 

&lt;div style="text-align: center;"&gt;
  &lt;a href="https://rstudio.github.io/cheatsheets/data-visualization.pdf"&gt;
    &lt;img src="img/42-cheatsheet-ggplot2.png" style="width:100%;"&gt;
  &lt;/a&gt;
&lt;/div&gt;

---

### Um gr√°fico de pontos (dispers√£o)


``` r
pinguins |&gt; 
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) + 
* geom_point()
```

```
## Warning: Removed 2 rows containing missing values or values outside the scale range
## (`geom_point()`).
```

&lt;img src="index_files/figure-html/unnamed-chunk-191-1.png" width="85%" /&gt;

---

### Gr√°fico de pontos (dispers√£o)

O **gr√°fico de dispers√£o (_scatterplot_)** √© uma das formas mais intuitivas de visualizar a rela√ß√£o entre duas vari√°veis num√©ricas.

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. &lt;code&gt;geom_point( )&lt;/code&gt;&lt;/div&gt;

- A fun√ß√£o `geom_point()` define que os dados ser√£o representados como **pontos** no plano cartesiano.

- O prefixo `geom_` indica uma **forma geom√©trica**. 

&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Outras fun√ß√µes semelhantes incluem:

&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `geom_bar()`, `geom_line()`, `geom_histogram()`, `geom_boxplot()`, etc.

&lt;br&gt;

**Exemplo (com `mapping = ` expl√≠cito):**


``` r
geom_point(mapping = aes(x = comprimento_nadadeira, y = massa_corporal))
```

**Exemplo (sem `mapping = `):**


``` r
geom_point(aes(x = comprimento_nadadeira, y = massa_corporal))
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. &lt;code&gt;aes( )&lt;/code&gt; e Boas Pr√°ticas&lt;/div&gt;

- O argumento `mapping` define **como os dados se conectam aos atributos est√©ticos** (posi√ß√£o, cor, forma,...).

- O mapeamento √© sempre feito com `aes()`.

- **Sempre mapeie colunas dentro de `aes()`** para garantir que o gr√°fico reflita os dados corretamente.

&lt;br&gt;

**Boas pr√°ticas**

- _Warnings_ s√£o comuns quando h√° `NA` ‚Äî o [`{ggplot2}`](https://ggplot2.tidyverse.org) remove essas linhas automaticamente.

- √â comum usar fun√ß√£o do [`{dplyr}`](https://dplyr.tidyverse.org) **antes de passar os dados ao** `ggplot()`.

&lt;br&gt;

&lt;div style="text-align: center;"&gt;
  &lt;strong style="font-size: 130%;"&gt;Mapeamentos devem SEMPRE ser feitos dentro de &lt;code&gt;aes()&lt;/code&gt;.&lt;/strong&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

---

### Gr√°fico de pontos (dispers√£o)

Vamos adicionar uma **reta de tend√™ncia** ao gr√°fico com a fun√ß√£o `geom_smooth()`.


``` r
pinguins |&gt; 
  ggplot() +
  aes(x = flipper_length_mm, y = body_mass_g) + 
  geom_point() +
* geom_smooth(method = "lm", formula = "y ~ x", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-194-1.png" width="100%" /&gt;

---

### Gr√°fico de pontos (dispers√£o)

- A linha de tend√™ncia √© adicionada ao gr√°fico com a fun√ß√£o `geom_smooth()`. 

  - Esse `geom` √© usado para representar a **tend√™ncia ou rela√ß√£o entre as vari√°veis**, com base em um modelo estat√≠stico. 

- No exemplo, utilizamos um **modelo linear simples**, o que resulta em uma **linha reta** entre os pontos. 

  - Isso √© definido com os argumentos `method = "lm"` e `formula = "y ~ x"`.

- Essa linha mostra uma **rela√ß√£o positiva** entre o comprimento da nadadeira e a massa corporal dos pinguins: 

  - √† medida que a nadadeira aumenta, a massa tamb√©m tende a aumentar.

- Como n√£o estamos mapeando nenhuma vari√°vel, **os argumentos de `geom_smooth()` s√£o passados fora da fun√ß√£o `aes()`**.

- O argumento `se = FALSE` serve para **remover a faixa de confian√ßa** (erro padr√£o) que √© exibida por padr√£o junto √† linha de tend√™ncia.

---

### Gr√°fico de pontos (dispers√£o)

Veja como o [`ggplot2`](https://ggplot2.tidyverse.org) √© realmente constru√≠do em **camadas sobrepostas**. Se colocarmos a camada da **linha de tend√™ncia** antes da camada dos **pontos**, os **pontos ser√£o desenhados por cima da linha**.


``` r
pinguins |&gt; 
  ggplot() +
  aes(x = flipper_length_mm, y = body_mass_g) + 
  geom_smooth(method = "lm", formula = "y ~ x", se = FALSE) +  # linha primeiro
  geom_point()                                                 # pontos depois
```

&lt;img src="index_files/figure-html/unnamed-chunk-195-1.png" width="100%" /&gt;

---

### Gr√°fico de pontos (dispers√£o)

Os atributos `x` e `y` s√£o necess√°rios para a constru√ß√£o de um gr√°fico de dispers√£o. Al√©m deles, **outros atributos est√©ticos podem ser mapeados**, como a **cor**.

Neste exemplo, a cor representa a vari√°vel `species`. Como essa vari√°vel √© categ√≥rica, o [`{ggplot2}`](https://ggplot2.tidyverse.org) **atribui automaticamente uma cor distinta para cada categoria**.


``` r
pinguins |&gt; 
  ggplot() +
  aes(x = flipper_length_mm, y = body_mass_g) + 
* geom_point(aes(color = species))
```

&lt;img src="index_files/figure-html/unnamed-chunk-196-1.png" width="100%" /&gt;

---

### Gr√°fico de pontos (dispers√£o)

Podemos adicionar mais de um atributo est√©tico no mesmo gr√°fico. Neste exemplo, al√©m da cor por esp√©cie, o **formato dos pontos** (`shape`) √© usado para representar o sexo (`sex`) dos pinguins.


``` r
pinguins |&gt; 
  ggplot() +
  aes(x = flipper_length_mm, y = body_mass_g) + 
* geom_point(aes(color = species, shape = sex))
```

&lt;img src="index_files/figure-html/unnamed-chunk-197-1.png" width="100%" /&gt;

---

### Gr√°fico de linhas

Utilizamos a fun√ß√£o `geom_line()` para criar um **gr√°fico de linhas**, que √© idela para **representar s√©ries temporais**. No exemplo a seguir, representamos a **massa corporal m√©dia dos pinguins** em cada ano, de 2007 a 2009.

.tiny[

``` r
pinguins |&gt;
  group_by(year) |&gt;
  summarise(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE)) |&gt;
  ggplot() +
* geom_line(aes(x = year, y = mean_body_mass_g))
```

&lt;img src="index_files/figure-html/unnamed-chunk-198-1.png" width="100%" /&gt;
]

---

### Gr√°fico de linhas

Podemos combinar **pontos** e **linhas** em um mesmo gr√°fico para representar os dados de forma mais completa.  
Para isso, basta adicionar os dois `geoms` no c√≥digo, um ap√≥s o outro.

.tiny[

``` r
pinguins |&gt;
  group_by(year) |&gt;
  summarise(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE)) |&gt;
  ggplot() +
* geom_line(aes(x = year, y = mean_body_mass_g)) +   # gr√°fico de linha
* geom_point(aes(x = year, y = mean_body_mass_g))    # gr√°fico de pontos
```

&lt;img src="index_files/figure-html/unnamed-chunk-199-1.png" width="100%" /&gt;
]

---

### Gr√°fico de linhas

Quando diferentes `geoms` compartilham os mesmos mapeamentos est√©ticos (`aes()`), podemos definir o `aes()` **diretamente na fun√ß√£o `ggplot()`**. Dessa forma, **o mapeamento √© aplicado automaticamente a todos os `geoms`**, tornando o c√≥digo mais limpo e conciso. O exemplo anterior pode ser reescrito assim:

.tiny[

``` r
pinguins |&gt;
  group_by(year) |&gt;
  summarise(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE)) |&gt;
* ggplot(aes(x = year, y = mean_body_mass_g)) +  # mapeamento global
* geom_line() +                                  # gr√°fico de linhas (usa o aes definido acima)
* geom_point()                                   # gr√°fico de pontos (usa o aes definido acima)
```

&lt;img src="index_files/figure-html/unnamed-chunk-200-1.png" width="100%" /&gt;
]

---

### Gr√°fico de linhas

Quando um `geom` precisa de um mapeamento adicional que **n√£o se aplica aos outros**, esse atributo pode (e deve) ser especificado **dentro do `aes()` da fun√ß√£o correspondente**.

No exemplo abaixo, o `aes()` global define `x` e `y` para todos os `geoms`, mas o `geom_label()` adiciona o mapeamento **espec√≠fico** da coluna `label`:

.tiny[

``` r
pinguins |&gt; 
  group_by(year) |&gt; 
  summarise(mean_body_mass_g = round(mean(body_mass_g, na.rm = TRUE), 2)) |&gt; 
* ggplot(aes(x = year, y = mean_body_mass_g)) +  # mapeamento global
* geom_line() +                                  # gr√°fico de linhas (usa o aes global)
* geom_label(aes(label = mean_body_mass_g))      # adiciona um label (usa o aes global + o label)
```

&lt;img src="index_files/figure-html/unnamed-chunk-201-1.png" width="100%" /&gt;
]

---

### Gr√°fico de barras

Vamos construir um **gr√°fico de barras** com o n√∫mero de pinguins de cada esp√©cie. Para isso, usamos a fun√ß√£o `geom_col()`, que exibe **valores j√° agregados** (como contagens).

.tiny[

``` r
pinguins |&gt; 
  count(species) |&gt; 
  ggplot() +
* geom_col(aes(x = species, y = n))             # gr√°fico de barras
```

&lt;img src="index_files/figure-html/unnamed-chunk-202-1.png" width="100%" /&gt;
]

---

### Gr√°fico de barras

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;C√≥digo (R) e Gr√°fico&lt;/div&gt;

.tiny[

``` r
pinguins |&gt; 
  count(species) |&gt; 
  ggplot() +
* geom_col(                                    # gr√°fico de barras com valores prontos
*   aes(x = species, y = n, fill = species),   # preenche cada barra com uma cor diferente
*   show.legend = FALSE                        # remove a legenda (j√° que a cor est√° no eixo x)
  )
```

&lt;img src="index_files/figure-html/unnamed-chunk-203-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Explica√ß√£o&lt;/div&gt;

Gr√°ficos de barras tamb√©m exigem os atributos `x` e `y`. O `x` define a **categoria**, e o `y` representa a **altura da barra**. 

Quando a base cont√©m valores `NA`, eles podem aparecer no gr√°fico. Para remov√™-los, use a fun√ß√£o `filter()` previamente.

&lt;br&gt;

**Regra Pr√°tica:**

Para **colorir barras por categorias**, usamos o atibuto `fill`, e n√£o `color`.

- `color`: contorno de elementos **sem √°rea** (linhas, pontos, bordas).

- `fill`: preechimento de elementos **com √°rea** (barras, √°reas, pol√≠gonos).

&lt;/div&gt;
&lt;/div&gt;

---

### Gr√°fico de barras

Para **melhorar a legibilidade das _labels_ no eixo x**, uma boa pr√°tica √© **inverter os eixos** do gr√°fico, transformando-o em barras horizontais. Isso √© feito com a fun√ß√£o `coord_flip()`.


``` r
pinguins |&gt;
  count(species) |&gt;
  ggplot() +
  geom_col(aes(x = species, y = n, fill = species), show.legend = FALSE) +
* coord_flip()                              # inverte os eixos: x vira y, y vira x
```

&lt;img src="index_files/figure-html/unnamed-chunk-204-1.png" width="100%" /&gt;

---

### Gr√°fico de barras

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;C√≥digo (R) e Gr√°fico&lt;/div&gt;


``` r
pinguins |&gt;
  count(species) |&gt;
* mutate(species = forcats::fct_reorder(species, n)) %&gt;%  # reordena os n√≠veis da esp√©cie
  ggplot() +
  geom_col(aes(x = species, y = n, fill = species), show.legend = FALSE) +
  coord_flip()
```

&lt;img src="index_files/figure-html/unnamed-chunk-205-1.png" width="100%" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Explica√ß√£o&lt;/div&gt;

- Para **ordenar as categorias** de uma vari√°vel em um gr√°fico de barras, usamos a fun√ß√£o `fct_reorder()` do pacote [`{forcats}`](https://forcats.tidyverse.org).

- Ela permite **reordenar os n√≠veis de um fator** com base em outra vari√°vel ‚Äî neste caso, `n` (n√∫mero de pinguins por esp√©cie).

&lt;br&gt;

----

&lt;br&gt;

- No **R**, fatores s√£o internamente representados por **n√∫meros inteiros** (1, 2, 3...), mas exibem r√≥tulos de texto.

- Por padr√£o, esses n√≠veis s√£o ordenados **alfabeticamente**, o que pode gerar gr√°ficos com ordena√ß√µes pouco informativas.

Exemplo:  
`factor(c("banana", "uva", "melancia"))` ‚Üí `"banana"` vira 1, `"melancia"` vira 2, `"uva"` vira 3

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;C√≥digo (R) e Gr√°fico [sem &lt;code&gt;fct_reorder()&lt;/code&gt;]&lt;/div&gt;

Nesse exemplo, as **categorias s√£o exibidas em ordem alfab√©tica**, pois n√£o reordenamos os n√≠veis do fator.


``` r
pinguins |&gt;
  count(species) |&gt;
  # mutate(species = forcats::fct_reorder(species, n)) %&gt;%  # reordena os n√≠veis da esp√©cie 
  ggplot() +
  geom_col(aes(x = species, y = n, fill = species), show.legend = FALSE) +
  coord_flip()
```

&lt;img src="index_files/figure-html/unnamed-chunk-206-1.png" width="100%" /&gt;

&lt;/div&gt;

---

### Gr√°fico de barras

Por fim, podemos **adicionar r√≥tulos (labels)** dentro das barras para mostrar os valores num√©ricos (quantidade de pinguins por esp√©cie).

.tiny[

``` r
pinguins |&gt;
  count(species) |&gt;
  mutate(species = forcats::fct_reorder(species, n)) %&gt;%
  ggplot(aes(x = species)) +                                    # mapeamento comum a todos os geoms
  geom_col(aes(y = n, fill = species), show.legend = FALSE) +   # cria o gr√°fico de barras
* geom_label(aes(y = n / 2, label = n)) +                       # adiciona o n√∫mero no centro da barra
  coord_flip()
```

&lt;img src="index_files/figure-html/unnamed-chunk-207-1.png" width="100%" /&gt;
]

---

### Histogramas

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. C√≥digo (R) e Gr√°fico&lt;/div&gt;

.tiny[

``` r
pinguins |&gt; 
  filter(species == "Adelie") |&gt; 
  ggplot() +
* geom_histogram(aes(x = body_mass_g))
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

```
## Warning: Removed 1 row containing non-finite outside the scale range
## (`stat_bin()`).
```

&lt;img src="index_files/figure-html/unnamed-chunk-208-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. O que √© um histograma?&lt;/div&gt;

- Um **histograma** mostra a **distribui√ß√£o de uma vari√°vel num√©rica**, agrupando os dados em intervalos (bins).

- √â criado com `geom_histogram()` e requer apenas o mapeamento do eixo `x`.  O `y` (frequ√™ncia) √© calculado automaticamente.

- Histogramas s√£o √∫teis para visualizar a **forma da distribui√ß√£o**: sim√©trica, enviesada, multimodal etc.

----

**Dica r√°pida:**  

Histogramas s√£o usados para **vari√°veis cont√≠nuas**, enquanto gr√°ficos de barras s√£o para **vari√°veis categ√≥ricas**.

**Exemplo de agrupamento:**  

Valores: `[3200, 3300, 3400, 3500, 3600]`  

Com `binwidth = 200`:  
- 3200‚Äì3399 ‚Üí 2 observa√ß√µes  
- 3400‚Äì3599 ‚Üí 2 observa√ß√µes  
- 3600‚Äì3799 ‚Üí 1 observa√ß√£o

&lt;/div&gt;

&lt;div class="panel"&gt; 
&lt;div class="panel-name"&gt;3. Personalizando o histograma&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;
  filter(species == "Adelie") |&gt;
  ggplot() +
  geom_histogram(aes(x = body_mass_g),
*                binwidth = 100,        # define o intervalo de cada intervalo (largura da barra)
*                color = "white"        # altera a cor das bordas de cada coluna para branco
                )
```

&lt;img src="index_files/figure-html/unnamed-chunk-209-1.png" width="100%" /&gt;
]

---

### Boxplot

&lt;div class="panelset"&gt;
&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. C√≥digo (R) e Gr√°fico&lt;/div&gt;

.tiny[

``` r
pinguins |&gt; 
  ggplot(aes(x = species, y = flipper_length_mm)) +    # mapeamentos principais
* geom_boxplot(aes(color = species),                   # cada esp√©cie com uma cor
*              show.legend = FALSE)                    # remove legenda redundante
```

```
## Warning: Removed 2 rows containing non-finite outside the scale range
## (`stat_boxplot()`).
```

&lt;img src="index_files/figure-html/unnamed-chunk-210-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. O que √© um boxplot?&lt;/div&gt;

Boxplots s√£o gr√°ficos estat√≠sticos usados para **resumir a distribui√ß√£o de uma vari√°vel num√©rica**, especialmente quando queremos **comparar grupos**.

No [`ggplot2`](https://ggplot2.tidyverse.org), usamos a fun√ß√£o `geom_boxplot()` para criar esses gr√°ficos.  
Ela exige dois mapeamentos:

- `x`: uma **vari√°vel categ√≥rica** (ex: `species`)  
- `y`: uma **vari√°vel num√©rica** (ex: `flipper_length_mm`)

&lt;br&gt;

O boxplot exibe:
- A **mediana** da distribui√ß√£o (linha central);
- Os **quartis** (caixa que representa o intervalo interquartil);
- Os **outliers** (pontos fora dos "bigodes").

√â ideal para avaliar a **dispers√£o, simetria e presen√ßa de valores extremos**.

&lt;/div&gt;
&lt;/div&gt;

---

### T√≠tulos, _labels_ e escalas

&lt;div class="panelset"&gt;
  
&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Gr√°fico &lt;code&gt;labs()&lt;/code&gt;&lt;/div&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-211-1.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;C√≥digo &lt;code&gt;labs()&lt;/code&gt;&lt;/div&gt;

A fun√ß√£o `labs()` √© usada para **adicionar ou alterar os textos do gr√°fico**, como **t√≠tulos, subt√≠tulos, eixos e legendas**. Os principais argumentos dessa fun√ß√£o s√£o:

- `title`: texto do t√≠tulo
- `subtitle`: texto do subt√≠tulo
- `caption`: texto do rodap√©
- `x`: texto do eixo x
- `y`: texto do eixo y

.tiny[

``` r
pinguins |&gt; 
  ggplot() +
  aes(x = flipper_length_mm, y = body_mass_g) +
  geom_point(aes(color = species)) +
* labs(
*   x = "Comprimento da nadadeira (mm)",                         # nome do eixo x
*   y = "Massa corporal (g)",                                    # nome do eixo y
*   color = "Esp√©cies",                                          # nome da legenda de cores
*   title = "Gr√°fico de dispers√£o",                              # t√≠tulo principal
*   subtitle = "Comprimento da nadadeira vs Massa corporal",     # subt√≠tulo
*   caption = "{palmerpenguins} R package"                       # legenda de rodap√©
* )
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Gr√°fico &lt;code&gt;scale_()&lt;/code&gt;&lt;/div&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-213-1.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;C√≥digo &lt;code&gt;scale_()&lt;/code&gt;&lt;/div&gt;

As fun√ß√µes `scale_x_*()` e `scale_y_*()` controlam **como os eixos s√£o exibidos**: voc√™ pode definir **quais valores aparecem** (_breaks_) e **como eles s√£o formatados** (_labels_, limites etc.).

As fun√ß√µes e argumentos mais comuns s√£o:

- `scale_x_continuous()`: ajusta eixos com valores num√©ricos cont√≠nuos (x)
- `scale_y_continuous()`: ajusta eixos com valores num√©ricos cont√≠nuos (y)
- `scale_x_discrete()`: ajusta eixos com valores categ√≥ricos (x)
- `scale_y_discrete()`: ajusta eixos com valores categ√≥ricos (y)
- `breaks = c(...)`: define quais valores aparecem no eixo


``` r
pinguins |&gt; 
  group_by(year) |&gt; 
  summarise(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE)) |&gt; 
  ggplot() +
  geom_line(aes(x = year, y = mean_body_mass_g)) +
* scale_x_continuous(breaks = seq(2007, 2009, 1)) +   # mostra os anos 2007, 2008 e 2009 no eixo x
* scale_y_continuous(breaks = seq(4000, 4250, 25))    # mostra valores a cada 25g no eixo y
```

&lt;/div&gt;
&lt;/div&gt;

---

### Cores

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Introdu√ß√£o&lt;/div&gt;

Para **controlar as cores** em [`ggplot2`](https://ggplot2.tidyverse.org), usamos **fun√ß√µes da fam√≠lia `scale_*_*()`**:

- `scale_fill_manual()` ‚Üí para preenchimento (barras, √°reas, caixas)

- `scale_color_manual()` ‚Üí para linhas, bordas e pontos

A escolha entre `color` e `fill` depende da **geometria** utilizada:

- `fill`: elementos com √°rea (ex: `geom_col`, `geom_bar`, `geom_boxplot`)

- `color`: elementos de contorno (ex: `geom_line`, `geom_point`, `geom_jitter`)

**Paletas de cores prontas:**

- **Escalas qualitativas:** usadas para vari√°veis **nominais** (ex: sexo, cor/ra√ßa)

- **Escalas divergentes:** usadas para vari√°veis com **centro neutro** (ex: correla√ß√£o, saldo)

- **Escalas sequenciais:** usadas para vari√°veis **ordinais** ou **cont√≠nuas crescentes** (ex: faixa et√°ria, escolaridade)

- **Viridis:** paleta perceptualmente uniforme e compat√≠vel com **daltonismo**

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Paletas no &lt;code&gt;{ggplot2}&lt;/code&gt; e pacotes externos&lt;/div&gt;

**Paletas no `ggplot2`:**

- `scale_*_brewer()` ‚Üí para vari√°veis **discretas** (qualitativas, sequenciais, divergentes)

- `scale_*_distiller()` ‚Üí para vari√°veis **cont√≠nuas**

- `scale_*_fermenter()` ‚Üí transforma vari√°vel cont√≠nua em faixas (binned)

- `scale_*_viridis_[c/d/b]` ‚Üí vers√£o acess√≠vel para diferentes tipos de dados

- `scale_*_manual()` ‚Üí define manualmente as cores

**Paletas de outros pacotes:**

- `{ghibli}` ‚Äì inspirado no Studio Ghibli
- `{paletteer}` ‚Äì enorme reposit√≥rio de paletas de v√°rios pacotes
- `{RColorBrewer}` ‚Äì cl√°ssico, base para o `scale_brewer()`
- `{hrbrthemes}` ‚Äì temas e escalas de cor pensadas para publica√ß√µes
- `{ggthemr}` ‚Äì define temas e cores para gr√°ficos (menos mantido hoje)

&lt;/div&gt;
&lt;/div&gt;

---

### Cores

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. &lt;code&gt;scale_fill_manual('nome')&lt;/code&gt;&lt;/div&gt;

Substituindo as cores padr√£o do gr√°fico por outro conjunto de cores.

.tiny[

``` r
pinguins |&gt; 
  count(species) |&gt; 
  mutate(species = forcats::fct_reorder(species, n)) |&gt; 
  ggplot(aes(x = species, y = n)) +
  geom_col(aes(fill = species), show.legend = FALSE) +
  coord_flip() +
* scale_fill_manual(values = c("red", "blue", "purple"))
```

&lt;img src="index_files/figure-html/unnamed-chunk-215-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. &lt;code&gt;scale_fill_manual('hex')&lt;/code&gt;&lt;/div&gt;

Tamb√©m √© poss√≠vel usar cores hexadecimais para definir as cores.

.tiny[

``` r
pinguins |&gt; 
  count(species) |&gt; 
  mutate(species = forcats::fct_reorder(species, n)) |&gt; 
  ggplot(aes(x = species, y = n)) +
  geom_col(aes(fill = species), show.legend = FALSE) +
  coord_flip() +
* scale_fill_manual(values = c("#ff0000", "#0000ff", "#a020f0"))
```

&lt;img src="index_files/figure-html/unnamed-chunk-216-1.png" width="100%" /&gt;
]

&lt;/div&gt;
&lt;/div&gt;

---

### Cores

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;&lt;code&gt;scale_fill_manual()&lt;/code&gt;&lt;/div&gt;

.tiny[

``` r
pinguins  |&gt; 
  ggplot(aes(x = flipper_length_mm)) +
* geom_histogram(aes(fill = species), alpha = 0.5, position = "identity") +
* scale_fill_manual(values = c("darkorange", "purple", "cyan4")) +
  labs(x = "Comprimento da nadadeira (mm)", y = "Frequ√™ncia", 
       title = "Comprimento da nadadeira dos Pinguins") +
  theme_minimal() 
```

&lt;img src="index_files/figure-html/unnamed-chunk-217-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;&lt;code&gt;scale_color_manual()&lt;/code&gt;&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;  
  ggplot(aes(x = species, y = flipper_length_mm, color = species)) +
* geom_boxplot(width = 0.3, show.legend = FALSE) +
* geom_jitter(alpha = 0.5, show.legend = FALSE, position = position_jitter(width = 0.2, seed = 0)) +
* scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(x = "Esp√©cies", y = "Comprimento da nadadeira (mm)") +
  theme_minimal()
```

&lt;img src="index_files/figure-html/unnamed-chunk-218-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Diferen√ßa entre &lt;code&gt;fill&lt;/code&gt; e &lt;code&gt;color&lt;/code&gt;&lt;/div&gt;

Ambos os gr√°ficos utilizam **escalas manuais de cor** com a fam√≠lia `scale_*_manual()`.

&lt;br&gt;

**Diferen√ßa entre as est√©ticas:**

- `fill = species`: controla a **cor de preenchimento** dos elementos com √°rea  
  (ex: histogramas, colunas, caixas).

- `color = species`: controla a **cor de contorno ou linha** dos elementos  
  (ex: pontos, linhas, bordas de boxplots).

&lt;br&gt;

&lt;div style="text-align: center;"&gt;
  &lt;strong style="font-size: 130%;"&gt;Escolher corretamente &lt;code&gt;fill&lt;/code&gt; ou &lt;code&gt;color&lt;/code&gt; √© essencial para que o gr√°fico reflita visualmente os grupos corretamente.&lt;/strong&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Argumentos adicionais&lt;/div&gt;

**Argumentos utilizados nos gr√°ficos:**

- `alpha = 0.5`: controla a **transpar√™ncia** da cor (neste caso, 50% transparente):

  - `1` = 100% opaco (padr√£o), 
  - `0` = 100% transparente
  - **√ötil para sobreposi√ß√£o**, como no histograma com v√°rias esp√©cies

- `position = "identity"`: desenha os elementos **sem empilhar ou ajustar**:
  
  - Usado no histograma para permitir **sobreposi√ß√£o das distribui√ß√µes**
  - Se us√°ssemos `position = "stack"`, as barras seriam empilhadas

- `geom_jitter()`: **espalha os pontos horizontalmente** (ou verticalmente)  para evitar sobreposi√ß√£o: 
  
  - Muito √∫til com **vari√°veis categ√≥ricas**, como `species`
  - O argumento `width = 0.2` controla **o grau de espalhamento**
  - `seed = 0` garante reprodutibilidade da posi√ß√£o dos pontos

&lt;/div&gt;
&lt;/div&gt;

---

### Trocando os textos da legenda

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Explica√ß√£o&lt;/div&gt;

Para alterar os **textos exibidos na legenda** em gr√°ficos do [`ggplot2`](https://ggplot2.tidyverse.org), voc√™ pode usar:

- `scale_color_discrete(labels = ...)`: quando o mapeamento √© categ√≥rico e voc√™ **n√£o vai definir as cores manualmente**
- `scale_color_manual(values = ..., labels = ...)`: quando quiser **definir as cores e os textos**

Use tamb√©m a fun√ß√£o `labs()` para **alterar o t√≠tulo da legenda** (por exemplo, de `"species"` para `"Esp√©cie"`).

&lt;br&gt;

Essas fun√ß√µes valem tamb√©m para outros atributos est√©ticos:

- `scale_fill_discrete()` / `scale_fill_manual()`  
- `scale_shape_manual()`  
- `scale_linetype_manual()`  
- etc.

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. Exemplo pr√°tico&lt;/div&gt;


``` r
pinguins |&gt;
  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) +
  geom_point(aes(color = species)) +
* labs(color = "Esp√©cie") +  # altera o t√≠tulo da legenda
* scale_color_discrete(      # troca os textos exibidos
*   labels = c("Pinguim de Ad√©lia", "Pinguim de Barbicha", "Pinguim Gentoo")) +
  theme_minimal()
```

&lt;img src="index_files/figure-html/unnamed-chunk-219-1.png" width="100%" /&gt;

&lt;/div&gt;
&lt;/div&gt;

---

### Temas

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Explica√ß√£o&lt;/div&gt;

O `ggplot2` oferece v√°rios **temas prontos** na fam√≠lia `theme_*()` para facilitar a padroniza√ß√£o visual dos gr√°ficos.

- O tema **padr√£o** tem fundo cinza.
- Outras op√ß√µes como `theme_bw()`, `theme_light()`, `theme_void()` e `theme_minimal()` ajustam o fundo, as grades, as bordas e o estilo geral do gr√°fico.

Tamb√©m √© poss√≠vel **criar seu pr√≥prio tema** usando a fun√ß√£o `theme()`, personalizando os elementos visuais com:

- `element_text()` ‚Äì textos (t√≠tulos, eixos, etc.)
- `element_line()` ‚Äì linhas
- `element_rect()` ‚Äì fundos e bordas
- `element_blank()` ‚Äì remover elementos

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;padr√£o&lt;/div&gt;

.tiny[

``` r
pinguins |&gt; 
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) + 
  geom_point()
```

&lt;img src="index_files/figure-html/unnamed-chunk-220-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;bw&lt;/div&gt;

.tiny[

``` r
pinguins |&gt; 
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) +
  geom_point() +
* theme_bw()
```

&lt;img src="index_files/figure-html/unnamed-chunk-221-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;classic&lt;/div&gt;

.tiny[ 

``` r
pinguins |&gt;  
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) +
  geom_point() +
* theme_classic()
```

&lt;img src="index_files/figure-html/unnamed-chunk-222-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;light&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;  
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) +
  geom_point() +
* theme_light()
```

&lt;img src="index_files/figure-html/unnamed-chunk-223-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;minimal&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;  
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) +
  geom_point() +
* theme_minimal()
```

&lt;img src="index_files/figure-html/unnamed-chunk-224-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;void&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;  
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) + 
  geom_point() +
* theme_void()
```

&lt;img src="index_files/figure-html/unnamed-chunk-225-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;dark&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;  
  ggplot() + 
  aes(x = flipper_length_mm, y = body_mass_g) + 
  geom_point() +
* theme_dark()
```

&lt;img src="index_files/figure-html/unnamed-chunk-226-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class=panel&gt;
&lt;div class="panel-name"&gt;criando o pr√≥prio tema&lt;/div&gt;

.tiny[

``` r
pinguins |&gt;  
  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) +
  geom_point(aes(color = species)) +
  labs(title = "Gr√°fico de dispers√£o", subtitle = "Comprimento da nadadeira vs Massa corporal") +
* theme(plot.title = element_text(hjust = 0.5),
*   plot.subtitle = element_text(hjust = 0.5),
*   axis.title = element_text(color = "red"),
*   panel.background = element_rect(fill = "lightgrey"),
*   panel.grid = element_blank())
```

&lt;img src="index_files/figure-html/unnamed-chunk-227-1.png" width="100%" /&gt;
]

&lt;/div&gt;
&lt;/div&gt;

---

### Mapas

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Preparando os dados&lt;/div&gt;

Para elaborar mapas tem√°ticos, vamos usar duas bases:

- A base `ideb_fundamental`, com as notas do IDEB para os munic√≠pios brasileiros.


``` r
# importa a base do Ideb
ideb_fundamental &lt;- readr::read_csv("dados/ideb_fundamental.csv")
```

- A malha municipal obtida pelo pacote [`{geobr}`](https://github.com/ipeaGIT/geobr), que fornece o _shapefile_ com as **divis√µes pol√≠tico-administrativas**.


``` r
# importa a malha municipal (geometria dos munic√≠pios)
mapa_muni &lt;- geobr::read_municipality(year = 2020)
```

Depois, unimos as duas bases usando a fun√ß√£o `left_join()` do [`{dplyr}`](https://dplyr.tidyverse.org/), relacionando o c√≥digo do municipio (`code_muni` na malha e `id_municipio` no Ideb):


``` r
# une as duas bases pelo c√≥digo do munic√≠pio
ideb_mapa &lt;- dplyr::left_join(mapa_muni, ideb_fundamental, by = c("code_muni" = "id_municipio"))
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. Explorando a base geoespacial&lt;/div&gt;

.tiny[

``` r
dplyr::glimpse(ideb_mapa)
```

```
## Rows: 5,570
## Columns: 12
## $ code_muni    &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100064, 110‚Ä¶
## $ name_muni    &lt;chr&gt; "Alta Floresta D'oeste", "Ariquemes", "Cabixi", "Cacoal",‚Ä¶
## $ code_state   &lt;dbl&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1‚Ä¶
## $ abbrev_state &lt;chr&gt; "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO‚Ä¶
## $ name_state   &lt;chr&gt; "Rond√¥nia", "Rond√¥nia", "Rond√¥nia", "Rond√¥nia", "Rond√¥nia‚Ä¶
## $ code_region  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ‚Ä¶
## $ name_region  &lt;chr&gt; "Norte", "Norte", "Norte", "Norte", "Norte", "Norte", "No‚Ä¶
## $ ano          &lt;dbl&gt; 2021, 2021, 2021, 2021, 2021, 2021, 2021, 2021, 2021, 202‚Ä¶
## $ tx_aprov     &lt;dbl&gt; 94.31667, 94.20000, 97.25000, 99.46667, 98.80000, 99.3250‚Ä¶
## $ ensino       &lt;chr&gt; "fundamental", "fundamental", "fundamental", "fundamental‚Ä¶
## $ ideb         &lt;dbl&gt; 4.750000, 4.983333, 5.000000, 5.316667, 5.500000, 5.65000‚Ä¶
## $ geom         &lt;MULTIPOLYGON [¬∞]&gt; MULTIPOLYGON (((-62.19465 -..., MULTIPOLYGON‚Ä¶
```
]

&lt;!-- Com a jun√ß√£o realizada, temos uma base com: --&gt;

- A coluna `geom`, que cont√©m a **geometria dos munic√≠pios** ‚Äî os **pol√≠gonos** que usados para desenhar o mapa.
- A coluna `ideb`, com os **valores do √≠ndice de desenvolvimento da educa√ß√£o b√°sica** de cada munic√≠pio.

&lt;!-- Essas duas colunas s√£o essenciais para criar **mapas coropl√©ticos** (mapas onde as cores representam valores). --&gt;

&lt;/div&gt;
&lt;/div&gt;

---

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Mapa Brasil&lt;/div&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-232-1.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. Mapa Brasil ‚Äî C√≥digo&lt;/div&gt;

.tiny[

``` r
ggplot(ideb_mapa) +
* aes(geometry = geom) +
* geom_sf(aes(fill = ideb), color = NA) +
  scale_fill_viridis_c(na.value = "grey90",
                       alpha = 0.8,
                       name = "Ideb") +
  labs(
    title = "Notas m√©dias do Ideb para o Ensino Fundamental",
    subtitle = "nos munic√≠pios brasileiros em 2021",
    caption = paste(
      "Fonte: Bases dos Dados | Inep | {geobr} R package",
      "\nDuzentos e quarenta e um (241) munic√≠pios brasileiros",
      "\nn√£o possu√≠am notas do Ideb no ano de 2021"
    )
  ) +
  theme_void() +
  theme(plot.caption = element_text(lineheight = 1.1),
        legend.position = c(0.2, 0.25))
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;3. Mapa RS&lt;/div&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-234-1.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;4. Mapa RS ‚Äî C√≥digo&lt;/div&gt;

.tiny[

``` r
ideb_mapa |&gt;
  filter(abbrev_state == "RS") |&gt;
* ggplot(aes(geometry = geom)) +
* geom_sf(aes(fill = ideb)) +
  scale_fill_viridis_c(na.value = "grey90",
                       alpha = 0.6,
                       name = "Ideb") +
  labs(
    title = "Notas m√©dias do Ideb para o Ensino Fundamental",
    subtitle = "nos munic√≠pios do Rio Grande do Sul em 2021",
    caption = paste(
      "Fonte: Bases dos Dados | Inep | {geobr} R package",
      "\nTrinta e sete (37) munic√≠pios ga√∫chos n√£o possu√≠am",
      "\nnotas do Ideb no ano de 2021"
    )
  ) +
  theme_void() +
  theme(plot.caption = element_text(lineheight = 1.1),
        legend.position = c(0.2, 0.2))
```
]

&lt;/div&gt;
&lt;/div&gt;

---

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;1. Mapa RS + Cidades&lt;/div&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-236-1.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;2. Mapa RS + Cidades ‚Äî Manipula√ß√£o&lt;/div&gt;

Para adicionar os nomes das cidades ao mapa, criamos um `data.frame` contendo a digla do estado (`abbrev_state`), o nome dos munic√≠pios (`name_muni`) e suas respectivas coordenadas geogr√°ficas (`long` e `lat`).


``` r
cidade_rs &lt;- data.frame(
  abbrev_state = rep("RS", 5),
  name_muni = c(
    "Porto Alegre", "Caxias do Sul", "Canoas", "Pelotas", "Santa Maria"
  ),
  long = c(-30.032778,  -29.167778, -29.92, -31.771944, -29.683889),
  lat = c(-51.23, -51.178889, -51.18, -52.342778, -53.806944)
)
```

Esse `data.frame` √© utilizado como base nas fun√ß√µes `geom_point()` e `geom_text_repel()` para posicionar os marcadores e os r√≥tulos das cidades sobre o mapa.

O pacote [`{ggrepel}`](https://ggrepel.slowkow.com/) permite **inserir textos de forma inteligente**, evitando que os r√≥tulos se sobreponham. Ele ajusta automaticamente a posi√ß√£o de cada texto para garantir melhor leitura e visualiza√ß√£o, especialmente √∫til em regi√µes com alta densidade de pontos.

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;3. Mapa RS + Cidades ‚Äî Visualiza√ß√£o&lt;/div&gt;


``` r
ideb_mapa |&gt; 
  filter(abbrev_state == "RS") |&gt; 
  ggplot() +
  geom_sf(aes(geometry = geom, fill = ideb)) +
  scale_fill_viridis_c(alpha = 0.5, na.value = "grey90") +
* geom_point(data = cidade_rs, aes(x = lat, y = long), size = 1.5) +
* ggrepel::geom_text_repel(data = cidade_rs,
*   aes(x = lat, y = long, label = name_muni),
*   fontface = "bold", size = 4,
*   nudge_x = c(3, 2, 2, 2, -3),
*   nudge_y = c(0, 1, 0.5, -0.5, 1.5)) +
  labs(title = "Notas m√©dias do Ideb para o Ensino Fundamental",
    subtitle = "nos munic√≠pios do Rio Grande do Sul em 2021",
    caption =paste("Fonte: Bases dos Dados | Inep | {geobr} R package",
      "\nDentre as 5 principais cidades do RS, Caxias do Sul atingiu",
      "\na maior nota com 5.83, seguida de Santa Maria, Pelotas,",
      "\nCanoas e Porto Alegre. \nTrinta e sete (37) munic√≠pios ga√∫chos",
      "\nn√£o possu√≠am notas do Ideb no ano de 2021")) +
  theme_void() +
  theme(plot.caption = element_text(lineheight = 1.1),
    legend.position = c(0.2, 0.2))
```

&lt;/div&gt;

---

## Para saber mais!

.panelset[

.panel[.panel-name[Em Ingl√™s (1)]
.pull-left[
- [ggplot2 extensions ‚Äî gallery](https://exts.ggplot2.tidyverse.org/gallery/)

&lt;a href="https://exts.ggplot2.tidyverse.org/gallery/"&gt;
&lt;img src="img/43-ggplot-extensions.png" width="80%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;
]

.pull-right[
- [Livro R Cookbook (se√ß√£o de gr√°ficos)](http://www.cookbook-r.com/Graphs/)

&lt;a href="http://www.cookbook-r.com/Graphs/"&gt;
&lt;img src="img/44-r-cookbook.png" width="60%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;
]
]

.panel[.panel-name[Em Ingl√™s (2)]
.pull-left[
- [An Economist‚Äôs Guide to Visualizing Data](https://pubs.aeaweb.org/doi/pdf/10.1257/jep.28.1.209)

&lt;a href="https://pubs.aeaweb.org/doi/pdf/10.1257/jep.28.1.209"&gt;
&lt;img src="img/45-economist-guide-visualizing-data.png" width="50%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;
]

.pull-right[
- [Fundamentals of Data Visualization ](https://clauswilke.com/dataviz/)

&lt;a href="https://clauswilke.com/dataviz/"&gt;
&lt;img src="img/46-fundamentalz-data-viz.png" width="60%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;
]
]

]

---

class: inverse center middle
name: regressao

# Regress√£o Linear

.center[(Acompanhe no arquivo `05-regressao.R`)]

---

&lt;!-- class: inverse center middle --&gt;

# Dados Educacionais

---

### Importando as bases

.tiny[

``` r
# Bases do IDEB
ideb_fund  &lt;- readr::read_csv(
  "dados/ideb_fundamental.csv",
  col_types = cols(id_municipio = col_character(), ano = col_integer())
)
ideb_medio &lt;- readr::read_csv(
  "dados/ideb_medio.csv",
  col_types = cols(id_municipio = col_character(), ano = col_integer())
)

# Indicadores educacionais
indic_fund &lt;- readr::read_csv(
  "dados/indicadores_fundamental.csv",
  col_types = cols(id_municipio = col_character(), ano = col_integer())
)
indic_medio &lt;- readr::read_csv(
  "dados/indicadores_medio.csv",
  col_types = cols(id_municipio = col_character(), ano = col_integer())
)

# PIB per capita
pib_pop &lt;- readr::read_csv(
  "dados/pib_pc.csv",
  col_types = cols(id_municipio = col_character(), ano = col_integer())
)
```
]

---

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ideb&lt;/div&gt;


``` r
head(ideb_fund, n = 5)
```

```
## # A tibble: 5 √ó 5
##   id_municipio   ano tx_aprov ensino       ideb
##   &lt;chr&gt;        &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
## 1 1100015       2021     94.3 fundamental  4.75
## 2 1100023       2021     94.2 fundamental  4.98
## 3 1100049       2021     99.5 fundamental  5.32
## 4 1100064       2021     99.3 fundamental  5.65
## 5 1100072       2021     98.6 fundamental  5.32
```

``` r
head(ideb_medio, n = 5)
```

```
## # A tibble: 5 √ó 5
##   id_municipio   ano tx_aprov ensino  ideb
##   &lt;chr&gt;        &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1 1100304       2021     75.6 medio   3.55
## 2 1200435       2021     90   medio   2.9 
## 3 1300060       2021     89.4 medio   3   
## 4 1300201       2021     72.7 medio   2.2 
## 5 1300508       2021     87.1 medio   3.1
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ideb ‚Äî Dicion√°rio&lt;/div&gt;

As bases `ideb_fund` (Ensino Fundamental) e `ideb_medio` (Ensino M√©dio) cont√™m:

1. `id_municipio`: c√≥digo do IBGE de identifica√ß√£o do munic√≠pio

2. `tx_aprov`: taxa de aprova√ß√£o m√©dia do munic√≠pio

3. `ideb`: √≠ndice de desenvolvimento da educa√ß√£o b√°sica (Ideb) do munic√≠pio

  - Calculado com base nas taxas de aprova√ß√£o (Censo Escolar) e no desempenho no Saeb (Sistema de Avalia√ß√£o da Educa√ß√£o B√°sica)

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Indicadores&lt;/div&gt;


``` r
head(indic_fund, n = 5)
```

```
## # A tibble: 5 √ó 5
##     ano id_municipio tx_aband hrs_aula   tdi
##   &lt;int&gt; &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1  2021 1100015         0.167     4    21.9 
## 2  2021 1100023         1.63      4.41 13.6 
## 3  2021 1100031         0.355     4    10.7 
## 4  2021 1100049         0.493     4.49  9.31
## 5  2021 1100056         0.22      4.06  7.52
```

``` r
head(indic_medio, n = 5)
```

```
## # A tibble: 5 √ó 5
##     ano id_municipio tx_aband hrs_aula   tdi
##   &lt;int&gt; &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1  2021 1100015          1        4.77  44.5
## 2  2021 1100023          5.13     6.47  25.7
## 3  2021 1100031          3.8      4     19.3
## 4  2021 1100049          4.32     6.86  28.2
## 5  2021 1100056          9.51     6.89  24.3
```

&lt;/div&gt;


&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Indicadores ‚Äî Dicion√°rio&lt;/div&gt;

As bases `indic_fund` (Ensino Fundamental) e `indic_medio` (Ensino M√©dio) cont√™m indicadores educacionais como:

1. `id_municipio`: c√≥digo do IBGE de identifica√ß√£o do munic√≠pio

2. `tx_aband`: taxa m√©dia de abandono escolar por munic√≠pio

3. `hrs_aula`: m√©dia das horas de aula por munic√≠pio

4. `tdi`: taxa de distor√ß√£o idade-s√©rie por munic√≠pio

  - Propor√ß√£o de alunos com dois anos ou mais de atraso escolar.

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;PIB&lt;/div&gt;


``` r
head(pib_pop, n = 5)
```

```
## # A tibble: 5 √ó 4
##   id_municipio   ano        pib populacao
##   &lt;chr&gt;        &lt;int&gt;      &lt;dbl&gt;     &lt;dbl&gt;
## 1 1100015       2020  570272326     22728
## 2 1100023       2020 2818048618    109523
## 3 1100031       2020  167189811      5188
## 4 1100049       2020 2519352677     85893
## 5 1100056       2020  600670074     16204
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;PIB ‚Äî Dicion√°rio&lt;/div&gt;

A base `pib_pop` traz os seguintes dados para o ano de 2020:

1. `id_municipio`: c√≥digo do IBGE de identifica√ß√£o do munic√≠pio

2. `pib`: Produto Interno Bruto total do munic√≠pio

3. `populacao`: popula√ß√£o total do munic√≠pio

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

.right[O PIB _per capita_ ser√° calculado depois.]

&lt;/div&gt;
&lt;/div&gt;

---

### Padronizando as bases de dados

Preparamos as bases para an√°lise selecionando apenas as vari√°veis relevantes de cada uma. Tamb√©m criamos o PIB per capita a partir do PIB total e da popula√ß√£o.

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ideb: Fundamental&lt;/div&gt;

.tiny[

``` r
ideb_fundamental &lt;- ideb_fund |&gt; 
  select(id_municipio, tx_aprov, ideb)

ideb_fundamental
```

```
## # A tibble: 5,569 √ó 3
##    id_municipio tx_aprov  ideb
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
##  1 1100015          94.3  4.75
##  2 1100023          94.2  4.98
##  3 1100049          99.5  5.32
##  4 1100064          99.3  5.65
##  5 1100072          98.6  5.32
##  6 1100080          94.3  4.78
##  7 1100098          98.3  5.24
##  8 1100106          96.7  4.76
##  9 1100122          98.4  5.28
## 10 1100148         100    5.74
## # ‚Ñπ 5,559 more rows
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Ideb: M√©dio&lt;/div&gt;

.tiny[

``` r
ideb_medio &lt;- ideb_medio |&gt; 
  select(id_municipio, tx_aprov, ideb)

ideb_medio
```

```
## # A tibble: 5,557 √ó 3
##    id_municipio tx_aprov  ideb
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
##  1 1100304          75.6  3.55
##  2 1200435          90    2.9 
##  3 1300060          89.4  3   
##  4 1300201          72.7  2.2 
##  5 1300508          87.1  3.1 
##  6 1300607          87.4  2.8 
##  7 1300680          87.5  3.1 
##  8 1300805          87.2  3.1 
##  9 1300839          94.9  3.1 
## 10 1301407          88.6  3.9 
## # ‚Ñπ 5,547 more rows
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Indicadores: Fundamental&lt;/div&gt;

.tiny[

``` r
indicadores_fundamental &lt;- indic_fund |&gt; 
  select(id_municipio, tx_aband, hrs_aula, tdi)

indicadores_fundamental
```

```
## # A tibble: 5,570 √ó 4
##    id_municipio tx_aband hrs_aula   tdi
##    &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 1100015         0.167     4    21.9 
##  2 1100023         1.63      4.41 13.6 
##  3 1100031         0.355     4    10.7 
##  4 1100049         0.493     4.49  9.31
##  5 1100056         0.22      4.06  7.52
##  6 1100064         0         4.05  7.15
##  7 1100072         0         4.04 13.0 
##  8 1100080         2.87      4.2  23.2 
##  9 1100098         1.97      4.24 14.8 
## 10 1100106         2.28      4.14 27.2 
## # ‚Ñπ 5,560 more rows
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Indicadores: M√©dio&lt;/div&gt;

.tiny[

``` r
indicadores_medio &lt;- indic_medio |&gt; 
  select(id_municipio, tx_aband, hrs_aula, tdi)

indicadores_medio
```

```
## # A tibble: 5,570 √ó 4
##    id_municipio tx_aband hrs_aula   tdi
##    &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 1100015         1         4.77  44.5
##  2 1100023         5.13      6.47  25.7
##  3 1100031         3.8       4     19.3
##  4 1100049         4.32      6.86  28.2
##  5 1100056         9.51      6.89  24.3
##  6 1100064         0.98      7.04  16.5
##  7 1100072         0.8       4     21.9
##  8 1100080         0.133     4.5   34.3
##  9 1100098         0         5.66  31.3
## 10 1100106         8.68      6.18  46.2
## # ‚Ñπ 5,560 more rows
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;PIB per capita&lt;/div&gt;

.tiny[

``` r
pib_pc &lt;- pib_pop |&gt; 
* mutate(pib_pc = pib/populacao)  |&gt; # cria a vari√°vel PIB per capita
  select(id_municipio, pib_pc)  
  
pib_pc
```

```
## # A tibble: 5,570 √ó 2
##    id_municipio pib_pc
##    &lt;chr&gt;         &lt;dbl&gt;
##  1 1100015      25091.
##  2 1100023      25730.
##  3 1100031      32226.
##  4 1100049      29331.
##  5 1100056      37069.
##  6 1100064      23606.
##  7 1100072      37172.
##  8 1100080      13936.
##  9 1100098      20380.
## 10 1100106      21148.
## # ‚Ñπ 5,560 more rows
```
]

&lt;/div&gt;
&lt;/div&gt;

---

### Juntando as bases de dados: Ensino Fundamental

Reunimos em uma √∫nica base (`fundamental`) as vari√°veis de desempenho (`ideb`), perman√™ncia escolar (`tx_aprov`, `tx_aband`, `tdi`, `hrs_aula`) e contexto socioecon√¥mico (`pib_pc`), usando `id_municipio` como chave.

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;&lt;code&gt;left_join()&lt;/code&gt;&lt;/div&gt;

.tiny[

``` r
fundamental &lt;- left_join(ideb_fundamental, indicadores_fundamental, by = "id_municipio") |&gt; 
  left_join(pib_pc, by = "id_municipio")

fundamental
```

```
## # A tibble: 5,569 √ó 7
##    id_municipio tx_aprov  ideb tx_aband hrs_aula   tdi pib_pc
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 1100015          94.3  4.75    0.167     4    21.9  25091.
##  2 1100023          94.2  4.98    1.63      4.41 13.6  25730.
##  3 1100049          99.5  5.32    0.493     4.49  9.31 29331.
##  4 1100064          99.3  5.65    0         4.05  7.15 23606.
##  5 1100072          98.6  5.32    0         4.04 13.0  37172.
##  6 1100080          94.3  4.78    2.87      4.2  23.2  13936.
##  7 1100098          98.3  5.24    1.97      4.24 14.8  20380.
##  8 1100106          96.7  4.76    2.28      4.14 27.2  21148.
##  9 1100122          98.4  5.28    1.9       4.53 16.7  31210.
## 10 1100148         100    5.74    0         4.27  6.42 19687.
## # ‚Ñπ 5,559 more rows
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;&lt;code&gt;reduce()&lt;/code&gt;&lt;/div&gt;

.tiny[

``` r
fundamental &lt;- list(ideb_fundamental, indicadores_fundamental, pib_pc) %&gt;% 
  purrr::reduce(left_join)

fundamental
```

```
## # A tibble: 5,569 √ó 7
##    id_municipio tx_aprov  ideb tx_aband hrs_aula   tdi pib_pc
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 1100015          94.3  4.75    0.167     4    21.9  25091.
##  2 1100023          94.2  4.98    1.63      4.41 13.6  25730.
##  3 1100049          99.5  5.32    0.493     4.49  9.31 29331.
##  4 1100064          99.3  5.65    0         4.05  7.15 23606.
##  5 1100072          98.6  5.32    0         4.04 13.0  37172.
##  6 1100080          94.3  4.78    2.87      4.2  23.2  13936.
##  7 1100098          98.3  5.24    1.97      4.24 14.8  20380.
##  8 1100106          96.7  4.76    2.28      4.14 27.2  21148.
##  9 1100122          98.4  5.28    1.9       4.53 16.7  31210.
## 10 1100148         100    5.74    0         4.27  6.42 19687.
## # ‚Ñπ 5,559 more rows
```
]

.right[&lt;span style='font-size:80%'&gt;`reduce(left_join)` √© mais eficiente quando h√° muitas bases.&lt;/span&gt;]

&lt;/div&gt;
&lt;/div&gt;

---

### An√°lise Descritivas: Ensino Fundamental

&lt;!-- O objetivo √© **identificar padr√µes gerais, poss√≠veis outliers e assimetrias**. --&gt;

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Resumo estat√≠stico&lt;/div&gt;

O objetivo √© **identificar padr√µes gerais, poss√≠veis outliers e assimetrias**.

.tiny[

``` r
summary(fundamental)
```

```
##  id_municipio          tx_aprov           ideb          tx_aband      
##  Length:5569        Min.   : 64.00   Min.   :2.600   Min.   : 0.0000  
##  Class :character   1st Qu.: 95.16   1st Qu.:4.700   1st Qu.: 0.0750  
##  Mode  :character   Median : 97.95   Median :5.280   Median : 0.4364  
##                     Mean   : 96.44   Mean   :5.221   Mean   : 1.1324  
##                     3rd Qu.: 99.43   3rd Qu.:5.717   3rd Qu.: 1.3833  
##                     Max.   :100.00   Max.   :8.800   Max.   :20.8000  
##                     NA's   :76       NA's   :240                      
##     hrs_aula           tdi             pib_pc        
##  Min.   : 3.400   Min.   : 0.000   Min.   :    13.6  
##  1st Qu.: 4.185   1st Qu.: 7.275   1st Qu.:  9950.1  
##  Median : 4.400   Median :12.046   Median : 17632.7  
##  Mean   : 4.602   Mean   :13.680   Mean   : 25032.0  
##  3rd Qu.: 4.755   3rd Qu.:19.064   3rd Qu.: 32072.9  
##  Max.   :10.300   Max.   :53.300   Max.   :591101.1  
## 
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Histograma&lt;/div&gt;

.tiny[

``` r
fundamental |&gt; 
  ggplot(aes(x = ideb)) +
* geom_histogram()
```

&lt;img src="index_files/figure-html/unnamed-chunk-255-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Boxplot horizontal&lt;/div&gt;

.tiny[

``` r
fundamental |&gt; 
  ggplot() +
* aes(x = ideb) +
* geom_boxplot()
```

&lt;img src="index_files/figure-html/unnamed-chunk-256-1.png" width="87%" style="display: block; margin: auto;" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Boxplot vertical&lt;/div&gt;

.pull-left[
.tiny[

``` r
fundamental |&gt; 
  ggplot() +
* aes(y = ideb) +
* geom_boxplot()
```
]
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-258-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

&lt;/div&gt;
&lt;/div&gt;

---

### Regress√£o Linear: Ensino Fundamental

&lt;!-- **Ser√° que a taxa de distor√ß√£o idade-s√©rie (`tdi`) est√° positivamente relacionada √† taxa de abandono escolar (`tx_aband`)?** --&gt;

**Ser√° que a `tdi` est√° positivamente relacionada √† `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
fundamental |&gt; 
  ggplot(aes(x = tdi, y = tx_aband)) +
  geom_point() 
```

&lt;img src="index_files/figure-html/unnamed-chunk-259-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
fundamental |&gt; 
  ggplot(aes(x = tdi, y = tx_aband)) +
  geom_point() +
* geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-260-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[

``` r
modelo &lt;- lm(tx_aband ~ tdi, data = fundamental)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ tdi, data = fundamental)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.3881 -0.7446 -0.1523  0.3974 18.3472 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -0.568396   0.039688  -14.32   &lt;2e-16 ***
## tdi          0.124327   0.002501   49.71   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.501 on 5567 degrees of freedom
## Multiple R-squared:  0.3074,	Adjusted R-squared:  0.3073 
## F-statistic:  2471 on 1 and 5567 DF,  p-value: &lt; 2.2e-16
```
]

&lt;br&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:** 

A rela√ß√£o entre `tdi` e `tx_aband` √© **positiva**, com signific√¢ncia estat√≠stica (p &lt; 0.001).

O `\(R^2\)` do modelo √© 0.3074, ou seja, cerca de 30.74% da varia√ß√£o em `tx_aband` √© explicada por `tdi`.

**Equa√ß√£o estimada:**

$$
\text{tx_aband} = -0.568 + 0.124 \cdot \text{tdi}   
$$

**Interpreta√ß√£o:**

- A cada **1 p.p. de aumento em `tdi`**, espera-se um **aumento de 0.124 p.p. na `tx_aband`**.
- Esse resultado refor√ßa a hip√≥tese de que **quanto maior a distor√ß√£o idade-s√©rie**, **maior tende a ser a evas√£o escolar**.

&lt;/div&gt;
&lt;/div&gt;

---

&lt;!-- ### Regress√£o Linear: Ensino Fundamental --&gt;

&lt;!-- **Qual a rela√ß√£o entre a taxa de distor√ß√£o idade-s√©rie (`tdi`), a taxa de aprova√ß√£o (`tx_aprov`), as horas-aula (`hrs_aula`) e a taxa de abandono escolar (`tx_aband`)?** --&gt;

**Qual a rela√ß√£o entre `tdi`, `tx_aprov`, `hrs_aula` e `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.tiny[

``` r
modelo &lt;- lm(tx_aband ~ tdi + tx_aprov + hrs_aula, data = fundamental)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ tdi + tx_aprov + hrs_aula, data = fundamental)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.9012 -0.5380  0.0074  0.3868 13.5496 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 22.093790   0.459395  48.093   &lt;2e-16 ***
## tdi          0.059155   0.002466  23.985   &lt;2e-16 ***
## tx_aprov    -0.227616   0.004547 -50.054   &lt;2e-16 ***
## hrs_aula     0.039772   0.024120   1.649   0.0992 .  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.247 on 5489 degrees of freedom
##   (76 observations deleted due to missingness)
## Multiple R-squared:  0.525,	Adjusted R-squared:  0.5248 
## F-statistic:  2023 on 3 and 5489 DF,  p-value: &lt; 2.2e-16
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A taxa de distor√ß√£o idade-s√©rie (`tdi`) e as horas-aula (`hrs_aula`) apresentam rela√ß√£o **positiva** com a taxa de abandono escolar (`tx_aband`), enquanto a taxa de aprova√ß√£o (`tx_aprov`) tem rela√ß√£o **negativa**.

- `tdi`: **positiva**, estatisticamente significativa (p &lt; 0.001)
- `hrs_aula`: **positiva**, signific√¢ncia ao n√≠vel de 10% (p = 0.0992)
- `tx_aprov`: **negativa**, estatisticamente significativa (p &lt; 0.001)

O `\(R^2 = 0.525\)`, indicando que 52.5% da varia√ß√£o da taxa de abandono √© explicada pelas vari√°veis.

O **Teste F** √© estatisticamente significativo, mostrando que os par√¢metros s√£o conjuntamente relevantes.

**Equa√ß√£o estimada:**

$$
\text{tx_aband} = 22.093 + 0.059 \cdot \text{tdi} - 0.228 \cdot \text{tx_aprov} + 0.040 \cdot \text{hrs_aula}
$$

**Interpreta√ß√£o:**

- Aumento de **1 p.p. na `tdi`** resulta em **aumento de 0.059 p.p. na `tx_aband`** _(ceteris paribus)_.
- Aumento de **1 p.p. na `tx_aprov`** resulta em **redu√ß√£o de 0.228 p.p. na `tx_aband`** _(ceteris paribus)_.
- Aumento de **1 hora-aula** resulta em **aumento de 0.04 p.p. na `tx_aband`** _(ceteris paribus)_.

&lt;/div&gt;
&lt;/div&gt;

---

**Qual a rela√ß√£o entre `tdi`, `tx_aprov`, `pib_pc` e a `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.tiny[

``` r
modelo &lt;- lm(tx_aband ~ tdi + tx_aprov + pib_pc, data = fundamental)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ tdi + tx_aprov + pib_pc, data = fundamental)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.9172 -0.5341  0.0029  0.3950 13.4971 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  2.245e+01  4.543e-01  49.430  &lt; 2e-16 ***
## tdi          5.582e-02  2.491e-03  22.413  &lt; 2e-16 ***
## tx_aprov    -2.278e-01  4.501e-03 -50.621  &lt; 2e-16 ***
## pib_pc      -4.391e-06  6.038e-07  -7.272 4.04e-13 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.241 on 5489 degrees of freedom
##   (76 observations deleted due to missingness)
## Multiple R-squared:  0.5293,	Adjusted R-squared:  0.5291 
## F-statistic:  2058 on 3 and 5489 DF,  p-value: &lt; 2.2e-16
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A vari√°vel `tdi` apresenta rela√ß√£o **positiva** com a `tx_aband`, enquanto `tx_aprov` e `pib_pc` apresentam rela√ß√µes **negativas**.

- `tdi`: **positiva**, estatisticamente significativa (p &lt; 0.001)
- `tx_aprov`: **negativa**, estatisticamente significativa (p &lt; 0.001)
- `pib_pc`: **negativa**, estatisticamente significativa (p &lt; 0.001)

O `\(R^2 = 0.5293\)` indica que o modelo explica 52.93% da varia√ß√£o da `tx_aband`.

O **Teste F** confirma a signific√¢ncia conjunta dos par√¢metros.

**Equa√ß√£o estimada:**

$$
\text{tx_aband} = 22.438 + 0.056 \cdot \text{tdi} - 0.229 \cdot \text{tx_aprov} - 0.000004 \cdot \text{pib_pc}
$$

**Interpreta√ß√£o:**

- Aumento de **1 p.p. na `tdi`** resulta em **aumento de 0.056 p.p. na `tx_aband`** _(ceteris paribus)_.
- Aumento de **1 p.p. na `tx_aprov`** resulta em **redu√ß√£o de 0.229 p.p. na `tx_aband`** _(ceteris paribus)_.
- Aumento de **R$ 10000.00 no `pib_pc`** resulta em **redu√ß√£o de 0.04 p.p. na `tx_aband`** _(ceteris paribus)_.

&lt;/div&gt;
&lt;/div&gt;

---

### Juntando as bases de dados: Ensino M√©dio

Reunimos em uma √∫nica base (`medio`) as vari√°veis de desempenho (`ideb`), perman√™ncia escolar (`tx_aprov`, `tx_aband`, `tdi`, `hrs_aula`) e contexto socioecon√¥mico (`pib_pc`), usando `id_municipio` como chave.

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;&lt;code&gt;left_join()&lt;/code&gt;&lt;/div&gt;

.tiny[

``` r
medio &lt;- left_join(ideb_medio, indicadores_medio, by = "id_municipio") |&gt; 
  left_join(pib_pc, by = "id_municipio")

medio
```

```
## # A tibble: 5,557 √ó 7
##    id_municipio tx_aprov  ideb tx_aband hrs_aula   tdi pib_pc
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 1100304          75.6  3.55     2.94     4.56  31.3 30848.
##  2 1200435          90    2.9      9.9      4.93  54.1 12526.
##  3 1300060          89.4  3        4.87     4     46.3  8689.
##  4 1300201          72.7  2.2     21.4      3.87  62.0  8469.
##  5 1300508          87.1  3.1      5.83     4.8   47.8  9653.
##  6 1300607          87.4  2.8      8        5.67  35.7  7951.
##  7 1300680          87.5  3.1     11.8      3.87  47.2  8229.
##  8 1300805          87.2  3.1      6.63     4.97  42.2  8659.
##  9 1300839          94.9  3.1      2.23     3.83  44.6 12846.
## 10 1301407          88.6  3.9      1.08     7.05  29.0  1409.
## # ‚Ñπ 5,547 more rows
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;&lt;code&gt;reduce()&lt;/code&gt;&lt;/div&gt;

.tiny[

``` r
medio &lt;- list(ideb_medio, indicadores_medio, pib_pc) |&gt; 
  purrr::reduce(left_join)

medio
```

```
## # A tibble: 5,557 √ó 7
##    id_municipio tx_aprov  ideb tx_aband hrs_aula   tdi pib_pc
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 1100304          75.6  3.55     2.94     4.56  31.3 30848.
##  2 1200435          90    2.9      9.9      4.93  54.1 12526.
##  3 1300060          89.4  3        4.87     4     46.3  8689.
##  4 1300201          72.7  2.2     21.4      3.87  62.0  8469.
##  5 1300508          87.1  3.1      5.83     4.8   47.8  9653.
##  6 1300607          87.4  2.8      8        5.67  35.7  7951.
##  7 1300680          87.5  3.1     11.8      3.87  47.2  8229.
##  8 1300805          87.2  3.1      6.63     4.97  42.2  8659.
##  9 1300839          94.9  3.1      2.23     3.83  44.6 12846.
## 10 1301407          88.6  3.9      1.08     7.05  29.0  1409.
## # ‚Ñπ 5,547 more rows
```
]

.right[&lt;span style='font-size:80%'&gt;`reduce(left_join)` √© mais eficiente quando h√° muitas bases.&lt;/span&gt;]

&lt;/div&gt;
&lt;/div&gt;

---

### An√°lise Descritivas: Ensino M√©dio

&lt;!-- O objetivo √© **identificar padr√µes gerais, poss√≠veis outliers e assimetrias**. --&gt;

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Resumo estat√≠stico&lt;/div&gt;

O objetivo √© **identificar padr√µes gerais, poss√≠veis outliers e assimetrias**.

.tiny[

``` r
summary(medio)
```

```
##  id_municipio          tx_aprov           ideb          tx_aband      
##  Length:5557        Min.   : 37.10   Min.   :2.000   Min.   : 0.0000  
##  Class :character   1st Qu.: 86.70   1st Qu.:3.800   1st Qu.: 0.5333  
##  Mode  :character   Median : 93.80   Median :4.200   Median : 2.7750  
##                     Mean   : 90.89   Mean   :4.172   Mean   : 5.1947  
##                     3rd Qu.: 97.90   3rd Qu.:4.600   3rd Qu.: 7.1400  
##                     Max.   :100.00   Max.   :6.400   Max.   :50.1000  
##                     NA's   :132      NA's   :2138                     
##     hrs_aula           tdi            pib_pc        
##  Min.   : 3.000   Min.   : 0.00   Min.   :    13.6  
##  1st Qu.: 4.333   1st Qu.:15.40   1st Qu.:  9948.5  
##  Median : 4.800   Median :23.30   Median : 17596.6  
##  Mean   : 5.231   Mean   :25.74   Mean   : 25023.3  
##  3rd Qu.: 5.725   3rd Qu.:34.20   3rd Qu.: 32063.3  
##  Max.   :15.500   Max.   :74.90   Max.   :591101.1  
## 
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Histograma&lt;/div&gt;

.tiny[

``` r
medio |&gt; 
  ggplot(aes(x = ideb)) +
* geom_histogram()
```

&lt;img src="index_files/figure-html/unnamed-chunk-267-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Boxplot horizontal&lt;/div&gt;

.tiny[

``` r
medio |&gt; 
  ggplot() +
* aes(x = ideb) +
* geom_boxplot()
```

&lt;img src="index_files/figure-html/unnamed-chunk-268-1.png" width="87%" style="display: block; margin: auto;" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Boxplot vertical&lt;/div&gt;

.pull-left[
.tiny[

``` r
medio |&gt; 
  ggplot() +
* aes(y = ideb) +
* geom_boxplot()
```
]
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-270-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

&lt;/div&gt;
&lt;/div&gt;

---

### Regress√£o Linear: Ensino M√©dio

**Existe rela√ß√£o entre `ideb` e a `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
medio |&gt;  
  ggplot(aes(x = ideb, y = tx_aband)) +
  geom_point()
```

&lt;img src="index_files/figure-html/unnamed-chunk-271-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
medio |&gt;  
  ggplot(aes(x = ideb, y = tx_aband)) +
  geom_point() + 
* geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-272-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[
.tiny[

``` r
modelo &lt;- lm(tx_aband ~ ideb, data = medio)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ ideb, data = medio)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -11.5403  -2.4673  -0.5747   1.6307  29.4115 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  22.2989     0.4654   47.91   &lt;2e-16 ***
## ideb         -4.4828     0.1103  -40.62   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.988 on 3417 degrees of freedom
##   (2138 observations deleted due to missingness)
## Multiple R-squared:  0.3257,	Adjusted R-squared:  0.3255 
## F-statistic:  1650 on 1 and 3417 DF,  p-value: &lt; 2.2e-16
```
]
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A rela√ß√£o entre o desempenho escolar (`ideb`) e a taxa de abandono (`tx_aband`) √© **negativa**, com alta signific√¢ncia estat√≠stica (p &lt; 0.001).

O coeficiente de determina√ß√£o `\(R^2 = 0.3257\)` indica que, aproximadamente, 32.57% da varia√ß√£o da taxa de abandono (`tx_aband`) √© explicada pelo desempenho no Ideb (`ideb`). 

**Equa√ß√£o estimada:**

$$
\text{tx_aband} = 22.2989 - 4.4828 \cdot \text{ideb}
$$

**Interpreta√ß√£o:**

- Um **aumento de 1 ponto no `ideb`** resulta, em m√©dia, em uma **redu√ß√£o de 4.48 p.p. na `tx_aband`** do ensino m√©dio, **ceteris paribus**.
- Munic√≠pios com melhores desempenhos educacionais no ensino m√©dio apresentam taxas de abandono escolar significativemente menores.


&lt;/div&gt;
&lt;/div&gt;

---

**Qual a rela√ß√£o entre `hrs_aula` e a `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
medio |&gt;  
  ggplot(aes(x = tx_aprov, y = tx_aband)) +
  geom_point() 
```

&lt;img src="index_files/figure-html/unnamed-chunk-274-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
medio |&gt; 
  ggplot(aes(x = tx_aprov, y = tx_aband)) +
  geom_point() +
* geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-275-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[
.tiny[

``` r
modelo &lt;- lm(tx_aband ~ tx_aprov, data = medio)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ tx_aprov, data = medio)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -33.664  -1.462  -0.120   1.575  21.338 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 56.044660   0.565009   99.19   &lt;2e-16 ***
## tx_aprov    -0.559250   0.006184  -90.44   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 4.241 on 5423 degrees of freedom
##   (132 observations deleted due to missingness)
## Multiple R-squared:  0.6013,	Adjusted R-squared:  0.6012 
## F-statistic:  8179 on 1 and 5423 DF,  p-value: &lt; 2.2e-16
```
]
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A vari√°vel `tx_aprov` apresenta uma rela√ß√£o **negativa** com a `tx_aband` no ensino m√©dio. Essa rela√ß√£o √© estatisticamente significativa (p &lt; 0.001).

O `\(R^2\)` √© igual a 0.6013, indicando que, aproximadamente, 60.13% da varia√ß√£o na `tx_aband` escolar pode ser explicada pela `tx_aprov`.

**Equa√ß√£o estimada:**

$$
\text{tx_aband} = 56.04 - 0.595 \cdot \text{tx_aprov}
$$

**Interpreta√ß√£o:**

- A cada **aumento de 1 p.p. na `tx_aprov`**, h√° uma **redu√ß√£o estimada de 0.559 p.p. na `tx_aband`**, _ceteris paribus_.
- Esse efeito √© estatisticamente significativo e indica uma **forte associa√ß√£o inversa** entre as vari√°veis: **quanto maior a aprova√ß√£o, menor o abandono**.

&lt;/div&gt;
&lt;/div&gt;

---

**Qual a rela√ß√£o entre `hrs_aula` e a `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
medio |&gt;  
  ggplot(aes(x = hrs_aula, y = tx_aband)) +
  geom_point() 
```

&lt;img src="index_files/figure-html/unnamed-chunk-277-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
medio |&gt;  
  ggplot(aes(x = hrs_aula, y = tx_aband)) +
  geom_point() +
* geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-278-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[
.tiny[

``` r
modelo &lt;- lm(tx_aband ~ hrs_aula, data = medio)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ hrs_aula, data = medio)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -7.074 -4.395 -1.906  1.842 43.794 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 10.28548    0.35771   28.75   &lt;2e-16 ***
## hrs_aula    -0.97324    0.06629  -14.68   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 6.557 on 5555 degrees of freedom
## Multiple R-squared:  0.03736,	Adjusted R-squared:  0.03718 
## F-statistic: 215.6 on 1 and 5555 DF,  p-value: &lt; 2.2e-16
```
]
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A rela√ß√£o entre `hrs_aula` e a `tx_aband` √© **negativa**, com alta signific√¢ncia estat√≠stica (p &lt; 0.001).

O `\(R^2\)` √© igual a 0.03736, o que indica que aproximadamente 3.736% da varia√ß√£o na `tx_aband` √© explicada pelo n√∫mero de horas-aula semanais (`hrs_aula`).
 
**Equa√ß√£o estimada:**

$$
\text{tx_aband} = 10{,}285 - 0{,}973 \cdot \text{hrs_aula}
$$

**Interpreta√ß√£o:**

- Um **aumento de 1 hrs_aula** est√° associado a uma **redu√ß√£o de 0.9732 p.p. na `tx_aband`**, _ceteris paribus_.

&lt;/div&gt;
&lt;/div&gt;

---

**Qual a rela√ß√£o entre `tx_aprov`, `tdi`, `hrs_aula`, `pib_pc` e a `tx_aband`?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;



&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;



&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[
.tiny[

``` r
modelo &lt;- lm(tx_aband ~ tx_aprov + tdi + hrs_aula + pib_pc,data = medio)
summary(modelo)
```

```
## 
## Call:
## lm(formula = tx_aband ~ tx_aprov + tdi + hrs_aula + pib_pc, data = medio)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -31.677  -1.677   0.049   1.714  21.847 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  4.994e+01  6.898e-01  72.402  &lt; 2e-16 ***
## tx_aprov    -5.038e-01  6.756e-03 -74.565  &lt; 2e-16 ***
## tdi          8.258e-02  4.669e-03  17.686  &lt; 2e-16 ***
## hrs_aula    -1.363e-01  4.297e-02  -3.171  0.00153 ** 
## pib_pc      -1.428e-05  2.034e-06  -7.021 2.48e-12 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 4.073 on 5420 degrees of freedom
##   (132 observations deleted due to missingness)
## Multiple R-squared:  0.6325,	Adjusted R-squared:  0.6322 
## F-statistic:  2332 on 4 and 5420 DF,  p-value: &lt; 2.2e-16
```
]
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A vari√°vel `tdi` apresenta rela√ß√£o **positiva** com a `tx_aband`, enquanto `tx_aprov`, `hrs_aula` e `pib_pc` apresentam rela√ß√µes **negativas** e estat√≠sticamente significativas.

&lt;!-- - `tdi`: **positiva**, estatisticamente significativa (p &lt; 0.001) --&gt;
&lt;!-- - `tx_aprov`: **negativa**, estatisticamente significativa (p &lt; 0.001) --&gt;
&lt;!-- - `hrs_aula`: **negativa**, signific√¢ncia ao n√≠vel de 1% (p = 0.00153) --&gt;
&lt;!-- - `pib_pc`: **negativa**, estatisticamente significativa (p &lt; 0.001) --&gt;

O `\(R^2 = 0.6325\)` indica que o modelo explica 63.25% da varia√ß√£o da `tx_aband`.

O **Teste F** confirma a signific√¢ncia conjunta dos par√¢metros.
 
**Equa√ß√£o estimada:**

$$
\text{tx_aband} = 49.94 - 0.504 \cdot \text{tx_aprov} + 0.083 \cdot \text{tdi} - 0.136 \cdot \text{hrs_aula} - 0.00001 \cdot \text{pibpc}
$$

**Interpreta√ß√£o:**

- A cada **aumento de 1 p.p. na `tx_aprov`**, espera-se uma **redu√ß√£o de 0.504 p.p. na `tx_aband`**, _ceteris paribus_.
- A cada **aumento de 1 p.p. na `tdi`**, espera-se um **aumento de 0.083 p.p. na `tx_aband`**, _ceteris paribus_.
- Um **aumento de 1 hora-aula m√©dia (`hrs_aula`) por semana** est√° associado a uma **redu√ß√£o de 0.136 p.p. na `tc_aband`**, _ceteris paribus_. 
  - Sugerindo que maior carga hor√°ria pode estar relacionada √† perman√™ncia dos alunos na escola.
- Um **aumento de R$ 10000 no `pib_pc`** est√° associado a uma **redu√ß√£o de 0.1 p.p. na `tx_aband`**, _ceteris paribus_.

&lt;/div&gt;
&lt;/div&gt;

---

### &lt;span style='color:#34a15a'&gt;BASE DOS DADOS&lt;/span&gt;

&lt;span style='color:#34a15a'&gt;&lt;b&gt;Importando a base da BigQuery para o R:&lt;/b&gt;&lt;/span&gt;


``` r
# instala o pacote (se ainda n√£o estiver instalado)
# install.packages("basedosdados")

# carrega o pacote
library(basedosdados)

# define o ID do projeto da Google Cloud (BigQuery)
# faz a liga√ß√£o entre o R e a BigQuery do Google
set_billing_id("ID-DO-PROJETO")
```


``` sql
-- exemplo sem filtro
SELECT coluna1, coluna2, coluna3,
coluna4 AS apelido_da_coluna
FROM `basedosdados.projeto.tabela`

-- exemplo com filtro
SELECT coluna1, coluna2, coluna3,
coluna4 AS apelido_da_coluna
FROM `basedosdados.projeto.tabela`
WHERE coluna1 = 'valor1' AND coluna2 = 'valor2'
```

---

### Atlas do Desenvolvimento Humano

O **Atlas do Desenvolvimento Humano no Brasil** √© uma plataforma criada em parceria entre o Programa das Na√ß√µes Unidas para o Desenvolvimento (PNUD), o Instituto de Pesquisa Econ√¥mica Aplicada (IPEA) e a Funda√ß√£o Jo√£o Pinheiro (FJP). Seu objetivo √© **facilitar o acesso a informa√ß√µes estat√≠sticas sobre as caracter√≠sticas e desigualdades sociais do pa√≠s**, sendo uma das principais ferramentas de divulga√ß√£o de dados sobre o desenvolvimento humano no Brasil.

O Atlas apresenta o **√çndice de Desenvolvimento Humano Municipal (IDH-M)**, al√©m de disponibilizar mais de **330 indicadores** que abordam temas como educa√ß√£o, sa√∫de, habita√ß√£o, renda, trabalho, vulnerabilidade social, meio ambiente e participa√ß√£o pol√≠tica. Esses dados est√£o organizados para os 5.570 munic√≠pios brasileiros, 5 macrorregi√µes, 27 Unidades da Federa√ß√£o, 21 regi√µes metropolitanas, 3 regi√µes integradas de desenvolvimento (RIDEs) e cerca de 17 mil Unidades de Desenvolvimento Humano (UDHs), que representam os "bairros" ‚Äî as menores territorialidades analisadas, diretamente relacionadas √† realidade local da popula√ß√£o.

Al√©m dos dados provenientes dos Censos Demogr√°ficos de 1991, 2000 e 2010, o projeto passou a incorporar informa√ß√µes da Pesquisa Nacional por Amostra de Domic√≠lios (PNAD) e de registros administrativos e cadastrais. O Atlas tamb√©m oferece indicadores desagregados por grupos sociais, como mulheres, homens, negros, brancos e popula√ß√µes rurais e urbanas, o que amplia a capacidade anal√≠tica sobre as desigualdades e o desenvolvimento em diferentes contextos.

&lt;br&gt;

.right[Fonte: [Atlas Brasil](http://www.atlasbrasil.org.br)]

---

### Atlas do Desenvolvimento Humano ‚Äî importando a base de dados




``` r
# consulta SQL √† base do ADH via basedosdados
adh &lt;- "SELECT id_municipio, ano, mortalidade_1, mortalidade_5, taxa_freq_liquida_pre,
indice_gini,prop_pobreza_extrema_criancas, prop_pobreza_criancas, prop_vulner_pobreza_criancas, 
taxa_agua_esgoto_inadequados, taxa_criancas_fora_escola_4_5
FROM `basedosdados.mundo_onu_adh.municipio`" |&gt; 
  basedosdados::read_sql()

# visualiza a estrutura da base
glimpse(adh)
```

```
## Rows: 16,695
## Columns: 11
## $ id_municipio                  &lt;chr&gt; "1100031", "1100056", "1100262", "110080‚Ä¶
## $ ano                           &lt;int64&gt; 1991, 2000, 2000, 1991, 1991, 1991, 19‚Ä¶
## $ mortalidade_1                 &lt;dbl&gt; 41.52, 27.50, 28.31, 54.65, 59.58, 41.14‚Ä¶
## $ mortalidade_5                 &lt;dbl&gt; 52.94, 32.93, 33.90, 69.43, 75.59, 52.47‚Ä¶
## $ taxa_freq_liquida_pre         &lt;dbl&gt; 0.00, 14.04, 17.15, 15.81, 2.24, 4.25, 2‚Ä¶
## $ indice_gini                   &lt;dbl&gt; 0.70, 0.69, 0.75, 0.71, 0.70, 0.78, 0.71‚Ä¶
## $ prop_pobreza_extrema_criancas &lt;dbl&gt; 67.41, 22.22, 59.89, 33.60, 59.61, 60.61‚Ä¶
## $ prop_pobreza_criancas         &lt;dbl&gt; 82.74, 46.00, 100.00, 67.87, 82.29, 81.0‚Ä¶
## $ prop_vulner_pobreza_criancas  &lt;dbl&gt; 91.22, 71.37, 100.00, 89.24, 93.75, 92.1‚Ä¶
## $ taxa_agua_esgoto_inadequados  &lt;dbl&gt; 0.63, 24.82, 42.05, 9.60, 7.80, 5.09, 5.‚Ä¶
## $ taxa_criancas_fora_escola_4_5 &lt;dbl&gt; NA, 76.09, 74.15, NA, NA, NA, NA, NA, NA‚Ä¶
```

---

**Ser√° que a mortalidade infantil (at√© 1 ano) se relaciona com a taxa de √°gua e esgoto inadequados?**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
adh |&gt; 
  ggplot(aes(x = taxa_agua_esgoto_inadequados, y = mortalidade_1)) +
  geom_point() 
```

&lt;img src="index_files/figure-html/unnamed-chunk-284-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
adh |&gt;  
  ggplot(aes(x = taxa_agua_esgoto_inadequados, y = mortalidade_1)) +
  geom_point() +
* geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-285-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[
.tiny[

``` r
modelo &lt;- lm(mortalidade_1 ~ taxa_agua_esgoto_inadequados, data = adh)
summary(modelo)
```

```
## 
## Call:
## lm(formula = mortalidade_1 ~ taxa_agua_esgoto_inadequados, data = adh)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -59.422 -10.285  -3.636   7.427  81.355 
## 
## Coefficients:
##                               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                  24.098839   0.149584   161.1   &lt;2e-16 ***
## taxa_agua_esgoto_inadequados  0.689124   0.006565   105.0   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 15.69 on 16693 degrees of freedom
## Multiple R-squared:  0.3976,	Adjusted R-squared:  0.3976 
## F-statistic: 1.102e+04 on 1 and 16693 DF,  p-value: &lt; 2.2e-16
```
]
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A taxa de domic√≠lios com acesso inadequado a √°gua e esgoto (`taxa_agua_esgoto_inadequados`) apresenta uma rela√ß√£o **positiva** com a mortalidade infantil (`mortalidade_1`), com signific√¢ncia estat√≠stica (p &lt; 0.001).

O coeficiente de determina√ß√£o (`\(R^2\)`) √© 0.3976, indicando que cerca de 39.76% da varia√ß√£o na mortalidade infantil √© explicada pela taxa de infraestrutura inadequada.
 
**Equa√ß√£o estimada:**

$$
\text{mortalidade_1} = 24.0988 + 0.6891 \cdot \text{taxa_agua_esgoto_inadequados}
$$

**Interpreta√ß√£o:**

- Um **aumento de 1 p.p. na taxa de domic√≠lios com √°gua e esgoto inadequados** est√° associado a um **aumento de 0.6891 √≥bitos por mil nascidos vivos** na taxa de mortalidade infantil, _ceteris paribus_.

&lt;/div&gt;
&lt;/div&gt;

---

**Rela√ß√£o entre a propor√ß√£o de extrema pobreza em crian√ßas e a mortalidade infantil (at√© 5 anos)**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
adh |&gt;  
  ggplot(aes(x = prop_pobreza_extrema_criancas, y = mortalidade_5)) +
  geom_point() 
```

&lt;img src="index_files/figure-html/unnamed-chunk-287-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
adh |&gt;  
  ggplot(aes(x = prop_pobreza_extrema_criancas, y = mortalidade_5)) +
  geom_point() +
* geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-288-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o linear&lt;/div&gt;

.scroll-output[
.tiny[

``` r
modelo &lt;- lm(mortalidade_5 ~ prop_pobreza_extrema_criancas, data = adh)
summary(modelo)
```

```
## 
## Call:
## lm(formula = mortalidade_5 ~ prop_pobreza_extrema_criancas, data = adh)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -74.322  -8.357  -0.638   6.418  87.053 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                   13.712534   0.196014   69.96   &lt;2e-16 ***
## prop_pobreza_extrema_criancas  0.954348   0.005484  174.03   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 15.92 on 16693 degrees of freedom
## Multiple R-squared:  0.6447,	Adjusted R-squared:  0.6446 
## F-statistic: 3.029e+04 on 1 and 16693 DF,  p-value: &lt; 2.2e-16
```
]
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Resultado:**

A propor√ß√£o de crian√ßas em extrema pobreza (`prop_pobreza_extrema_criancas`) possui rela√ß√£o **positiva** com a mortalidade infantil de at√© 5 anos (`mortalidade_5`). A vari√°vel √© estatisticamente significativa (p &lt; 0.001).

O coeficiente de determina√ß√£o √© `\(R^2 = 0.6447\)`, ou seja, cerca de 64.47% da variabilidade na mortalidade infantil √© explicada pelo modelo.
 
**Equa√ß√£o estimada:**

$$
\text{mortalidade_5} = 13.7125 + 0.9543 \cdot \text{prop_pobreza_extrema_criancas}
$$

**Interpreta√ß√£o:**

- Um **aumento de 1 p.p. na `prop_pobreza_extrema_criancas`** est√° associado a um **aumento de 0.9543 √≥bitos por mil nascidos vivos** na `mortalidade_5`, _ceteris paribus_.

&lt;/div&gt;
&lt;/div&gt;

---

**Padr√£o regional: pobreza infantil extrema e mortalidade at√© 5 anos**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Importando dados&lt;/div&gt;

Primeiro, importamos os dados de regi√£o dos munic√≠pios e unimos √† base `adh` com um `left_join()`:

.tiny[

``` r
regiao &lt;- "SELECT id_municipio, nome_regiao 
FROM `basedosdados.br_bd_diretorios_brasil.municipio`" |&gt; 
  read_sql()

dados &lt;- left_join(adh, regiao, by = "id_municipio")
```
]

&lt;!-- Agora, a base `dados` tem os dados de `adh` e os dados de `regiao`. --&gt;


```
## Rows: 16,695
## Columns: 12
## $ id_municipio                  &lt;chr&gt; "1100031", "1100056", "1100262", "110080‚Ä¶
## $ ano                           &lt;int64&gt; 1991, 2000, 2000, 1991, 1991, 1991, 19‚Ä¶
## $ mortalidade_1                 &lt;dbl&gt; 41.52, 27.50, 28.31, 54.65, 59.58, 41.14‚Ä¶
## $ mortalidade_5                 &lt;dbl&gt; 52.94, 32.93, 33.90, 69.43, 75.59, 52.47‚Ä¶
## $ taxa_freq_liquida_pre         &lt;dbl&gt; 0.00, 14.04, 17.15, 15.81, 2.24, 4.25, 2‚Ä¶
## $ indice_gini                   &lt;dbl&gt; 0.70, 0.69, 0.75, 0.71, 0.70, 0.78, 0.71‚Ä¶
## $ prop_pobreza_extrema_criancas &lt;dbl&gt; 67.41, 22.22, 59.89, 33.60, 59.61, 60.61‚Ä¶
## $ prop_pobreza_criancas         &lt;dbl&gt; 82.74, 46.00, 100.00, 67.87, 82.29, 81.0‚Ä¶
## $ prop_vulner_pobreza_criancas  &lt;dbl&gt; 91.22, 71.37, 100.00, 89.24, 93.75, 92.1‚Ä¶
## $ taxa_agua_esgoto_inadequados  &lt;dbl&gt; 0.63, 24.82, 42.05, 9.60, 7.80, 5.09, 5.‚Ä¶
## $ taxa_criancas_fora_escola_4_5 &lt;dbl&gt; NA, 76.09, 74.15, NA, NA, NA, NA, NA, NA‚Ä¶
## $ nome_regiao                   &lt;chr&gt; "Norte", "Norte", "Norte", "Norte", "Nor‚Ä¶
```

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;sem linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
dados |&gt; 
  ggplot(aes(x = prop_pobreza_extrema_criancas, y = mortalidade_5, color = nome_regiao)) +
  geom_point(alpha = 0.5) +
  scale_color_brewer(palette = "Set2")
```

&lt;img src="index_files/figure-html/unnamed-chunk-292-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;com linha de tend√™ncia&lt;/div&gt;

.tiny[

``` r
dados |&gt;  
  ggplot(aes(x = prop_pobreza_extrema_criancas, y = mortalidade_5, color = nome_regiao)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", se = FALSE) + 
  scale_color_brewer(palette = "Set2")
```

&lt;img src="index_files/figure-html/unnamed-chunk-293-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

**Existe padr√£o regional?**

Sim. Munic√≠pios das regi√µes **Norte e Nordeste** apresentam os maiores n√≠veis de:

- Mortalidade infantil (at√© 5 anos) (`mortalidade_5`)

- Propor√ß√£o de crian√ßas em extrema pobreza (`prop_pobreza_extrema_criancas`)

As demais regi√µes tendem a se concentrar em n√≠veis mais baixos desses dois indicadores.

A tend√™ncia √© **positiva em todas as regi√µes**, mas a intensidade da rela√ß√£o parece variar regionalmente.

&lt;br&gt;

**Observa√ß√£o:**

Esse tipo de visualiza√ß√£o refor√ßa a import√¢ncia de **an√°lises desagregadas por regi√£o**, pois a **m√©dia nacional pode mascarar desigualdades territoriais** importantes.

&lt;/div&gt;
&lt;/div&gt;

---

**Rela√ß√£o entre crian√ßas fora da escola (4 e 5 anos) e a propor√ß√£o de crian√ßas na extrema pobreza**

.tiny[

``` r
dados |&gt;  
  ggplot() +
  aes(x = prop_pobreza_extrema_criancas, y = taxa_criancas_fora_escola_4_5, color = nome_regiao) +
  geom_point(alpha = 0.5) +
  scale_color_brewer(palette = "Set2") +
* geom_smooth(method = "lm", se = FALSE) # linha de tend√™ncia para cada regi√£o do Brasil
```

&lt;img src="index_files/figure-html/unnamed-chunk-294-1.png" width="100%" /&gt;
]

&lt;span style='font-size:90%'&gt;Observa-se &lt;b&gt;varia√ß√£o na inclina√ß√£o da rela√ß√£o entre pobreza extrema e crian√ßas fora da escola entre as regi√µes&lt;/b&gt;. No Sul, essa associa√ß√£o √© mais forte ‚Äî indicando que o aumento da pobreza extrema est√° mais fortemente ligado √† evas√£o escolar nessa faixa et√°ria ‚Äî enquanto no Nordeste o efeito √© menos pronunciado.&lt;/span&gt;

---

**Evolu√ß√£o da Mortalidade Infantil (at√© 1 ano) por Regi√£o ‚Äî 1991, 2000 e 2010**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;gr√°fico de pontos&lt;/div&gt;

.tiny[

``` r
dados |&gt; 
  group_by(ano, nome_regiao) |&gt;  
  summarise(media = mean(mortalidade_1, na.rm = TRUE)) |&gt; 
  ggplot(aes(x = media, y = nome_regiao, color = as.factor(ano))) +
* geom_point(size = 4)
```

&lt;img src="index_files/figure-html/unnamed-chunk-295-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;gr√°fico de barras&lt;/div&gt;

.tiny[

``` r
dados |&gt; 
  group_by(ano, nome_regiao) |&gt; 
  summarise(media = mean(mortalidade_1, na.rm = TRUE)) |&gt;  
  ggplot(aes(x = nome_regiao, y = media, fill = as.factor(ano))) +
* geom_bar(stat = "identity", position = "dodge") # indica como as barras devem ser posicionadas
```

&lt;img src="index_files/figure-html/unnamed-chunk-296-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;



Os gr√°ficos mostram duas formas de representar a **m√©dia da mortalidade infantil (at√© 1 ano)** por regi√£o brasileira, nos anos de **1991, 2000 e 2010**. Em todas as regi√µes, observa-se uma **queda consistente** ao longo do per√≠odo analisado.

&lt;br&gt;

**Redu√ß√µes percentuais por regi√£o:**

- **Centro-Oeste:** redu√ß√£o de 4.91 p.p. (1991‚Äî2000); redu√ß√£o 10.815515 p.p. (2000‚Äî2010)

- **Nordeste:** redu√ß√£o de 27.11 p.p. (1991‚Äì2000); redu√ß√£o de 21.9 p.p. (2000‚Äì2010)

- **Norte:** redu√ß√£o de 18.52 p.p. (1991‚Äì2000); redu√ß√£o de 16.64 p.p. (2000‚Äì2010)

- **Sudeste:** redu√ß√£o de 8.77 p.p. (1991‚Äì2000); redu√ß√£o de 9.08 p.p. (2000‚Äì2010)

- **Sul:** redu√ß√£o de 9.04 p.p. (1991‚Äì2000); redu√ß√£o de 6.55 p.p. (2000‚Äì2010)

&lt;/div&gt;
&lt;/div&gt;

---

### Mapas

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;introdu√ß√£o&lt;/div&gt;

Para criar mapas com dados municipais, usamos o pacote [{geobr}](https://github.com/ipeaGIT/geobr), que fornece as malhas espaciais do Brasil em diferentes n√≠veis (munic√≠pios, estados etc.). Em seguida, realizamos um `left_join()` com nossa base de indicadores (`dados`) para unir as informa√ß√µes socioecon√¥micas e geogr√°ficas.

.tiny[

``` r
muni &lt;- geobr::read_municipality(year = 2010) |&gt; 
  mutate(code_muni = as.character(code_muni))

muni_dados &lt;- left_join(muni, dados, by = c("code_muni" = "id_municipio"))
```
]

O resultado √© uma base geogr√°fica completa (`muni_dados`) pronta para visualiza√ß√£o com `ggplot2` + `geom_sf()`.

.tiny[

```
##  [1] "code_muni"                     "name_muni"                    
##  [3] "code_state"                    "abbrev_state"                 
##  [5] "ano"                           "mortalidade_1"                
##  [7] "mortalidade_5"                 "taxa_freq_liquida_pre"        
##  [9] "indice_gini"                   "prop_pobreza_extrema_criancas"
## [11] "prop_pobreza_criancas"         "prop_vulner_pobreza_criancas" 
## [13] "taxa_agua_esgoto_inadequados"  "taxa_criancas_fora_escola_4_5"
## [15] "nome_regiao"                   "geom"
```
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;mortalidade (at√© 1 ano)&lt;/div&gt;

.pull-left[

``` r
muni_dados |&gt;
  filter(ano == 2010) |&gt;
  ggplot() +
* aes(
*   geometry = geom,
*   fill = mortalidade_1
* ) +
* geom_sf(
*   color = NA
* ) +
* scale_fill_viridis_c(
*   na.value = "grey90"
* ) +
  theme_minimal()
```
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-301-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;pobreza extrema crian√ßas&lt;/div&gt;

.pull-left[

``` r
muni_dados |&gt; 
  filter(ano == 2010) |&gt; 
  ggplot() +
* aes(
*   geometry = geom,
*   fill = prop_pobreza_extrema_criancas
* ) +
* geom_sf(
*   color = NA
* ) +
* scale_fill_viridis_c(
*   na.value = "grey90"
* ) +
  theme_minimal()
```
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-303-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;tx. crian√ßas fora da escola&lt;/div&gt;

.pull-left[

``` r
muni_dados |&gt; 
  filter(ano == 2010) |&gt; 
  ggplot() +
* aes(
*   geometry = geom,
*   fill = taxa_criancas_fora_escola_4_5
* ) +
* geom_sf(
*   color = NA
* ) +
* scale_fill_viridis_c(
*   na.value = "grey90"
* ) +
  theme_minimal()
```
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-305-1.png" width="100%" /&gt;
]

&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;tx. √°gua/esgoto inadequados&lt;/div&gt;

.pull-left[

``` r
muni_dados |&gt; 
  filter(ano == 2010) |&gt; 
  ggplot() +
* aes(
*   geometry = geom,
*   fill = taxa_agua_esgoto_inadequados
* ) +
* geom_sf(
*   color = NA
* ) +
* scale_fill_viridis_c(
*   na.value = "grey90"
* ) +
  theme_minimal()
```
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-307-1.png" width="100%" /&gt;
]


&lt;/div&gt;
&lt;/div&gt;

---

class: inverse center middle
name: "wooldridge"

# Pacote [`{wooldridge}`](https://justinmshea.github.io/wooldridge/)

&lt;br&gt;
&lt;br&gt;

.right[&lt;span style='font-size:80%'&gt;Este pacote cont√©m a documenta√ß√£o completa &lt;br&gt;para cada conjunto e todos os dados &lt;br&gt; utilizados no livro &lt;span style='color:#f58634'&gt;&lt;b&gt;Introdu√ß√£o √† Econometria&lt;/b&gt;&lt;/span&gt; &lt;br&gt; de Jeffrey M. Wooldridge&lt;/span&gt;]

---

### Dado utilizado: `wage`



O conjunto de dados `wage` √© derivado de uma pesquisa populacional realizada em 1976, coletada por Henry Farver e Jeffrey Wooldridge enquanto eram colegas no [MIT](https://www.mit.edu/), em 1988. Ele cont√©m 526 observa√ß√µes e 24 vari√°veis relacionadas ao mercado de trabalho, incuindo: *wage, educ, exper, tenure, nonwhite, female, married, numdep, smsa, northcen, south, west, construc, ndurman, trcommpu, trade, services, profserv, profocc, clerocc, servocc, lwage, expersq, e tenursq*.

.tiny[

``` r
wage &lt;- wooldridge::wage1
```
]

.scroll-output[

```
## Rows: 526
## Columns: 24
## $ wage     &lt;dbl&gt; 3.10, 3.24, 3.00, 6.00, 5.30, 8.75, 11.25, 5.00, 3.60, 18.18,‚Ä¶
## $ educ     &lt;int&gt; 11, 12, 11, 8, 12, 16, 18, 12, 12, 17, 16, 13, 12, 12, 12, 16‚Ä¶
## $ exper    &lt;int&gt; 2, 22, 2, 44, 7, 9, 15, 5, 26, 22, 8, 3, 15, 18, 31, 14, 10, ‚Ä¶
## $ tenure   &lt;int&gt; 0, 2, 0, 28, 2, 8, 7, 3, 4, 21, 2, 0, 0, 3, 15, 0, 0, 10, 0, ‚Ä¶
## $ nonwhite &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ female   &lt;int&gt; 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1‚Ä¶
## $ married  &lt;int&gt; 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0‚Ä¶
## $ numdep   &lt;int&gt; 2, 3, 2, 0, 1, 0, 0, 0, 2, 0, 0, 0, 2, 0, 1, 1, 0, 0, 3, 0, 0‚Ä¶
## $ smsa     &lt;int&gt; 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1‚Ä¶
## $ northcen &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ south    &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ west     &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1‚Ä¶
## $ construc &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ ndurman  &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ trcommpu &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ trade    &lt;int&gt; 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ services &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
## $ profserv &lt;int&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1‚Ä¶
## $ profocc  &lt;int&gt; 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1‚Ä¶
## $ clerocc  &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0‚Ä¶
## $ servocc  &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0‚Ä¶
## $ lwage    &lt;dbl&gt; 1.1314021, 1.1755733, 1.0986123, 1.7917595, 1.6677068, 2.1690‚Ä¶
## $ expersq  &lt;int&gt; 4, 484, 4, 1936, 49, 81, 225, 25, 676, 484, 64, 9, 225, 324, ‚Ä¶
## $ tenursq  &lt;int&gt; 0, 4, 0, 784, 4, 64, 49, 9, 16, 441, 4, 0, 0, 9, 225, 0, 0, 1‚Ä¶
```
]

---

**A rela√ß√£o entre educa√ß√£o e sal√°rio**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;gr√°fico&lt;/div&gt;

``` r
wage |&gt; 
  ggplot(aes(x = educ, y = wage)) +
  geom_point() +
  geom_smooth(method = 'lm', se = FALSE) 
```

&lt;img src="index_files/figure-html/unnamed-chunk-311-1.png" width="100%" /&gt;
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o&lt;/div&gt;

``` r
modelo &lt;- lm(wage ~ educ, data = wage)
summary(modelo)
```

```
## 
## Call:
## lm(formula = wage ~ educ, data = wage)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.3396 -2.1501 -0.9674  1.1921 16.6085 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -0.90485    0.68497  -1.321    0.187    
## educ         0.54136    0.05325  10.167   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.378 on 524 degrees of freedom
## Multiple R-squared:  0.1648,	Adjusted R-squared:  0.1632 
## F-statistic: 103.4 on 1 and 524 DF,  p-value: &lt; 2.2e-16
```
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

A rela√ß√£o entre os anos de estudo (`educ`) e o sal√°rio m√©dio por hora (`wage`) √© positiva e estatisticamente significativa.

O coeficiente estimado para `educ` √© **0.5413**, indicando que a cada ano adicional de escolaridade, o sal√°rio tende a aumentar, em m√©dia, **US$ 0.54**.

O `\(R^2\)` do modelo √© **0.1648**, o que significa que `educ` explica aproximadamente **16.48** da varia√ß√£o salarial.

&lt;br&gt;

**Regress√£o estimada:**

$$
\text{wage} = -0.9048 + 0.5413 \cdot \text{educ}
$$

&lt;/div&gt;
&lt;/div&gt;

---

**A rela√ß√£o entre educa√ß√£o e log-sal√°rio**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;gr√°fico&lt;/div&gt;

``` r
wage |&gt; 
  ggplot(aes(x = educ, y = lwage)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-313-1.png" width="100%" /&gt;
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o&lt;/div&gt;

``` r
modelo &lt;- lm(lwage ~ educ, data = wage)
summary(modelo)
```

```
## 
## Call:
## lm(formula = lwage ~ educ, data = wage)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.21158 -0.36393 -0.07263  0.29712  1.52339 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.583773   0.097336   5.998 3.74e-09 ***
## educ        0.082744   0.007567  10.935  &lt; 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.4801 on 524 degrees of freedom
## Multiple R-squared:  0.1858,	Adjusted R-squared:  0.1843 
## F-statistic: 119.6 on 1 and 524 DF,  p-value: &lt; 2.2e-16
```
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

A rela√ß√£o entre os anos de estudo (`educ`) e o logaritmo do sal√°rio por hora (`lwage`) √© **positiva** e estatisticamente significativa, com p-valor pr√≥ximo de zero.

O coeficiente de determina√ß√£o `\(R^2\)` √© **0.1858**, ou seja, 18.58% da varia√ß√£o no log-sal√°rio √© explicada pela escolaridade.

&lt;br&gt;

**Regress√£o estimada:**

$$
\text{lwage} = 0.5837 + 0.0827 \cdot \text{educ}
$$

&lt;br&gt;

**Interpreta√ß√£o do coeficiente:**

A cada **1 ano adicional de escolaridade** (`educ`), o **sal√°rio aumenta em m√©dia 8.3%**, dado que o modelo est√° em log-linear (interpreta√ß√£o aproximadade `\(\beta \cdot 100\)`).

&lt;/div&gt;
&lt;/div&gt;

---

**Mincer ‚Äî o sal√°rio √© estimado por meio da escolaridade e da experi√™ncia**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;gr√°fico&lt;/div&gt;

``` r
wage |&gt; 
  ggplot(aes(x = educ, y = lwage)) +
  geom_point(aes(color = exper), alpha = 0.7) +
  scale_color_viridis_c() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-315-1.png" width="100%" /&gt;
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o&lt;/div&gt;

``` r
mincer &lt;- lm(lwage ~ educ + exper, data = wage)
summary(mincer)
```

```
## 
## Call:
## lm(formula = lwage ~ educ + exper, data = wage)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.05800 -0.30136 -0.04539  0.30601  1.44425 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.216854   0.108595   1.997   0.0464 *  
## educ        0.097936   0.007622  12.848  &lt; 2e-16 ***
## exper       0.010347   0.001555   6.653 7.24e-11 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.4614 on 523 degrees of freedom
## Multiple R-squared:  0.2493,	Adjusted R-squared:  0.2465 
## F-statistic: 86.86 on 2 and 523 DF,  p-value: &lt; 2.2e-16
```
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

O logaritmo do sal√°rio por hora (`lwage`) est√° **positivamente** relacionado com os anos de estudo (`educ`) e com os anos de experi√™ncia (`exper`). Ambos os coeficientes s√£o estatisticamente significativos.

O `\(R^2\)` do modelo √© **0.2493**, ou seja, 24.93% da variabilidade no log-sal√°rio (`lwage`) √© explicada por escolaridade (`educ`) e experi√™ncia (`exper`).

&lt;br&gt;

**Regress√£o estimada:**

$$
\text{lwage} = 0.217 + 0.098 \cdot \text{educ} + 0.010 \cdot \text{exper}
$$

&lt;br&gt;

**Interpreta√ß√£o dos coeficientes:**

- Cada **ano adicional de estudo** (`educ`) est√° associado a um **aumento m√©dio de 9.79%** no sal√°rio por hora (`lwage`), _ceteris paribus_.

- Cada **ano adicional de experi√™ncia** (`exper`) implica em **aumento m√©dio de 1.03%** no sal√°rio por hora (`lwage`), _ceteris paribus_.

&lt;/div&gt;
&lt;/div&gt;

---

**Mincer com efeito n√£o linear da experi√™ncia sobre o sal√°rio**

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;gr√°fico&lt;/div&gt;

``` r
wage |&gt; 
  ggplot(aes(x = educ, y = lwage)) +
  geom_point(aes(color = exper, size = expersq), alpha = 0.7) +
  scale_color_viridis_c() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="index_files/figure-html/unnamed-chunk-317-1.png" width="100%" /&gt;
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;regress√£o&lt;/div&gt;

``` r
mincer &lt;- lm(lwage ~ educ + exper + expersq, data = wage)
summary(mincer)
```

```
## 
## Call:
## lm(formula = lwage ~ educ + exper + expersq, data = wage)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.96387 -0.29375 -0.04009  0.29497  1.30216 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.1279975  0.1059323   1.208    0.227    
## educ         0.0903658  0.0074680  12.100  &lt; 2e-16 ***
## exper        0.0410089  0.0051965   7.892 1.77e-14 ***
## expersq     -0.0007136  0.0001158  -6.164 1.42e-09 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.4459 on 522 degrees of freedom
## Multiple R-squared:  0.3003,	Adjusted R-squared:  0.2963 
## F-statistic: 74.67 on 3 and 522 DF,  p-value: &lt; 2.2e-16
```
&lt;/div&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;interpreta√ß√£o&lt;/div&gt;

O modelo sugere que:

- A **educa√ß√£o (`educ`)** tem **efeito positivo** no log do sal√°rio: cada ano adicional aumenta o log-sal√°rio em 9.04%.

- A **experi√™ncia (`exper`)** tamb√©m contribui **positivamente**, mas a um ritmo decrescente.

- O **termo quadr√°tico da experi√™ncia (`expersq`)** √© **negativo**, indicando que **h√° um ponto de retorno**, ap√≥s o qual o efeito da experi√™ncia no sal√°rio come√ßa a decrescer ‚Äî um comportamento esperado para carreiras profissionais.

&lt;br&gt;

**Regress√£o estimada:**

$$
\text{lwage} = 0.128 + 0.090 \cdot \text{educ} + 0.041 \cdot \text{exper} - 0.0007 \cdot \text{expersq}
$$

&lt;br&gt;

O modelo apresenta um `\(R^2\)` de **0.3003**, ou seja, aproximadamente 30.03% da varia√ß√£o no log-sal√°rio √© explicada pelas vari√°veis `educ`, `exper` e `expersq`.

Todos os coeficientes s√£o estatisticamente significativos, com p-valores pr√≥ximos de zero.


&lt;/div&gt;
&lt;/div&gt;

---

## Para saber mais!

&lt;div class="panelset"&gt;

&lt;div class="panel"&gt;
&lt;div class="panel-name"&gt;Em ingl√™s&lt;/div&gt;

.pull-left[

- [Causal Inference: The Mixtape](https://mixtape.scunning.com/index.html)

&lt;a href="https://mixtape.scunning.com/index.html"&gt;
&lt;img src="img/47-casual-inference.png" width="45%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;

]

.pull-right[

- [An Introduction to Statistical Learning: with Applications in R](https://hastie.su.domains/ISLRv2_website.pdf)

&lt;a href="https://mixtape.scunning.com/index.html"&gt;
&lt;img src="img/48-introduction-statistical-learning.png" width="45%" style="display: block; margin: auto;" /&gt;
&lt;/a&gt;

]

&lt;/div&gt;
&lt;/div&gt;

---

# Obrigada!

.pull-left[

&lt;img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNjFlNDgyOTRhMTk5MGE4ZTNmNjg5ZWMzM2NlZDU3ODBmZDU0OGFiNiZlcD12MV9pbnRlcm5hbF9naWZzX2dpZklkJmN0PWc/M9NbzZjAcxq9jS9LZJ/giphy.gif" width="65%" style="display: block; margin: auto;" /&gt;

&lt;!-- .center[Agradecimento especial a [Curso-R](https://curso-r.com/) pelos materiais.] --&gt;

.center[Slides criados usando os pacotes em R:]
.center[[**xaringan**](https://github.com/yihui/xaringan)]
.center[[**xaringanthemer**](https://github.com/gadenbuie/xaringanthemer)]

.center[O chakra vem da biblioteca JavaScript [remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr), and [R Markdown](https://rmarkdown.rstudio.com).]
]

.pull-right[

&lt;img src="img/49-luisa.jpg" width="55%" style="display: block; margin: auto;" /&gt;

.center[&lt;i class="fas fa-home"&gt;&lt;/i&gt; [luisa.rbind.io](https://luisa.rbind.io/)]

.center[&lt;i class="fab fa-twitter"&gt;&lt;/i&gt; [@lgiselebock](https://twitter.com/lgiselebock)]

.center[&lt;i class="fab fa-github"&gt;&lt;/i&gt; [@lgiselebock](https://github.com/lgiselebock/)]

.center[&lt;i class="far fa-envelope"&gt;&lt;/i&gt; [luisa.bock@acad.ufsm.br](mailto:luisa.bock@acad.ufsm.br)]
]

&lt;!-- inicio academic icons --&gt;
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css"&gt;
&lt;!-- final academic icons --&gt;

 
&lt;!-- inicio font awesome --&gt;
&lt;script src="https://kit.fontawesome.com/1f72d6921a.js" crossorigin="anonymous"&gt;&lt;/script&gt;

&lt;!-- final font awesome --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
  "slideNumberFormat": "%current%/%total%",
  "highlightStyle": "github",
  "highlightLines": true,
  "ratio": "16:9",
  "countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
